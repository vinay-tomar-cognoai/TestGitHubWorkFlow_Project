{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cogno AI</title>

    <link rel="shortcut icon" type="image/png" href="https://static.allincall.in/static/EasyChatApp/img/favicon.svg"/>
    <!-- <link href="/static/EasyChatApp/css/ga_auth.css" type="text/css" rel="stylesheet" media="screen,projection"/> -->
    <script src="/static/EasyChatApp/js/jquery.min.js"></script>
    <style type="text/css">
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap');
        html {
            font-family: 'DM Sans';
            font-style: normal;
        }

        body {
            background: linear-gradient( 90deg, #0254D7 0%, #105BFF 62.36%), #FFFFFF;
            margin: 0px;
        }

        .easychat-alexa-login-page-container {
            width: 100%;
            height: 100%;
            padding-top: 80px;
            overflow-y: auto;
            padding-bottom: 20px;
        }

        .easychat-alexa-login-wrapper-div {
            padding: 20px;
            width: 40%;
            height: auto;
            background: #FFFFFF;
            border: 1px solid rgba(0, 0, 0, 0.3);
            box-sizing: border-box;
            border-radius: 19px;
            margin: auto;
        }

        .easychat-alexa-otp-verification-div {
            display: none;
        }

        .easychat-brand-logo-div {
            width: 100%;
            text-align: center;
            height: 100px;
        }

        .easychat-alexa-details-provide-text-div {
            font-weight: 500;
            font-size: 17px;
            color: #3D3D3D;
            margin: 18px 0px;
        }

        .eastchat-alexa-form-control-div {
            margin-bottom: 18px;
        }

        .eastchat-alexa-form-control-div label {
            font-weight: normal;
            font-size: 16px;
            color: #4D4D4D;
        }

        .eastchat-alexa-form-control-div label b {
            font-weight: normal;
            font-size: 16px;
            color: #E53E3E;
        }

        .eastchat-alexa-form-control-div input {
            padding: 10px 6px;
            height: 48px;
            width: 100%;
            box-sizing: border-box;
            background: #F3F3F3;
            border: 1px solid transparent;
            border-radius: 8px;
            color: #000000;
            font-size: 14px;
            font-weight: 500;
            margin-top: 8px;
            outline: none;
        }

        .eastchat-alexa-form-control-div input:focus {
            background-color: #ffffff;
            border: 1px solid #F3F3F3;
        }

        .eastchat-alexa-form-control-div input::placeholder {
            font-weight: normal;
            font-size: 14px;
            color: #8C8C8C;
        }

        .eastchat-alexa-form-control-div input::-webkit-outer-spin-button,
        .eastchat-alexa-form-control-div input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .eastchat-alexa-form-control-div input[type=number] {
            -moz-appearance: textfield;
        }

        .easychat-alexa-login-page-btns-div button {
            padding: 0px 16px;
            width: auto;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #0254D7;
            box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.15);
            border-radius: 7px;
            border: none;
            outline: none;
            font-weight: 500;
            font-size: 16px;
            color: #FFFFFF;
            margin-top: 12px;
            cursor: pointer;
        }

        .easychat-alexa-login-page-btns-div {
            width: 100%;
            display: flex;
            justify-content: flex-end;
        }

        .eastchat-alexa-form-control-otp-div {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-evenly;
        }

        .eastchat-alexa-form-control-otp-div input {
            padding: 8px;
            height: 60px;
            width: 100%;
            margin-right: 8px;
            text-align: center;
            box-sizing: border-box;
            background: #F3F3F3;
            border: 1px solid transparent;
            border-radius: 8px;
            color: #000000;
            font-size: 14px;
            font-weight: 500;
            outline: none;
        }

        .eastchat-alexa-form-control-otp-div input:last-child {
            margin-right: 0px;
        }

        .eastchat-alexa-form-control-otp-div input:focus {
            background-color: #ffffff;
            border: 1px solid #F3F3F3;
        }

        .eastchat-alexa-form-control-otp-div input::-webkit-outer-spin-button,
        .eastchat-alexa-form-control-otp-div input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .eastchat-alexa-form-control-otp-div input[type=number] {
            -moz-appearance: textfield;
        }

        .easychat-alexa-not-receive-text-div {
            width: 100%;
            font-weight: normal;
            font-size: 16px;
            text-align: center;
            color: rgba(0, 0, 0, 0.6);
            margin-top: 24px;
        }

        .easychat-alexa-resend-otp-text-div {
            width: 100%;
            text-align: center;
            margin: 8px 0px 20px 0px;
        }

        .easychat-alexa-resend-otp-text-div a {
            font-weight: 500;
            font-size: 16px;
            text-decoration-line: underline;
            text-underline-offset: 2px;
            color: #373DCB;
        }

        @media screen and (max-width: 600px) {
            .easychat-alexa-login-wrapper-div {
                width: 90%;
            }
        }
    </style>
</head>

<body>
    <input type='hidden' name='csrfmiddlewaretoken' value='KiGm4pTLDggX7CLdCQTOcV5UC9tLQMFEDX0pw8txnOD3fTZbBnPL2YrYn2f5EosO'/>
    <div class="easychat-alexa-login-page-container">
        <div class="easychat-alexa-login-wrapper-div">
            <div class="easychat-brand-logo-div">
                {% if google_project_obj.welcome_image_src == "" %}
                <svg width="179" height="35" viewBox="0 0 179 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M51.49 25.9218C54.1611 25.9218 56.5065 25.1704 58.4935 23.7004C60.4806 22.2304 61.8813 20.1723 62.6305 17.4936H57.4511C56.9299 18.7023 56.1481 19.617 55.0732 20.2377C53.9982 20.8583 52.7929 21.185 51.49 21.185C49.5355 21.185 47.9067 20.499 46.6363 19.1596C45.3659 17.8203 44.7144 16.0889 44.7144 14.0309C44.7144 11.9728 45.3659 10.2741 46.6363 8.90209C47.9067 7.56272 49.5355 6.87671 51.49 6.87671C52.8255 6.87671 54.0308 7.20338 55.1058 7.85673C56.1807 8.51008 56.9625 9.42477 57.4511 10.6008H62.6305C61.8813 7.92207 60.4806 5.83135 58.4935 4.36132C56.5065 2.89129 54.1611 2.17261 51.49 2.17261C48.037 2.17261 45.203 3.31597 43.0205 5.57001C40.8054 7.82406 39.6979 10.6661 39.6979 14.0309C39.6979 17.4283 40.8054 20.2703 43.0205 22.5244C45.203 24.7784 48.037 25.9218 51.49 25.9218Z" fill="#204DAF"/>
                    <path d="M72.7709 25.8891C75.4095 25.8891 77.592 25.0398 79.3185 23.3084C81.0449 21.577 81.8919 19.4536 81.8919 16.8729C81.8919 14.2922 81.0449 12.1362 79.3185 10.4048C77.592 8.67342 75.4095 7.82406 72.7709 7.82406C70.1324 7.82406 67.9499 8.67342 66.2234 10.4048C64.4969 12.1362 63.6174 14.2922 63.6174 16.8729C63.6174 19.4536 64.4644 21.577 66.1908 23.3084C67.9173 25.0398 70.0998 25.8891 72.7709 25.8891ZM69.6763 20.0743C68.862 19.225 68.4385 18.147 68.4385 16.8729C68.4385 15.5662 68.862 14.4882 69.6763 13.6389C70.4907 12.7895 71.5005 12.3648 72.7709 12.3648C74.0414 12.3648 75.0512 12.7895 75.8655 13.6389C76.6799 14.4882 77.0708 15.5662 77.0708 16.8729C77.0708 18.147 76.6799 19.225 75.8655 20.0743C75.0512 20.9237 74.0414 21.3484 72.7709 21.3484C71.5005 21.3484 70.4907 20.9237 69.6763 20.0743Z" fill="#204DAF"/>
                    <path d="M94.8846 32.9779C96.6762 32.9779 98.1095 32.5533 99.1193 31.6712C100.129 30.7892 100.618 29.4499 100.618 27.6532V8.24874H95.8944V10.0128H95.5361C95.1452 9.5881 94.7869 9.26143 94.4611 8.96742C94.1028 8.70608 93.6142 8.44474 92.9301 8.1834C92.2461 7.95473 91.4968 7.82406 90.6499 7.82406C88.4348 7.82406 86.578 8.70608 85.1122 10.4375C83.6137 12.1688 82.8645 14.3249 82.8645 16.8403C82.8645 19.421 83.6463 21.5444 85.2099 23.2757C86.7409 25.0071 88.6303 25.8891 90.8779 25.8891C92.865 25.8891 94.396 25.2031 95.5035 23.8637H95.8619V27.4245C95.8619 28.2085 95.5035 28.6005 94.7869 28.6005H87.1318V32.9779H94.8846ZM91.8226 21.381C90.6825 21.381 89.7052 20.9563 88.9234 20.107C88.1091 19.2576 87.7182 18.1796 87.7182 16.8403C87.7182 15.5336 88.1091 14.4555 88.9234 13.6062C89.7052 12.7895 90.6825 12.3648 91.8226 12.3648C92.9953 12.3648 93.9725 12.7568 94.7543 13.5735C95.5361 14.3902 95.927 15.5009 95.927 16.8403C95.927 18.1143 95.5361 19.1923 94.7869 20.0743C94.0051 20.9563 93.0279 21.381 91.8226 21.381Z" fill="#204DAF"/>
                    <path d="M107.65 25.4644V15.4682C107.65 14.5862 107.943 13.8675 108.497 13.2795C109.051 12.7242 109.735 12.4302 110.582 12.4302C111.396 12.4302 112.08 12.7242 112.634 13.2795C113.155 13.8349 113.416 14.5535 113.416 15.4356V25.4644H118.172V13.9002C118.172 12.1688 117.618 10.7315 116.51 9.55543C115.37 8.41208 113.937 7.82406 112.145 7.82406C110.289 7.82406 108.921 8.47741 107.976 9.81677H107.65V8.24874H102.894V25.4644H107.65Z" fill="#204DAF"/>
                    <path d="M128.794 25.8891C131.433 25.8891 133.615 25.0398 135.342 23.3084C137.068 21.577 137.915 19.4536 137.915 16.8729C137.915 14.2922 137.068 12.1362 135.342 10.4048C133.615 8.67342 131.433 7.82406 128.794 7.82406C126.156 7.82406 123.973 8.67342 122.247 10.4048C120.52 12.1362 119.641 14.2922 119.641 16.8729C119.641 19.4536 120.488 21.577 122.214 23.3084C123.941 25.0398 126.123 25.8891 128.794 25.8891ZM125.7 20.0743C124.885 19.225 124.462 18.147 124.462 16.8729C124.462 15.5662 124.885 14.4882 125.7 13.6389C126.514 12.7895 127.524 12.3648 128.794 12.3648C130.065 12.3648 131.075 12.7895 131.889 13.6389C132.703 14.4882 133.094 15.5662 133.094 16.8729C133.094 18.147 132.703 19.225 131.889 20.0743C131.075 20.9237 130.065 21.3484 128.794 21.3484C127.524 21.3484 126.514 20.9237 125.7 20.0743Z" fill="#204DAF"/>
                    <path d="M166.967 25.4644L159.312 2.59728H152.472L144.751 25.4644H149.963L151.429 20.891H160.387L161.853 25.4644H166.967ZM155.697 7.49739H156.055L158.954 16.4483H152.83L155.697 7.49739Z" fill="#204DAF"/>
                    <path d="M179 25.4644V21.0217H175.873V7.04005H179V2.59728H167.957V7.04005H171.019V21.0217H167.957V25.4644H179Z" fill="#204DAF"/>
                    <path d="M23.8635 31.8251C25.8837 29.9072 26.8938 27.3123 26.8938 24.1532C26.8938 21.1071 25.8837 18.5122 23.8635 16.3685C21.731 14.3378 19.1496 13.3224 16.1193 13.3224C12.9768 13.3224 10.3954 14.3378 8.37517 16.3685C6.35496 18.5122 5.34485 21.1071 5.34485 24.1532C5.34485 27.3123 6.35496 29.9072 8.37517 31.8251C10.3954 33.8559 12.9768 34.8713 16.1193 34.8713C19.2619 34.8713 21.8433 33.8559 23.8635 31.8251Z" fill="url(#paint0_linear)" fill-opacity="0.6"/>
                    <path d="M23.8635 3.04615C25.8837 4.96412 26.8938 7.55903 26.8938 10.718C26.8938 13.7642 25.8837 16.3591 23.8635 18.5027C21.731 20.5335 19.1496 21.5489 16.1193 21.5489C12.9768 21.5489 10.3954 20.5335 8.37517 18.5027C6.35496 16.3591 5.34485 13.7642 5.34485 10.718C5.34485 7.55903 6.35496 4.96412 8.37517 3.04615C10.3954 1.01536 12.9768 -3.05176e-05 16.1193 -3.05176e-05C19.2619 -3.05176e-05 21.8433 1.01536 23.8635 3.04615Z" fill="url(#paint1_linear)"/>
                    <path d="M3.04619 9.64764C4.96416 7.62743 7.55906 6.61732 10.7181 6.61732C13.7643 6.61732 16.3592 7.62743 18.5028 9.64764C20.5336 11.7801 21.549 14.3615 21.549 17.3918C21.549 20.5344 20.5336 23.1157 18.5028 25.136C16.3592 27.1562 13.7643 28.1663 10.7181 28.1663C7.55906 28.1663 4.96416 27.1562 3.04619 25.136C1.0154 23.1157 0 20.5344 0 17.3918C0 14.2492 1.0154 11.6679 3.04619 9.64764Z" fill="url(#paint2_linear)" fill-opacity="0.6"/>
                    <path d="M29.2772 9.64764C27.3592 7.62743 24.7643 6.61732 21.6053 6.61732C18.5591 6.61732 15.9642 7.62743 13.8206 9.64764C11.7898 11.7801 10.7744 14.3615 10.7744 17.3918C10.7744 20.5344 11.7898 23.1157 13.8206 25.136C15.9642 27.1562 18.5591 28.1663 21.6053 28.1663C24.7643 28.1663 27.3592 27.1562 29.2772 25.136C31.308 23.1157 32.3234 20.5344 32.3234 17.3918C32.3234 14.2492 31.308 11.6679 29.2772 9.64764Z" fill="url(#paint3_linear)" fill-opacity="0.6"/>
                    <defs>
                    <linearGradient id="paint0_linear" x1="16.1193" y1="13.3224" x2="16.1193" y2="34.8713" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#373DCB"/>
                    <stop offset="1" stop-color="#2146C8" stop-opacity="0.47"/>
                    </linearGradient>
                    <linearGradient id="paint1_linear" x1="16.1193" y1="21.5489" x2="16.1193" y2="-3.05176e-05" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#005DCA"/>
                    <stop offset="1" stop-color="#37D4F7"/>
                    </linearGradient>
                    <linearGradient id="paint2_linear" x1="21.549" y1="17.3918" x2="0" y2="17.3918" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#373DCB"/>
                    <stop offset="1" stop-color="#2163E2" stop-opacity="0.63"/>
                    </linearGradient>
                    <linearGradient id="paint3_linear" x1="10.7744" y1="17.3918" x2="32.3234" y2="17.3918" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#373DCB"/>
                    <stop offset="1" stop-color="#2163E2" stop-opacity="0.63"/>
                    </linearGradient>
                    </defs>
                    </svg>
                {% else %}
                    <img src="{{google_project_obj.welcome_image_src}}" class="responsive-img" style="width: 50%;height: 100%;">
                {% endif %}
            </div>
            <!-- *****************Login Credentials Div*************** -->

            <div class="easychat-alexa-login-credential-div">
                <div class="easychat-alexa-details-provide-text-div">
                    Please provide your details for verification
                </div>
                <div class="eastchat-alexa-form-control-div">
                    <label>Phone Number <b>*</b></label>
                    <input type="number" placeholder="Phone Number" id="mobile-number" maxlength="10" autocomplete="off">
                </div>
                <div class="eastchat-alexa-form-control-div">
                    <label>Email ID <b>*</b></label>
                    <input type="email" placeholder="Email ID" id="email-id" autocomplete="off">
                </div>
                <div class="eastchat-alexa-form-control-div">
                    <label>PAN Number <b>*</b></label>
                    <input type="text" placeholder="PAN Number" class="custom-field" id="pan-number" autocomplete="off">
                </div>
                <div class="col s12">
                    <span id="internal_error" style="color: red; display:none;">Unable to process the details. Please try again later.</span>
                </div>
                <div class="easychat-alexa-login-page-btns-div">
                    <button onclick="get_otp(this);" class="easychat-alexa-get-otp-btn">
                    Get OTP
                </button>
                </div>
            </div>
            <!-- *****************Login Credentials Div*************** -->



            <!-- *****************OTP Verification Div*************** -->
            <div class="easychat-alexa-otp-verification-div">
                <div class="easychat-alexa-details-provide-text-div">
                    Enter the verification code
                </div>
                <div class="eastchat-alexa-form-control-otp-div">
                    <input class="otp-form" type="tel" maxlength="1" autocomplete="off">
                    <input class="otp-form" type="tel" maxlength="1" autocomplete="off">
                    <input class="otp-form" type="tel" maxlength="1" autocomplete="off">
                    <input class="otp-form" type="tel" maxlength="1" autocomplete="off">
                    <input class="otp-form" type="tel" maxlength="1" autocomplete="off">
                    <input class="otp-form" type="tel" maxlength="1" autocomplete="off">
                </div>
                <div class="easychat-alexa-not-receive-text-div">
                    Didnâ€™t receive OTP Code?
                </div>

                <div class="easychat-alexa-resend-otp-text-div">
                    <a href="javascript:void(0)" onclick="resend_otp_code(this)">Resend Code</a>
                </div>
                <div class="col s12">
                    <span id="otp_internal_error" style="color: red; display:none;">Unable to process the details. Please try again later.</span>
                    <span id="otp_internal_info" style="color: green;"></span>
                </div>
                <div class="easychat-alexa-login-page-btns-div">
                    <button class="easychat-alexa-submit-btn" id="verify-btn">
                        Verify
                </button>
                </div>
            </div>
            <!-- *****************OTP Verification Div*************** -->

        </div>


    </div>
    <!-- <script type="text/javascript" src="{% static 'EasyChatApp/js/ga_auth.js' %}"></script> -->
    <script>
        window.PROJECT_DETAILS_PK = {{google_project_obj.pk}};
    </script>
    <script type="text/javascript">
        var custom_fields_list = [];
        function validate_phone_number(phone) {
        
            phone = phone.trim();
            var is_number = /^\d+$/.test(phone);
            var regex = /[6-9][0-9]{9}/;
            if (phone != "" && regex.test(phone) && phone.length == 10 && is_number) {
                return true;
            }

            return false;
        }
            
        function validate_email(email) {
           var email = email.trim();
            var regex = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
            if (email != "" && regex.test(email)) {
                return true;
            }

            return false;
        }


        function get_csrf_token() {
            var CSRF_TOKEN = $('input[name="csrfmiddlewaretoken"]').val();
            return CSRF_TOKEN;
        }

        function get_otp(el) {

            custom_fields_list = [];
            $("#internal_error").hide();
            var CSRFToken=get_csrf_token();
            var mobile_number = $("#mobile-number").val();


            if(mobile_number == "" || !validate_phone_number(mobile_number)) {
                
                $("#internal_error").html("Please enter valid Mobile Number");
                $("#internal_error").show();
                return ;
            }

            var email_id = $("#email-id").val();

            if(email_id == "" || !validate_email(email_id)) {
                
                $("#internal_error").html("Please enter valid Email ID");
                $("#internal_error").show();
                return ;
            }
            var custom_fields = $(".custom-field");

            for(var item = 0; item < custom_fields.length; item++) {

                try{
                    var variable = custom_fields[item].id;
                    var value = custom_fields[item].value;

                    if(value == "") {

                        $("#internal_error").html("Please enter valid " + variable);
                        $("#internal_error").show();
                        return ;
                    }
                    custom_fields_list.push({"variable_name": variable, "value": value})
                } catch(err){}
            }

            $(el).html('Sending');    

            $.ajax({
                url:"/chat/get-google-assistant-auth-otp/",
                    type:"POST",
                    data:{
                        mobile_number: mobile_number,
                        email_id: email_id,
                        custom_fields_list: JSON.stringify(custom_fields_list),
                        project_details_id: PROJECT_DETAILS_PK,
                    },
                    success: function(response){ 
                        if(response["status"]==200){
                            document.querySelector(".easychat-alexa-login-credential-div").style.display = "none";
                            document.querySelector(".easychat-alexa-otp-verification-div").style.display = "block";
                            document.getElementsByClassName('otp-form')[0].focus();
                        }else{
                            $("#internal_error").show();                     
                        }

                        $(el).html('Get OTP');    
                },
                error: function(xhr, textstatus, errorthrown) {
                    console.log("Please report this error: " + errorthrown + xhr.status + xhr.responseText);
                    $(el).html('Get OTP');
                }
            });        
        }

        var CSRFToken=get_csrf_token();
        $(document).on("click","#verify-btn", function(e){
            $("#otp_internal_error").hide();

            var mobile_number = $("#mobile-number").val();
            var email_id = $("#email-id").val();
            var entered_otp_inputs = document.getElementsByClassName('otp-form');

            var entered_otp = "";
            for (otp_input of entered_otp_inputs) {
                entered_otp += otp_input.value;
            }

            if (entered_otp == "" || entered_otp.length < 6) {
                $('#otp_internal_info').html('Please enter otp before submitting.');
                return;
            } else {
                $('#otp_internal_info').html('');
            }

            $(e.target).html('Verifying');

            $.ajax({
                url:"/chat/verify-google-assistant-otp/",
                type:"POST",
                data:{
                    mobile_number: mobile_number,
                    email_id: email_id,
                    custom_fields_list: JSON.stringify(custom_fields_list),
                    otp: entered_otp,
                    project_details_id: PROJECT_DETAILS_PK,
                },
                success: function(response){

                     if(response["status"]==200){

                        var cur_url = new URL(window.location.href);
                        window.location.href = window.location.origin + "/o/authorize/" + cur_url.search;
                     }else{

                        $("#otp_internal_error").show();
                        $(e.target).html('Verify');
                     }
                },
                error: function(xhr, textstatus, errorthrown) {
                    console.log("Please report this error: " + errorthrown + xhr.status + xhr.responseText);
                    $(e.target).html('Verify');
                }
            });
        });

        $('.otp-form').on('keypress', function(e) {
            keys = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
            return keys.indexOf(event.key) > -1
        });

        $('.otp-form').on('keyup', function(e) {
            keys = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
            if (keys.indexOf(this.value) != -1) {
                $(this).next().focus();
            }
        });

        function empty_otp_fields() {
            var otp_elems = document.getElementsByClassName('otp-form');

            for (otp_elem of otp_elems) {
                otp_elem.value = '';
            }
        }

        function resend_otp_code(el) {
            $("#otp_internal_error").hide();                     
            $(el).html('Sending');
            el.style.pointerEvents = 'none';

            var mobile_number = $("#mobile-number").val();
            var email_id = $("#email-id").val();
            var pan_number = $("#pan-number").val();

            empty_otp_fields();

            $.ajax({
                url:"/chat/get-google-assistant-auth-otp/",
                    type:"POST",
                    data:{
                        mobile_number: mobile_number,
                        email_id: email_id,
                        pan_number: pan_number,
                    },
                    success: function(response){ 
                        if(response["status"]==200){
                            document.getElementById('otp_internal_info').innerHTML  = 'OTP has been sent successfully.';
                            document.getElementsByClassName('otp-form')[0].focus();
                            
                            setTimeout(function() {
                                document.getElementById('otp_internal_info').innerHTML  = '';
                                el.style.pointerEvents = 'auto';
                            }, 2000)
                        }else{
                            $("#otp_internal_error").show();                     
                        }

                        $(el).html('Resend Code');    
                },
                error: function(xhr, textstatus, errorthrown) {
                    console.log("Please report this error: " + errorthrown + xhr.status + xhr.responseText);
                }
            });
        }
    </script>
</body>

</html>
