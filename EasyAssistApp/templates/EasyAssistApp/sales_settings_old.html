{% extends 'EasyAssistApp/console.html' %}
{% block content %}
{% load static %}
<style type="text/css">
  #editor-code {
  width:100%;
  height:10em;
  overflow:auto;
  }
  #editor-code-cjs {
  width:100%;
  height:10em;
  overflow:auto;
}

.input-group-text{
    width: 143px;
    height: 31px;
}

.chat-svg-icon{
  height: 95px;
  width: 95px;
  margin-top: 10px;
}

/* #pills-tab #pills-home-tab > [id='1a']{

} */
.product-category-li{
    display: inline-block;
    color: #fff;
    padding: 2px 8px;
    min-height: 28px;
    background: #540D29;
    border-radius: 8px;
    margin-top: 5px;
    margin-right: 10px;
}

.cognoai-custom-tag-input {
    position: relative;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5em;
}

.remark-input, .remark-input:focus, .remark-with-buttons-input, .remark-with-buttons-input:focus {
  width:30%;
  border-radius: 8px;
  outline:none;
  border: 1px solid #000;
}

#predefined-remark-li, .support-language-li, #predefined-remark-li-with-buttons {
  display: flex;
  color: #fff;
  padding: 2px 8px;
  min-height: 28px;
  background: #540D29;
  border-radius: 8px;
  user-select: none; 
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  align-items: center;
  gap: 10px;
}

.default-chat-icon .reset-icon{
  width: 90px !important;
  height: 90px !important;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  margin: 15px -30px;
}

.default-chat-icon img{
  width: 90px;
  height: 90px;
  padding: 10px;
}

#new-image-div img{
  cursor: pointer;
}

#new-image-div{
  border: 1px solid #2F80ED;
}

#predefined-remarks-tag-with-buttons-list {
  display: flex;
  gap: 1em;
}

#cobrowse-toggle + .easyassist-switch-slider {
  width: 42px !important;
  height: 22px !important;
}

#cognomeet-toggle + .easyassist-switch-slider {
  width: 42px !important;
  height: 22px !important;
}

#cobrowse-toggle + .easyassist-switch-slider:before {
  width: 15.53px !important;
  height: 15.63px !important;
}

#cognomeet-toggle + .easyassist-switch-slider:before {
  width: 15.53px !important;
  height: 15.63px !important;
}

#cognomeet-toggle:checked + .easyassist-switch-slider:before {
  -webkit-transform: translateX(20px);
  -ms-transform: translateX(20px);
  transform: translateX(20px);
}

#cobrowse-toggle:checked + .easyassist-switch-slider:before {
  -webkit-transform: translateX(20px);
  -ms-transform: translateX(20px);
  transform: translateX(20px);
}
#pills-options {
  display: flex;
  justify-content: center;
}

.message-container{
    width: 96%;
    margin: 0 auto;
    margin-top: 16px;
    background: #FDF6DB;
    border: 1px solid #F7D14C;
    box-sizing: border-box;
    border-radius: 8px;
    padding: 8px 12px;
}

.message-container p{
    color: #F59E0B;
    /* font-size: 12px; */
    font-weight: 400;
}

#icon-error-div{
  color: red;
}

.remove-uploaded-icon{
  width: 24px;
  height: 24px;
  display: flex;
  align-items:center;
  justify-content: center;
  background: #f8f8f8;
  filter: drop-shadow(0px 0px 2px rgba(0, 0, 0, 0.13));
  border-radius: 12px;
  cursor: pointer;
  position: absolute;
  top: -10px;
  right: 27px;
  /* display: none; */
}

{% if cobrowse_agent.get_access_token_obj.cobrowsing_console_theme_color != None %}
  #pills-options-tab .nav-item .nav-link.active {
    border-bottom: 3px solid   {{ access_token_obj.get_cobrowsing_console_theme_color.hex }} !important;
    color: {{ access_token_obj.get_cobrowsing_console_theme_color.hex }} !important;
    background-color: inherit;
    border: none;
  }
  input:checked + .easyassist-option-switch-slider {
    background-color: {{ access_token_obj.get_cobrowsing_console_theme_color.hex }} !important;
    border: 2px solid {{ access_token_obj.get_cobrowsing_console_theme_color.hex }} !important;
  }

  #cobrowse_logo_upload_button {
    background: {{ access_token_obj.get_cobrowsing_console_theme_color.hex }} !important;
  }

  .card-subheader-heading-text {
    color: #2D2D2D!important;
  }
  
  .edit-icon svg {
    fill: {{ access_token_obj.get_cobrowsing_console_theme_color.hex }} !important;
  }
{% else %}
  #pills-options-tab .nav-item .nav-link.active {
    border-bottom: 3px solid  #435ac6 !important;
    color: #435ac6 !important;
    background-color: inherit;
    border: none;
  }

  .edit-icon svg {
    fill: #0254D7 !important;
  }
{% endif %}

#pills-options-tab .nav-item .nav-link {
  color :black;
  border:none !important;
}

#cobrowse_logo_upload_button {
  /*width: 173px;*/
  height: 37px;

  background: #1C43C5;
  border-radius: 5px;
  outline:none!important;
  color: white;
  border: none;
}
#change_console_color_button {
  border: none;
  background-color: inherit;
  cursor: pointer !important;
  justify-content: right !important;
  outline:none;
}

/* .tab-content {

  height: 75vh;
} */

@media only screen and (min-width: 760px){
 #save-btn-admin{
   margin-bottom: 10rem;
 }

 .chat-svg-icon{
    height: 95px;
    width: 95px;
  }
 
#copy-cjs-script{
   margin-bottom: 8rem;
 }
  
}

.card-heading-text {
  font-size: 16px;
  letter-spacing: -0.01em;
  font-weight: 500 !important;
  font-style: normal;
}

tbody tr {
  border-bottom: 1px solid #F4F4F4;
}

th {
  font-family: Silka;
  font-style: normal;
  font-weight: normal!important;
  font-size: 15px;
  line-height: 18px;
  color: #858796;
  height: 64px;
  vertical-align: middle!important;
  padding-top: 0.75em!important;
}

.card-subheader-heading-text {
  font-size: 16px;
  line-height: 22px;
  letter-spacing: -0.01em;
  line-height: 22px;
  font-style: normal;
  color: #3662C5;
  /*font-weight: 500!important*/
}

.easyassist-option-switch {
  position: relative;
  display: inline-block;
  width: 45px;
  height: 22px;
  margin-top: 1em;
}

.easyassist-option-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.easyassist-option-switch-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
  border: 2px solid #BECAD6;
}

.easyassist-option-switch-slider:before {
  position: absolute;
  content: "";
  height: 14px;
  width: 14px;
  left: 2px;
  bottom: 2px;
  background-color: #BECAD6;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .easyassist-option-switch-slider {
  background-color: #1C43C5;
  border: 2px solid #1C43C5;
}

input:checked + .easyassist-option-switch-slider:before {
  background: white;
}
input:focus + .easyassist-option-switch-slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .easyassist-option-switch-slider:before {
  -webkit-transform: translateX(23px);
  -ms-transform: translateX(23px);
  transform: translateX(23px);
}

/* Rounded easyassist-option-switch-sliders */
.easyassist-option-switch-slider.round {
  border-radius: 34px;
}

.easyassist-option-switch-slider.round:before {
  border-radius: 50%;
}

#recording_expires_in_days {

  border: 1px solid #DADADA!important;
  box-sizing: border-box;
  border-radius: 8px;
  outline: none!important;
}

textarea {
  max-width: 447px!important;
  height: 9em!important;
  border: 1px solid #DADADA!important;
  box-sizing: border-box;
  border-radius: 8px!important;
  resize: none;
}

#input-predefined-remark,
#input_product_category,
#input_language_support,
#input-predefined-remark-with-buttons {
  width: 100% !important;
  max-width: 447px!important;
  height: 51px;
  border: 1px solid #DADADA!important;
  box-sizing: border-box;
  border-radius: 8px;
  outline: none;
}

#input-masking-type,
#field_stuck_timer,
#recording_expires_in_days,
#meeting_default_password,
#meeting_url,
#floating_button_position,
#floating_button_bg_color,
#cobrowsing-console-theme-color,
#meet_background_color,
#archive_on_common_inactivity_threshold,
#drop_link_expiry_time,
#no_agent_connects_toast_threshold,
#meeting_end_time,
#low_bandwidth_cobrowsing_threshold,
#maximum_active_leads_threshold,
#floating_button_left_right_position,
#no_agent_connects_meeting_toast_threshold,
#greeting_bubble_auto_popup_timer,
#auto_assign_unattended_lead_timer_input,
#inactivity_auto_popup_number,
#exit-intent-popup-count,
#auto-archive-lead-timer-input,
#no_agent_connect_timer_reset_count,
#unattended-lead-archive-timer-input {
  /* width: 173px!important; */
  height: 37px;
  border-radius: 5px;
  border: 1px solid #DADADA!important;
}

#reconnecting_window_timer_input_field {
  /* width: 173px!important; */
  height: 37px;
  border-radius: 5px;
  border: 1px solid #DADADA!important;
}


table {
  table-layout: fixed;
}

#pills-options-tabContent {
  padding: 1.25em!important;
}

#pills-options-tabContent .card-body {
  padding-bottom: 0!important;
}

#pills-options-tabContent .card {
  box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.25);
  border-radius: 10px!important;
}

#pills-options-tabContent .shadow {
  box-shadow: 0px 0px 35px rgba(0, 0, 0, 0.1)!important;
}

@media only screen and (max-width: 767px) {
  #input-masking-type, 
  #field_stuck_timer, 
  #recording_expires_in_days, 
  #meeting_default_password, 
  #meeting_url, 
  #floating_button_position,
  #floating_button_bg_color, 
  #cobrowsing-console-theme-color, 
  #meet_background_color,
  #archive_on_common_inactivity_timer_section,
  #meeting_end_time,
  #go_live_date,
  #archive_on_common_inactivity_threshold,
  #drop_link_expiry_time,
  #maximum_active_leads_threshold,
  #floating_button_left_right_position,
  #low_bandwidth_cobrowsing_threshold,
  #deploy_chatbot_url,
  #cobrowsing_default_password_prefix,
  #font_test_input,
  #inactivity_auto_popup_number,
  #exit-intent-popup-count,
  #auto-archive-lead-timer-input,
  #no_agent_connect_timer_reset_count,
  #unattended-lead-archive-timer-input
  {
    width: 100%!important;
  }
  #reconnecting_window_timer_input_field
  {
    width: 100%!important;
  }

  th {
    height: initial!important;
    min-height: 64px!important;
  }

  #cobrowse_logo_upload_button {
    width: 100%;
  }

  .tr-flex-sm:not(.easyassist_hidden_div) {
    display: flex!important;
    flex-direction: column;
    padding-left: 0!important;
  }

  #pills-integration .card-body {
    padding: 10px!important;
  }

  .btn-icon-split {
    width: 100%!important;
    text-align: center;
  }

  .btn-icon-split .text {
    padding: 0.375em 2.8em!important;
  }

  .mb-sm {
    margin-bottom: 1em;
  }

  #cobrowse_logo_input {
    padding-left: 11px!important
  }

  #cobrowse_logo_upload_modal .modal-footer button:first-child {
    order: 1;
  }
  #cobrowse_logo_upload_modal .modal-footer button:last-child {
    order: 3;
  }

  button.btn {
    margin-left: 0!important;
    margin-right: 0!important;
  }
}

tbody tr:hover  td .edit-delete-btn-class {
    visibility: visible !important;
}

tbody td .edit-delete-btn-class svg:hover {
    transform: scale(1.2);
}

.switch-off-toggle-info-div,
.otp-send-to-div,
.resend-otp-div {
    font-weight: normal;
    font-size: 14px;
    text-align: center;
    color: #4D4D4D;
}

.otp-send-to-div a,
.resend-otp-div a {
    text-decoration: none;
}

.pii-data-otp {
    display: block;
    width: 100%;
    height: calc(1.5em + .75rem + 2px);
    padding: .375rem .45rem;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #6e707e;
    background-color: #fff;
    background-clip: padding-box;
    border-bottom: 3px solid #C5C5C5;
    border-top: none;
    border-left: none;
    border-right: none;
    margin-right: 22px !important;
    outline: none;
    text-align: center;
}

@media screen and (max-width: 768px) {
    .direction-sm {
        flex-direction: column;
    }
    .direction-sm input {
        width: 100% !important;
    }
    .direction-sm th {
        height: 40px !important;
    }
    .px-mx-sm {
        padding: 0px !important;
        margin: 0px !important;
    }
    .pii-data-otp {
        margin: 10px 5px !important;
        text-align: center !important;
        padding: 0px !important;
    }
    .padding-sm {
        margin-left: 2.5rem !important;
    }
}

.form-control:disabled, .form-control[readonly] {
    color: #6e707e !important;
    -webkit-text-fill-color: #6e707e;
    opacity: 1;
}

.change-password-option {
    justify-content: flex-end;
}

.change-password-btn {
    border: none !important;
    outline: none !important;
    background: transparent !important;
    padding-right: 0px !important;
    width: 165px !important;
    {% if access_token_obj.get_cobrowsing_console_theme_color != None %}
    color: {{access_token_obj.get_cobrowsing_console_theme_color.hex}} !important;
    {% else %}
    color: #0254D7 !important;
    {% endif %}
    text-align: right !important;
}

#change-password-div {
    /* margin-top: -15px !important; */
    margin-bottom: 15px !important;
}

.tag-list-input-element {
    padding: 2px 8px;
    background: #FFFFFF;
    border: 1px solid #540D29!important;
    box-sizing: border-box;
    border-radius: 8px;
    outline: none!important;
    box-shadow: none!important;
    max-width: 150px;
    margin-right: 0.5em;
}

.tag-list-input-element:focus {
  border: 1px solid #540D29!important;
  box-shadow: none!important;
}

.modal-dragable-output-item {
    display: flex;
    height: 48px;
    border: 1px solid #F8F8F8;
    border-radius: 8px;
    border-radius: 5px;
    margin-bottom: 16px;
    align-items: center;
    justify-content: space-between;
}
.modal-dragable-output-item input{
    width: 90%;
    outline: none;
    border: none;
}
.modal-dragable-output-item input:focus{
    box-shadow: none !important;
}
#subRemarkModal .sub-remark-delete-icon{
    cursor: pointer;
}
#subremark-input-field {
  margin-bottom: 16px;
  border: 1px solid #C9C9C9;
  border-radius: 4px;
  width: 100%;
  outline: none;
  padding:10px;
}
.table-heading-row>tr>th{
    height:0 !important;
}

.edit-icon{
    visibility: hidden;
    cursor: pointer;
}

tbody tr:hover  td .edit-btn-class {
    visibility: visible !important;

}

/* tbody td .edit-btn-class svg:hover {
    transform: scale(1.2);
} */

#edit_work_timing .modal-content-custom{
    background: #FFFFFF;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.15) !important;
    border-radius: 14px !important;
}
#edit_work_timing .modal-body .row h6{
    font-size: 14px !important;
    color: #2d2d2d;
}
#edit_work_timing .modal-body .row .custom-input{
    padding: 0.375rem 0.75rem;
    font-size: 18px;
    font-weight: 400;
    line-height: 1.5;
    color: #2d2d2d;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #d1d3e2;
    border-radius: 0.35rem;
}



.modal-body .row .form-control .edit-work-time-dropdown{
    display: block;
    width: 100%;
    height: calc(1.5em + 0.75rem + 2px);
    /* padding: 0.375rem 0.75rem; */
    font-weight: 400;
    line-height: 1.5;
    color: #2D2D2D;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #d1d3e2;
    border-radius: 0.35rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

.custom-form-control{
    display: block;
    width: 100%;
    height: calc(1.5em + 0.75rem + 2px);
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #6e707e;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #d1d3e2;
    border-radius: 0.35rem;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url(/static/EasyAssistApp/img/drop-arrow.svg);
    background-size: 20px;
    background-repeat: no-repeat;
    background-position-x: 98%;
    background-position-y: 10px;
    font-size: 18px;
    outline: none;
}

.modal-footer .btn-custom{
    padding: 6px 32px;
}

.modal-footer .btn-secondary:hover{
    color: #848682 !important;
    background: #ffffff !important;
    transform: none !important;
    box-shadow: none !important;
}

#cancel_edit_timing:hover{
    color: #848682 !important;
    background: #ffffff !important;
    transform: none !important;
    box-shadow: none !important;
}

/* #edit_work_timing #select-work-timing{
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url(./arrow.svg);
    background-repeat: no-repeat;
    background-position-x: 95%;
    background-position-y: 17px;
    font-size: 18px;
} */


#add_holiday_modal .modal-body .row .custom-input{
    padding: 0.375rem 0.75rem;
    font-size: 18px;
    font-weight: 400;
    line-height: 1.5;
    color: #2d2d2d;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #d1d3e2;
    border-radius: 0.35rem;
}

#add_holiday_modal .modal-body .row h6{
    font-size: 14px !important;
    color: #2d2d2d;
}

#add_holiday_modal .modal-content-custom{
    background: #FFFFFF;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.15) !important;
    border-radius: 14px !important;
}

#add_holiday_modal .modal-footer .btn-custom{
    padding: 6px 32px;
}

#add_holiday_modal .modal-footer .btn-secondary:hover{
    color: #848682 !important;
    background: #ffffff !important;
    transform: none !important;
    box-shadow: none !important;
}

#add_work_timing_modal .modal-content-custom{
    background: #FFFFFF;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.15) !important;
    border-radius: 14px !important;
}

#add_work_timing_modal .modal-body .row h6{
    font-size: 14px !important;
    color: #2d2d2d;
}

#add_work_timing_modal .modal-body .row .custom-input{
    padding: 0.375rem 0.75rem;
    font-size: 18px;
    font-weight: 400;
    line-height: 1.5;
    color: #2D2D2D;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #d1d3e2;
    border-radius: 0.35rem;
}

#add_work_timing_modal .modal-body .row .form-control{
    display: block;
    width: 100%;
    height: calc(1.5em + 0.75rem + 2px);
    /* padding: 0.375rem 0.75rem; */
    font-weight: 400;
    line-height: 1.5;
    color: #2D2D2D;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #d1d3e2;
    border-radius: 0.35rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url(/static/EasyAssistApp/img/drop-arrow.svg);
    background-size: 20px;
    background-repeat: no-repeat;
    background-position-x: 97%;
    background-position-y: 10px;
    font-size: 18px;
}

#add_work_timing_modal .modal-body #select-monthly-option .form-control{
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url(/static/EasyAssistApp/img/drop-arrow.svg);
    background-size: 20px;
    background-repeat: no-repeat;
    background-position-x: 94%;
    background-position-y: 10px;
    font-size: 18px;
}


#add_work_timing_modal .select-day-div>label{
    margin: 7px 5px;
}

#add_work_timing_modal .modal-footer .btn-custom{
    padding: 6px 32px;
}

#add_work_timing_modal .modal-footer .btn-secondary:hover{
    color: #848682 !important;
    background: #ffffff !important;
    transform: none !important;
    box-shadow: none !important;
}

#apply_filter_modal .custom-select-options{
    font-family: "Silka", Sans-Serif;
    background: #FFFFFF;
    border: 1px solid #E6E6E6;
    border-radius: 10px;
    padding: 9px 20px!important;
    font-size: 14px;
    font-weight: 500;
    order: 0!important;
    box-sizing: border-box!important;
    cursor: pointer;
    color: #2D2D2D;
}

.custom-textarea{
    max-height: 100px !important; 
    max-width: 100% !important;
    outline: none;
}

#edit_calendar_event{
    padding: 6px 32px;
}

::-webkit-input-placeholder  { /* Chrome/Opera/Safari */
    font-size: 14px;
}
::-moz-placeholder { /* Firefox 19+ */
    font-size: 14px;
}

/* select all checkbox class------ */
.individual:checked+.label-for-check {
    color: #0254D7;
}
.selectall:checked+.label-for-check {
    color: #0254D7;
}


.select-day-div .single-day{
    display: flex;
    align-items: center;
    margin: 5px 14px;
    text-align: center;
}
.select-day-div .single-day label{
    margin-bottom: 0 !important;
    margin-left: 9px !important;
    font-size: 14px !important;
}

#table-calendar-details-search .dataTables_filter, .dataTables_info { 
  display: none; 
}

.custom-select-dropdown-navbar-position {
  -webkit-appearance: none;
  -moz-appearance: none;
  background: transparent;
  appearance: none;
  background-image: url("/static/EasyAssistApp/icons/navbar-position-dropdown.svg");
  background-repeat: no-repeat;
  background-position-x: 92%;
  background-position-y: 13px;
  font-weight: normal;
  font-size: 16px;
  color: #909090;
}

</style>
{% if request.user.enable_s3_bucket %}
<script src="https://static.allincall.in/static/EasyAssistApp/js/ace.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="https://static.allincall.in/static/EasyAssistApp/js/jscolor.min.js"></script>
{% else %}
<script src="{% static 'EasyAssistApp/js/ace.js' %}" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="{% static 'EasyAssistApp/js/jscolor.min.js' %}"></script>
{% endif %}

<!-- Begin Page Content -->
<div class="container-fluid">
<div class="row">
<div class="col-md-12 mb">
  <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-home" aria-selected="true">Profile</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-integration" role="tab" aria-controls="pills-profile" aria-selected="false">Integration</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-options-tab" data-toggle="pill" href="#pills-options-settings" role="tab" aria-controls="pills-contact" aria-selected="false">Options</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-settings-tab" data-toggle="pill" href="#pills-advanced-settings" role="tab" aria-controls="pills-contact" aria-selected="false">Advanced Settings</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-email-analytics-tab" href="/easy-assist/sales-ai/email-analytics-settings/" aria-controls="pills-contact" aria-selected="false">Email Settings</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-extension-tab" data-toggle="pill" href="#pills-extension-settings" role="tab" aria-controls="pills-contact" aria-selected="false">Chrome Extension</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-crm-integration-tab" href="/easy-assist/sales-ai/advanced-settings/crm/" aria-controls="pills-contact" aria-selected="false">API Documents</a>
    </li>
    {% if cobrowse_agent.is_cognoai_user or cobrowse_agent.user.is_staff %}
    <li class="nav-item">
        <a class="nav-link" id="pills-sandbox-user-creds-tab" href="/easy-assist/sandbox-user/creds/" aria-controls="pills-contact" aria-selected="false">Sandbox Credentials</a>
    </li>
    {% endif %}
  </ul>
  <div class="tab-content" id="pills-tabContent">
    <!-- PROFILE TAB -->
    <div class="tab-pane fade show active" id="pills-profile" role="tabpanel" aria-labelledby="pills-home-tab">
      <div class="row" style="flex-direction: column;">
        <div class="col-md-6">
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="inputGroup-sizing-sm">Email</span>
            </div>
            <input type="text" style="background-color: white !important;" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" value="{{ cobrowse_agent.user.email }}" autocomplete="off" disabled>
          </div>
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="inputGroup-sizing-sm">Name</span>
            </div>
            <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" id="admin-name"
              value="{{ cobrowse_agent.user.first_name }}" autocomplete="off">
              <div id="name-error-message" class="invalid-feedback">
                Maximum Character Limit reached
              </div>
          </div>
          <div class="input-group input-group-sm change-password-option">
            <button type="button" class="change-password-btn" id="change-password-button" onclick="show_change_password()">Change Password?</button>
          </div>
        </div>
        <div class="col-md-6" style="display:none;" id="change-password-div">
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="inputGroup-sizing-sm">Old Password</span>
            </div>
            <input type="password" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" id="old-password" value="" autocomplete="new-password">
          </div>
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="inputGroup-sizing-sm">New Password</span>
            </div>
            <input type="password" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" id="new-password"
              value="">
          </div>
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-sm">Confirm Password</span>
            </div>
            <input type="password" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" id="confirm-password" value="">
          </div>
        </div>
        <div class="col-md-6">
          <div class="input-group input-group-sm">
            <p style="color:green;" id="save-details-error"></p>
          </div>
        </div>
        <div class="col-md-12" id="save-btn-admin">
          <button type="button" class="btn btn-success admin-setting-btn" style="width: 100px;" onclick="save_admin_details(this)">Save</button>
          <button type="button" class="btn btn-outline-secondary admin-setting-btn" style="width: 100px; margin-left: 15px; visibility: hidden;" onclick="hide_change_password()" id="change_password_cancel_btn">Cancel</button>
        </div>
      </div>
    </div>
    <!-- INTEGRATION TAB -->
    <div class="tab-pane fade" id="pills-integration" role="tabpanel" aria-labelledby="pills-integration-tab">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-12">
              <div id="editor-code" style="overflow: hidden;"></div>
            </div>
          </div>
        </div>
      </div>
      <br><a href="javascript:void(0)" class="btn btn-light btn-icon-split" onclick="copy_script()" style="display: inline-flex;">
      <span class="icon text-gray-600">
      <i class="fas fa-arrow-right"></i>
      </span>
      <span class="text">Copy script</span><br>
      </a><br><br>
      <div class="card">
        <div class="card-body">
          <div id="editor-code-cjs" style="overflow: hidden;"></div>
        </div>
      </div>
      <br><a href="javascript:void(0)" class="btn btn-light btn-icon-split" id="copy-cjs-script"onclick="copy_cjs_script()"  style="display: inline-flex;">
      <span class="icon text-gray-600">
      <i class="fas fa-arrow-right"></i>
      </span>
      <span class="text">Copy cjs script</span>
      </a>
    </div>
    <!-- OPTIONS TAB -->
    <div class="tab-pane fade" id="pills-options-settings" role="tabpanel" aria-labelledby="pills-options-settings-tab">
      <div class="row">
        <div class="col-md-12">
          <div class="card shadow mb-4">
            <div class="card-header py-3" style="padding: 0.5em 1.25em 0em 1.25em !important;">
              <div class="row">
                  <div class="col-md-12 col-sm-12" id="pills-options">
                    <ul class="nav nav-tabs nav-fill" id="pills-options-tab" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link active" id="pills-cobrowse-general-tab" data-toggle="pill" href="#pills-cobrowse-general-options" role="tab" aria-controls="pills-options-cobrowse-general" aria-selected="true"> General </a>
                      </li>
                      {% if access_token_obj.allow_video_meeting_only == False %}
                      <li class="nav-item">
                        <a class="nav-link" id="pills-cobrowse-tab" data-toggle="pill" href="#pills-cobrowse-options" role="tab" aria-controls="pills-options-cobrowse" aria-selected="false">Cobrowse</a>
                      </li>
                      {% endif %}
                      <li class="nav-item">
                        <a class="nav-link" id="pills-cognomeet-tab" data-toggle="pill" href="#pills-cognomeet-options" role="tab" aria-controls="pills-options-cognomeet" aria-selected="false">Video Call</a>
                      </li>
                      {% if access_token_obj.enable_inbound == True %}
                      <li class="nav-item">
                        <a class="nav-link" id="pills-calendar-tab" data-toggle="pill" href="#pills-calendar-options" role="tab" aria-controls="pills-options-calendar" aria-selected="false">Calendar</a>
                      </li>
                      {% endif %}
                    </ul>
                  </div>
              </div>
            </div>
            <div class="tab-content" id="pills-options-tabContent">

              <!--  Cobrowse Settings -->

              <div class="tab-pane fade" id="pills-cobrowse-options" role="tabpanel" aria-labelledby="pills-cobrowse-tab">
                <div class="card shadow mb-4">
                <div class="card-body">
                <div class="card">
                  <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                    <div class="row">
                      <div class="col-mb-5" style="margin-top: 5px;">
                        <h6 class="ml-3 text-primary card-heading-text">Agent Settings</h6>
                      </div>
                    </div>
                  </div>
                  <div class="card-body table-responsive">
                  <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                    <tbody>
                      <tr>
                        <th scope="row" class="card-subheader-heading-text">Navigation Bar</th>
                        <td style="vertical-align: inherit;">
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Enable screen capture</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_screenshot_agent %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_screenshot_agent" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_screenshot_agent">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Enable Invite Agent</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_invite_agent_in_cobrowsing %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_invite_agent_in_cobrowsing" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_invite_agent_in_cobrowsing">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Enable 'Edit access'</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_edit_access %}
                          <label class="easyassist-option-switch">
                            <input type="checkbox" id="enable_edit_access" checked>
                            <span class="easyassist-option-switch-slider round"></span>
                          </label>
                          {% else %}
                          <label class="easyassist-option-switch">
                            <input type="checkbox" id="enable_edit_access">
                            <span class="easyassist-option-switch-slider round"></span>
                          </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">
                          Enable video calling while cobrowsing 
                          <span data-toggle="tooltip" data-placement="bottom" title="This will allow agents to start video call in a new tab."><i class="fas fa-info-circle"></i></span>
                        </th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.allow_cobrowsing_meeting %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="allow_video_calling_cobrowsing" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="allow_video_calling_cobrowsing">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr id="allow_customer_initiate_video_call">
                        <th scope="row">
                          Allow end customer to initiate Video Call
                        </th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.customer_initiate_video_call %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="customer_initiate_video_call" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="customer_initiate_video_call">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">
                          Enable Voice Call
                          <span data-toggle="tooltip" data-placement="bottom" title="Agent and Customer can connect over voice call."><i class="fas fa-info-circle"></i></span>
                        </th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_voip_calling %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_voip_calling" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_voip_calling">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr id="allow_customer_initiate_voice_call">
                        <th scope="row">
                          Allow end customer to initiate Voice Call
                        </th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.customer_initiate_voice_call %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="customer_initiate_voice_call" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="customer_initiate_voice_call">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      {% if access_token_obj.allow_agent_to_customer_cobrowsing %}

                      <tr id="auto_voip_calling_first_time_div" style="filter: blur(1px);">
                        <th scope="row">Initiate a call when agent joins the session</th>
                        <td style="vertical-align: inherit;">
                          <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                            <input type="checkbox" id="enable_auto_voip_calling_for_first_time" disabled>
                            <span class="easyassist-option-switch-slider round"></span>
                          </label>
                        </td>
                      </tr>

                      {% else %}

                      <tr id="auto_voip_calling_first_time_div">
                        <th scope="row">Initiate a call when agent joins the session</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_auto_voip_calling_for_first_time %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_auto_voip_calling_for_first_time" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_auto_voip_calling_for_first_time">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>

                      {% endif %}

                      <tr id="voip_calling_message_div" class="tr-flex-sm">
                        <th scope="row">Voice Call message 
                          <span data-toggle="tooltip" data-placement="bottom" title="This message is shown to the customer when agent requests for a voice call."><i class="fas fa-info-circle"></i></span>
                        </th>
                        <td style="vertical-align: inherit;">
                          <textarea class="form-control" style="height:auto;" maxlength="1024" id="voip_calling_text">{{ access_token_obj.voip_calling_message }}</textarea>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">
                          Enable video calling as a PIP
                          <span data-toggle="tooltip" data-placement="bottom" title="PIP minimize the video into a small player that you can move around."><i class="fas fa-info-circle"></i></span>
                        </th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_voip_with_video_calling %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_voip_with_video_calling" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_voip_with_video_calling">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr id="allow_customer_initiate_video_call_as_pip">
                        <th scope="row">
                          Allow end customer to initiate Video Call as PIP
                        </th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.customer_initiate_video_call_as_pip %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="customer_initiate_video_call_as_pip" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="customer_initiate_video_call_as_pip">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>

                      {% if access_token_obj.allow_agent_to_customer_cobrowsing %}

                      <tr id="auto_voip_with_video_calling_first_time_div" style="filter: blur(1px);">
                        <th scope="row">Initiate a call when agent joins the session</th>
                        <td style="vertical-align: inherit;">

                            <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                                  <input type="checkbox" id="enable_auto_voip_with_video_calling_for_first_time" disabled>
                                  <span class="easyassist-option-switch-slider round"></span>
                              </label>
                        </td>
                      </tr>

                      {% else %}

                      <tr id="auto_voip_with_video_calling_first_time_div">
                        <th scope="row">Initiate a call when agent joins the session</th>
                        <td style="vertical-align: inherit;">
                            {% if access_token_obj.enable_auto_voip_with_video_calling_for_first_time %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_auto_voip_with_video_calling_for_first_time" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_auto_voip_with_video_calling_for_first_time">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% endif %}
                        </td>
                      </tr>
                      {% endif %}


                      <tr class="tr-flex-sm" id="voip_with_video_calling_message_div">
                        <th scope="row">Video calling as a PIP message 
                          <span data-toggle="tooltip" data-placement="bottom" title="This message is shown to the customer when agent requests for a video call"><i class="fas fa-info-circle"></i></span>
                        </th>
                        <td style="vertical-align: inherit;">
                          <textarea class="form-control" style="height:auto;" maxlength="1024" id="voip_with_video_calling_text">{{ access_token_obj.voip_with_video_calling_message }}</textarea>
                        </td>
                      </tr>

                      {% if access_token_obj.allow_agent_to_customer_cobrowsing %}

                      <tr style="filter: blur(1px);">
                        <th scope="row">Enable Screen Recording</th>
                        <td style="vertical-align: inherit;">
                            <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                              <input type="checkbox" id="allow_screen_recording" disabled>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          
                        </td>
                      </tr>
                      <tr id="screen_recording_expire_div" class="tr-flex-sm">
                            <th scope="row">Screen recording expires(days)</th>
                            <td style="vertical-align: inherit;">
                                <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.recording_expires_in_days }}" id="recording_expires_in_days" min="0" placeholder="Enter Days" class="positive_numeric">
                            </td>
                        </tr>

                      {% else %}

                        <tr>
                        <th scope="row">Enable Screen Recording</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.allow_screen_recording %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="allow_screen_recording" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                          <label class="easyassist-option-switch">
                              <input type="checkbox" id="allow_screen_recording">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                        <tr id="screen_recording_expire_div" class="tr-flex-sm">
                            <th scope="row">Screen recording expires(days)</th>
                            <td style="vertical-align: inherit;">
                                <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.recording_expires_in_days }}" id="recording_expires_in_days" min="0" placeholder="Enter Days" class="positive_numeric">
                            </td>
                        </tr>

                      {% endif %}
                      </tbody>
                  </table>
                </div>
              </div>
              </div>
              <div class="card-body">
                <div class="card mb-4">
                  <div class="card-body table-responsive">
                  <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                    <tbody>
                      <tr>
                        <th scope="row" class="card-subheader-heading-text">General Settings</th>
                        <td style="vertical-align: inherit;">
                        </td>
                      </tr>
                      <tr class="tr-flex-sm">
                        <th scope="row">Text to be shown on agent feedback modal</th>
                        <td style="vertical-align: inherit;">
                          <textarea class="form-control" style="height:auto;" maxlength="1024" id="lead_conversion_checkbox_text">{{ access_token_obj.lead_conversion_checkbox_text }}</textarea>
                        </td>
                      </tr>
                       <tr>
                        <th scope="row">Enable Predefined Remarks with dropdown</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_predefined_remarks %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_predefined_remarks" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_predefined_remarks">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr id="row-enable_predefined_sub_remarks_with_dropdown">
                        <th scope="row">Enable Predefined Sub-Remarks with dropdown</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_predefined_subremarks %}
                          <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_predefined_subremarks" checked>
                              <span class="easyassist-option-switch-slider round" onclick="change_predefined_remarks_list_with_dropdown_div_text(this)"></span>
                          </label>
                          {% else %}
                          <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_predefined_subremarks">
                              <span class="easyassist-option-switch-slider round" onclick="change_predefined_remarks_list_with_dropdown_div_text(this)"></span>
                          </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr id="predefined_remarks_list_div" class="tr-flex-sm">
                        <th scope="row">
                          Add Remarks to be selected by Agent from dropdown<br>(Eg. Lead Closed, Internet Issue, Others).
                          {% if access_token_obj.enable_predefined_subremarks %}
                            <span id="map-sub-remarks-text-for-dropdown" style="display: inline-block;">
                              Map Sub-Remarks by clicking on Remarks added
                            </span>

                            <span data-toggle="tooltip" data-placement="bottom" id="predefined_remarks_list_with_dropdown_div_tooltip" data-original-title='Please hit "Enter" to add the remark. You can add multiple sub-remarks by clicking on the remarks added.(Eg: Remarks- Lead Drop, Sub remarks - No Payment, Out of Coverage Area).'>
                              <i class="fas fa-info-circle"></i>
                            </span>
                          {% else %}
                            <span id="map-sub-remarks-text-for-dropdown" style="display: none;">
                              Map Sub-Remarks by clicking on Remarks added
                            </span>
                            <span data-toggle="tooltip" data-placement="bottom" id="predefined_remarks_list_with_dropdown_div_tooltip" data-original-title="Press enter to save the remark. You can add multiple remarks.">
                              <i class="fas fa-info-circle"></i>
                            </span>
                          {% endif %}
                        </th>
                        <td style="vertical-align: inherit;">
                          <div >
                            <p id="predefined-remarks-list" style="display: none!important;"></p>
                            <ul id="predefined-remarks-tag-list" style="padding: 0;position: relative;display: flex;flex-wrap: wrap;gap: 0.5em;"></ul>
                            <input type="text" maxLength ="25"id="input-predefined-remark" placeholder="Add Predefined remark">
                            <div style="margin-top: 10px;">
                              <label>
                                <span style="margin-right: 15px;">Optional</span>
                                {% if access_token_obj.predefined_remarks_optional %}
                                <input type="checkbox" name="optional" id="input-predefined-remark-optional-checkbox" checked>
                                {% else %}
                                <input type="checkbox" name="optional" id="input-predefined-remark-optional-checkbox">
                                {% endif %}
                              </label>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Enable Predefined Remarks with buttons</th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_predefined_remarks_with_buttons %}
                          <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_predefined_remarks_with_buttons" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                          </label>
                          {% else %}
                          <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_predefined_remarks_with_buttons">
                              <span class="easyassist-option-switch-slider round"></span>
                          </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr id="predefined_remarks_list_with_buttons_div" class="tr-flex-sm">
                        <th scope="row">
                          Add Remarks to be selected by Agent from buttons shown<br>(Eg. Lead Closed, Internet Issue, Others)
                          <span data-toggle="tooltip" data-placement="bottom" title="Press enter to save the remark. You can add multiple remarks."><i class="fas fa-info-circle"></i></span>
                        </th>
                        <td style="vertical-align: inherit;">
                          <div>
                            <p id="predefined_remarks_with_buttons" style="display: none!important;"></p>
                            <ul id="predefined-remarks-tag-with-buttons-list" style="padding: 0; max-height: max-content; display: flex; flex-wrap: wrap;"></ul>
                            <input type="text" maxLength ="25" id="input-predefined-remark-with-buttons" placeholder="Add Predefined remark">
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">
                          Enable Agent Connect Message
                          <span data-toggle="tooltip" data-placement="bottom" title="This message will be shown in the customer's livechat as soon as the session starts."><i class="fas fa-info-circle"></i></span></th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_agent_connect_message %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_agent_connect_message" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_agent_connect_message">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                        <tr id="agent_connect_message_div" class="tr-flex-sm">
                          <th scope="row"> Agent Connect Message
                            <span data-toggle="tooltip" data-placement="bottom" title="This message will pop up on customer's chat as soon as agent joins the session."><i class="fas fa-info-circle"></i></span>
                          </th>
                          <td style="vertical-align: inherit;">
                            <textarea class="form-control" style="height:10em;" maxlength="1024" id="agent_connect_message">{{ access_token_obj.agent_connect_message }}</textarea>
                          </td>
                        </tr>
                        <tr>
                        <th scope="row">
                          Enable Smart Agent Assignment 
                          <span data-toggle="tooltip" data-placement="bottom" title="If end user disconnects, they will be connected back to the same agent within the reconnecting window, based on their availability."><i class="fas fa-info-circle"></i></span></th>
                        <td style="vertical-align: inherit;">
                          {% if access_token_obj.enable_smart_agent_assignment %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_smart_agent_assignment" checked>
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% else %}
                            <label class="easyassist-option-switch">
                              <input type="checkbox" id="enable_smart_agent_assignment">
                              <span class="easyassist-option-switch-slider round"></span>
                            </label>
                          {% endif %}
                        </td>
                      </tr>
                      <tr id="reconnecting_window_timer_section" class="tr-flex-sm">
                            <th scope="row">Reconnecting Window Timer(in min.)
                              <span data-toggle="tooltip" data-placement="bottom" title="" data-original-title="The time window within which user will be connected back to the last connected agent."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              <input type="number" aria-label="Checkbox for following text input" value={{ access_token_obj.smart_agent_assignment_reconnecting_window }} id="reconnecting_window_timer_input_field" min="0" class="positive_numeric">
                            </td>
                          </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              </div>
            </div>
            <div class="card shadow mb-4">
              <div class="card-body">
                <div class="card mb-4">
                  <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                    <div class="row">
                      <div class="col-mb-5" style="margin-top: 5px;">
                        <h6 class="ml-3 text-primary card-heading-text">Customer Settings</h6>
                      </div>
                    </div>
                  </div>
                  <div class="card-body table-responsive">

                    {% if access_token_obj.allow_agent_to_customer_cobrowsing %}

                    <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                    <tbody>
                      <tr style="filter: blur(1px);">
                          <th scope="row">Enable masked field warning</th>
                          <td style="vertical-align: inherit;">
                              <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                                <input type="checkbox" id="enable_masked_field_warning" disabled>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                          </td>
                      </tr>
                        <tr id="masked_field_warning_div" class="tr-flex-sm" style="filter: blur(1px);">
                          <th scope="row">Masking text shown to customer</th>
                          <td style="vertical-align: inherit;" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                            <textarea class="form-control" disavled style="height:10em;" maxlength="1024" id="masked_field_warning_text" placeholder="Add Masked Field Warning">{{ access_token_obj.masked_field_warning_text }}</textarea>
                          </td>
                        </tr>
                          <tr style="filter: blur(1px);">
                            <th scope="row">Show verification code popup</th>
                            <td style="vertical-align: inherit;">
                              <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                                <input type="checkbox" id="show_verification_code_modal" disabled>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            </td>
                          </tr>
                          <tr id="ask-for-suport-code-div" style="filter: blur(1px);">
                            <th scope="row">Ask support code to the customer</th>
                            <td style="vertical-align: inherit;">
                              <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                                <input type="checkbox" id="enable_verification_code_popup" disabled>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            </td>
                          </tr>
                          <tr id="customer-conset-modal-div" class="tr-flex-sm" style="filter: blur(1px);">
                            <th scope="row">Message to be shown on customer consent modal</th>
                            <td style="vertical-align: inherit;" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                              <textarea disabled class="form-control" style="height:10em;" maxlength="1024" id="assistant_message">{{ access_token_obj.assist_message }}</textarea>
                            </td>
                          </tr>
                      </tbody>
                  </table>




                    {% else %}

                      <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                    <tbody>
                      <tr>
                          <th scope="row">Enable masked field warning</th>
                          <td style="vertical-align: inherit;">
                            {% if access_token_obj.enable_masked_field_warning %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_masked_field_warning" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_masked_field_warning">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% endif %}
                          </td>
                      </tr>
                        <tr id="masked_field_warning_div" class="tr-flex-sm">
                          <th scope="row">Masking text shown to customer</th>
                          <td style="vertical-align: inherit;">
                            <textarea class="form-control" style="height:10em;" maxlength="1024" id="masked_field_warning_text" placeholder="Add Masked Field Warning">{{ access_token_obj.masked_field_warning_text }}</textarea>
                          </td>
                        </tr>
                          <tr>
                            <th scope="row">Show verification code popup</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.show_verification_code_modal %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="show_verification_code_modal" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="show_verification_code_modal">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="ask-for-suport-code-div">
                            <th scope="row">Ask support code to the customer</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.enable_verification_code_popup %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_verification_code_popup" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_verification_code_popup">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="customer-conset-modal-div" class="tr-flex-sm">
                            <th scope="row">Message to be shown on customer consent modal</th>
                            <td style="vertical-align: inherit;">
                              <textarea class="form-control" style="height:10em;" maxlength="1024" id="assistant_message">{{ access_token_obj.assist_message }}</textarea>
                            </td>
                          </tr>
                      </tbody>
                  </table>

                    {% endif %}
                </div>
              </div>
              </div>
            </div>
            <div class="card shadow mb-4">
              <div class="card-body mb-4">
                <div class="card">
                  <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                    <div class="row">
                      <div class="col-mb-5" style="margin-top: 5px;">
                        <h6 class="ml-3 text-primary card-heading-text">Admin Settings</h6>
                      </div>
                    </div>
                  </div>
                  <div class="card-body table-responsive">
                  <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                    <tbody>
                      <tr>
                        <th scope="row" class="card-subheader-heading-text">General</th>
                        <td style="vertical-align: inherit;">
                        </td>
                      </tr>

                      {% if access_token_obj.allow_agent_to_customer_cobrowsing %}

                      <tr class="tr-flex-sm" style="filter: blur(1px);">
                        <th scope="row">Select masking type for sensitive data fields</th>
                        <td>
                          <select class="custom-select" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing" id="input-masking-type" style="width: 50%">
                            {% if access_token_obj.masking_type == "no-masking" %}
                            <option selected="" value="no-masking" disabled>No Masking</option>
                            {% else %}
                            <option value="no-masking" disabled>No Masking</option>
                            {% endif %}
                            {% if access_token_obj.masking_type == "partial-masking" %}
                            <option selected="" value="partial-masking" disabled>Partial Masking</option>
                            {% else %}
                            <option value="partial-masking" disabled>Partial Masking</option>
                            {% endif %}
                            {% if access_token_obj.masking_type == "full-masking" %}
                            <option selected="" value="full-masking" disabled>Full Masking</option>
                            {% else %}
                            <option value="full-masking" disabled>Full Masking</option>
                            {% endif %}
                          </select>
                        </td>
                      </tr>

                      <tr style="filter: blur(1px);">
                          <th scope="row">Enable cross domain cobrowsing
                            <span data-toggle="tooltip" data-placement="bottom" title="If this is enabled, customers will be able to share their screen. This will allow Agents to view the customer's activity even on domains where cobrowsing JS is not embedded"><i class="fas fa-info-circle"></i></span>
                          </th>
                          <td style="vertical-align: inherit;">
                              <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                                <input type="checkbox" id="allow_screen_sharing_cobrowse" disabled>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                          </td>
                        </tr>

                      {% else %}
                        <tr class="tr-flex-sm">
                        <th scope="row">Select masking type for sensitive data fields</th>
                        <td>
                          <select class="custom-select" id="input-masking-type" style="width: 50%">
                            {% if access_token_obj.masking_type == "no-masking" %}
                            <option selected="" value="no-masking">No Masking</option>
                            {% else %}
                            <option value="no-masking">No Masking</option>
                            {% endif %}
                            {% if access_token_obj.masking_type == "partial-masking" %}
                            <option selected="" value="partial-masking">Partial Masking</option>
                            {% else %}
                            <option value="partial-masking">Partial Masking</option>
                            {% endif %}
                            {% if access_token_obj.masking_type == "full-masking" %}
                            <option selected="" value="full-masking">Full Masking</option>
                            {% else %}
                            <option value="full-masking">Full Masking</option>
                            {% endif %}
                          </select>
                        </td>
                      </tr>

                      <tr>
                          <th scope="row">Enable cross domain cobrowsing
                            <span data-toggle="tooltip" data-placement="bottom" title="If this is enabled, customers will be able to share their screen. This will allow Agents to view the customer's activity even on domains where cobrowsing JS is not embedded"><i class="fas fa-info-circle"></i></span>
                          </th>
                          <td style="vertical-align: inherit;">
                            {% if access_token_obj.allow_screen_sharing_cobrowse %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="allow_screen_sharing_cobrowse" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="allow_screen_sharing_cobrowse">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% endif %}
                          </td>
                        </tr>

                      {% endif %}
                      
                        <tr>
                          <th scope="row">
                            Enable low bandwidth cobrowsing
                            <span data-toggle="tooltip" data-placement="bottom" title="Website will load in tabular format if the internet speed falls below the required speed">
                              <i class="fas fa-info-circle"></i>
                            </span>
                          </th>
                          <td style="vertical-align: inherit;">
                            {% if access_token_obj.enable_low_bandwidth_cobrowsing %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_low_bandwidth_cobrowsing" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_low_bandwidth_cobrowsing">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% endif %}
                          </td>
                        </tr>

                        {% if access_token_obj.enable_low_bandwidth_cobrowsing %}
                        <tr id="enable_manual_switching_div">
                          <th scope="row">
                            Enable manual switching
                            <span data-toggle="tooltip" data-placement="bottom" title="Enabling this field will show an icon to switch between Lite mode and Normal mode">
                              <i class="fas fa-info-circle"></i>
                            </span>
                          </th>
                          <td style="vertical-align: inherit;">
                            {% if access_token_obj.enable_manual_switching %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_manual_switching" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_manual_switching">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% endif %}
                          </td>
                        </tr>
                        <tr id="low_bandwidth_cobrowsing_threshold_div" class="tr-flex-sm">
                          <th scope="row">Low bandwidth network limit in kbps
                          </th>
                          <td style="vertical-align: inherit;">
                            <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.low_bandwidth_cobrowsing_threshold }}" id="low_bandwidth_cobrowsing_threshold" min="0" class="positive_numeric">
                          </td>
                        </tr>
                        {% else %}
                        <tr id="enable_manual_switching_div" style="display: none;">
                          <th scope="row">
                            Enable manual switching
                            <span data-toggle="tooltip" data-placement="bottom" title="Enabling this field will show an icon to switch between Lite mode and Normal mode">
                              <i class="fas fa-info-circle"></i>
                            </span>
                          </th>
                          <td style="vertical-align: inherit;">
                            {% if access_token_obj.enable_manual_switching %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_manual_switching" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_manual_switching">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                            {% endif %}
                          </td>
                        </tr>
                        <tr id="low_bandwidth_cobrowsing_threshold_div" class="tr-flex-sm" style="display: none!important;">
                          <th scope="row">Low bandwidth network limit in kbps
                          </th>
                          <td style="vertical-align: inherit;">
                            <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.low_bandwidth_cobrowsing_threshold }}" id="low_bandwidth_cobrowsing_threshold" min="0" class="positive_numeric">
                          </td>
                        </tr>
                        {% endif %}

                        <tr id="archive_on_common_inactivity_timer_section" class="tr-flex-sm">
                          <th scope="row">Session Inactivity (in min.)
                            <span data-toggle="tooltip" data-placement="bottom" title="Session will be archived if the agent/customer stays inactive in the session or if the customer closes the webpage after requesting and does not return within the specified time."><i class="fas fa-info-circle"></i></span>
                          </th>
                          <td style="vertical-align: inherit;">
                            <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.archive_on_common_inactivity_threshold }}" id="archive_on_common_inactivity_threshold" min="0" class="positive_numeric">
                          </td>
                        </tr>

                        <tr class="tr-flex-sm">
                          <th scope="row">Generate Drop Link Expiry Time (in min.)
                            <span data-toggle="tooltip" data-placement="bottom" title="Time after which the link will expire."><i class="fas fa-info-circle"></i></span>
                          </th>
                          <td style="vertical-align: inherit;">
                            <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.drop_link_expiry_time }}" id="drop_link_expiry_time" min="0" class="positive_numeric">
                          </td>
                        </tr>

                        <tr class="tr-flex-sm">
                          <th scope="row">URLs where lead is considered as converted <br>(e.g. www.xyz.com/page, www.abc.com/page1/page2)<br><br>Note: URLs will be matched exactly from the beginning</th>
                          <td style="vertical-align: inherit;">
                            <textarea class="form-control" style="height:10em;" id="urls_consider_lead_converted">{{ access_token_obj.urls_consider_lead_converted }}</textarea>
                          </td>
                        </tr>

                        <tr class="tr-flex-sm">
                          <th scope="row">URLs which will be blocked <br>(e.g. www.xyz.com/page, www.abc.com/page1/page2)<br><br>Note: URLs will be matched exactly from the beginning</th>
                          <td style="vertical-align: inherit;">
                            <textarea class="form-control" style="height:10em;" id="restricted_urls">{{ access_token_obj.restricted_urls }}</textarea>
                          </td>
                        </tr>

                    </tbody>
                  </table>
                </div>
              </div>
              </div>
              </div>

              <p id="save-cobrowsing-meta-details-error-cobrowsing"></p>
              <div class="col-md-12" style="padding: 0 1.25em;">
                <button type="button" class="btn btn-success float-right btn-width-100" onclick="chip_predefined_remarks_with_buttons();save_cobrowsing_meta_details_cobrowsing(this)">Save</button>
                <button type="button" class="btn btn-info float-left btn-width-100" data-toggle="modal" data-target="#reset_cobrowsing_meta_details_modal">Reset All</button>
                <br><br>
              </div>

              </div>

              <!--  CognoMeet Settings -->

                <div class="tab-pane fade" id="pills-cognomeet-options" role="tabpanel" aria-labelledby="pills-cognomeet-tab">

                    <!--  CognoMeet Settings Body Start -->

                    <div class="card shadow mb-4">
                    <div class="card-body mb-4">
                    <div class="card">
                      <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                        <div class="row">
                          <div class="col-mb-5" style="margin-top: 5px;">
                            <h6 class="ml-3 text-primary card-heading-text">Agent Settings</h6>
                          </div>
                        </div>
                      </div>
                      <div class="card-body table-responsive">
                      <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                        <tbody>
                          <tr>
                            <th scope="row" class="card-subheader-heading-text">Navigation Bar</th>
                            <td style="vertical-align: inherit;">
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">Enable screen capture</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_capture_screenshots %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_capture_screenshots" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_capture_screenshots">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">Enable Invite Agent</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.enable_invite_agent_in_meeting %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_invite_agent_in_meeting" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_invite_agent_in_meeting">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>

                          {% if access_token_obj.allow_agent_to_customer_cobrowsing %}
                            <tr style="filter: blur(1px);">
                              <th scope="row">Show lobby page in cobrowsing meeting.</th>
                              <td style="vertical-align: inherit;">
                                  <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                                    <input type="checkbox" id="show_cobrowsing_meeting_lobby" disabled>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                              </td>
                            </tr>
                          {% else %}
                            <tr>
                              <th scope="row">Show lobby page in cobrowsing meeting.</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.show_cobrowsing_meeting_lobby %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_cobrowsing_meeting_lobby" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_cobrowsing_meeting_lobby">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                          {% endif %}
                          </tbody>
                      </table>
                    </div>
                  </div>
                  </div>
                </div>
                  <!--  CognoMeet Settings Body END -->

                  <div class="card shadow mb-4">
                  <div class="card-body">
                    <div class="card mb-4">
                      <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                        <div class="row">
                          <div class="col-sm-5" style="margin-top: 5px;">
                            <h6 class="font-weight-bold text-primary">Admin Settings</h6>
                          </div>
                        </div>
                      </div>
                      <div class=" card-body table-responsive">
                      <table class="table table-borderless gy-settings-table">
                        <tbody>

                          {% if access_token_obj.allow_agent_to_customer_cobrowsing %}
                            <tr style="filter: blur(1px);">
                              <th scope="row">Allow only video call</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.allow_video_meeting_only %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="allow_video_meeting_only" disabled checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="allow_video_meeting_only" disabled>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                          {% else %}
                            <tr>
                              <th scope="row">Allow only video call</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.allow_video_meeting_only %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="allow_video_meeting_only" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="allow_video_meeting_only">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                            {% endif %}

                          <tr>
                            <th scope="row">Allow feedback in meeting</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_meeting_feedback %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_meeting_feedback" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_meeting_feedback">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr class="tr-flex-sm">
                            <th scope="row">Set Default Meeting Password</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.meeting_default_password == "" or access_token_obj.meeting_default_password == None %}
                              <input type="text" aria-label="Checkbox for following text input" id="meeting_default_password" value="">
                              {% else %}
                              <input type="text" aria-label="Checkbox for following text input" id="meeting_default_password" value="{{access_token_obj.meeting_default_password}}">
                              {% endif %}
                            </td>
                          </tr>
                          <tr class="tr-flex-sm">
                            <th scope="row">Meeting URL where meeting will take place (e.g. xyz.com)</th>
                            <td style="vertical-align: inherit;">
                              <input type="text" aria-label="Checkbox for following text input" id="meeting_url" value="{{ access_token_obj.meeting_host_url }}">
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">Allow agents set time duration for meetings</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_meeting_end_time %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_meeting_end_time" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_meeting_end_time">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="meeting_end_time_div" class="tr-flex-sm">
                            <th scope="row">Set a maximum time duration for meetings (mins)</th>
                            <td style="vertical-align: inherit;">
                              <input type="text" id="meeting_end_time" value="{{ access_token_obj.meeting_end_time }}" style="width:50%;" class="positive_numeric">
                            </td>
                          </tr>

                          {% if access_token_obj.allow_agent_to_customer_cobrowsing %}
                            <tr id="tr_no_agent_connects_toast_meeting" style="filter: blur(1px);">
                              <th scope="row">No Agent permit meeting toast
                                <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will display a timer if the meeting host does not permit the customer's meeting joining request after the specified time below.">
                                  <i class="fas fa-info-circle"></i>
                                </span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <label class="easyassist-option-switch" data-toggle="tooltip" data-placement="bottom" title="Not applicable to Reverse Cobrowsing">
                                  <input type="checkbox" id="no_agent_connects_toast_meeting" disabled>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              </td>
                            </tr>
                          {% else %}
                            <tr id="tr_no_agent_connects_toast_meeting">
                              <th scope="row">No Agent permit meeting toast
                                <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will display a timer if the meeting host does not permit the customer's meeting joining request after the specified time below.">
                                  <i class="fas fa-info-circle"></i>
                                </span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.enable_no_agent_connects_toast_meeting %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="no_agent_connects_toast_meeting" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="no_agent_connects_toast_meeting">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                          {% endif %}
                          
                          <tr id="tr_no_agent_connects_meeting_toast_threshold" class="tr-flex-sm">
                            <th scope="row">No Agent permit meeting toast time (in min.)</th>
                            <td style="vertical-align: inherit;">
                              <input type="text" id="no_agent_connects_meeting_toast_threshold" value="{{ access_token_obj.no_agent_connects_meeting_toast_threshold }}" class="positive_numeric">
                            </td>
                          </tr>
                          <tr id="tr_no_agent_connects_meeting_toast_text" class="tr-flex-sm">
                            <th scope="row">No agent permit meeting toast text</th>
                            <td style="vertical-align: inherit;">
                              <textarea class="form-control" style="height:10em;" id="no_agent_connects_meeting_toast_text" maxlength="1024">{{ access_token_obj.no_agent_connects_meeting_toast_text }}</textarea>
                            </td>
                          </tr>
                          <tr class="tr-flex-sm">
                            <th scope="row">Meeting background color</th>
                            <td style="vertical-align: inherit;">
                              <input type="text" class="form-control jscolor" id="meet_background_color" placeholder="HEX" value="{{ access_token_obj.meet_background_color }}" style="width:50%;">
                            </td>
                          </tr>
                          <tr style="display:none;">
                            <th scope="row">Proxy Server</th>
                            <td style="vertical-align: inherit;">
                              <input type="text" aria-label="Checkbox for following text input" id="proxy_pass_server" value="{{ access_token_obj.proxy_pass_server }}">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Meeting Save -->
               <p id="save-cobrowsing-meta-details-error-meeting"></p>
                <div class="col-md-12" style="padding: 0 1.25em;">
                  <button type="button" class="btn btn-success float-right btn-width-100" onclick="save_cobrowsing_meta_details_meeting(this)">Save</button>
                  <button type="button" class="btn btn-info float-left btn-width-100" data-toggle="modal" data-target="#reset_cobrowsing_meta_details_modal">Reset All</button>
                  <br><br>
                </div>

                </div>
                <!-- calendar setting----- -->
                <div class="tab-pane fade" id="pills-calendar-options" role="tabpanel" aria-labelledby="pills-calendar-tab">

                  <!--  calendar Settings Body Start -->

                  <div class="card shadow mt-4">
                  <div class="card-body p-0">
                  <div class="card">
                    <div class="card-header py-3">
                      <div class="row">
                          <div class="col-sm-6 d-flex align-items-center">
                              <h6 class="m-0 font-weight-bold text-primary heading-text-primary">Calendar
                                  <span data-toggle="tooltip" data-placement="top" title="" data-original-title="This is the calendar for Inbound cobrowsing and Meeting."><i class="fas fa-info-circle"></i></span>
                                  <span class="text-secondary"> Created by {{cobrowse_agent}}</span>
                              </h6>
                          </div>
                          <div class="col-sm-6 d-flex justify-content-end">
                              <button class="btn btn-info btn-width-100" id="add-holiday" data-toggle="modal" onclick="" data-target="#add_holiday_modal">Add Holidays</button>
                              <button class="btn btn-info btn-width-100 ml-1" data-toggle="modal" data-target="#add_work_timing_modal">Work Timing</button>
                              <button class="btn btn-white-border btn-width-100" data-toggle="modal" data-target="#apply_filter_modal">Filter</button>
                          </div>
                      </div>
                    </div>
                    <div class="card-body">
                      <div class="row filter-result-div" id="applied-filter-div" style="display: none;">
                        <div class="filter-items-container" id="applied-filter-result-container">
                        </div>
                        <div class="filtered-result-text-heading">
                            Filtered Results
                        </div>
                    </div>
                      <div class="col-sm-12 d-flex justify-content-end">
                          <div id="support-history-table_filter" class="dataTables_filter">
                              <label class="d-flex align-items-center" style="color: grey;">Search:
                                <input type="text" class="form-control form-control-sm ml-2" placeholder="Search" name="search" id="table-calendar-details-search">
                              </label>
                          </div>
                      </div>
                      <div class="row">
                          <div class="col-sm-12">
                              <table class="table table-bordered dataTable no-footer" role="grid" id="table-calendar-details">
                              <thead class="table-heading-row">
                                  <tr role="row">
                                      <th scope="col" class="align-middle">Date</th>
                                      <th scope="col" class="align-middle">Day</th>
                                      {% if calendar_type == "1" %}
                                        <th scope="col" class="align-middle">Start Time</th>
                                        <th scope="col" class="align-middle">End Time</th>
                                      {% endif %}
                                      {% if calendar_type == "2" %}
                                        <th scope="col" class="align-middle">Description</th>
                                        <th scope="col" class="align-middle">Auto Response</th>
                                      {% endif %}
                                      <th scope="col" class="align-middle">Modified Date</th>
                                      <th scope="col" class="align-middle" style="width: 30px;"></th>
                                  </tr>
                              </thead>
                              <tbody>
                                {% for calendar_obj in calendar_objs %}
                                  <tr role="row" class="odd">
                                      <td>{{ calendar_obj.event_date| date:"d-M-Y" }}</td>
                                      <td>{{ calendar_obj.event_date| date:"l" }}</td>
                                      {% if calendar_type == "1" %}
                                        <td>{{ calendar_obj.start_time | time:'g:i A' }}</td>
                                        <td>{{ calendar_obj.end_time | time:'g:i A' }}</td>
                                      {% endif %}
                                      {% if calendar_type == "2" %}
                                        <td>{{ calendar_obj.description }}</td>
                                        <td>{{ calendar_obj.auto_response }}</td>
                                      {% endif %}
                                      <td>
                                          <span>{{ calendar_obj.modified_date|date:"d-M-Y, h:i a" }}</span>
                                          
                                      </td>
                                      <td class="align-middle">
                                        <span class="edit-icon edit-btn-class">
                                          <svg data-toggle="modal" data-target="#edit_work_timing-{{calendar_obj.pk}}" width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                              <path d="M19.0304 1.96973C20.4279 3.36719 20.4279 5.63293 19.0304 7.03039L7.0621 18.9987C6.78522 19.2756 6.44089 19.4754 6.06312 19.5784L0.947434 20.9736C0.38756 21.1263 -0.12617 20.6126 0.026523 20.0527L1.42171 14.937C1.52474 14.5593 1.72456 14.2149 2.00144 13.9381L13.9698 1.96973C15.3672 0.572265 17.633 0.572265 19.0304 1.96973ZM13.0003 5.06063L3.0621 14.9987C2.96981 15.091 2.9032 15.2058 2.86886 15.3317L1.81901 19.1811L5.66845 18.1313C5.79437 18.097 5.90915 18.0303 6.00144 17.9381L15.9393 7.99963L13.0003 5.06063ZM15.0304 3.03039L14.0603 3.99963L16.9993 6.93963L17.9698 5.96973C18.7814 5.15805 18.7814 3.84206 17.9698 3.03039C17.1581 2.21871 15.8421 2.21871 15.0304 3.03039Z" />
                                          </svg>                                                    
                                      </span>
                                      </td>
                                  </tr>
                                  <!-- edit work time modal-------------->
                                  <div class="modal fade" id="edit_work_timing-{{calendar_obj.pk}}" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
                                    <div class="modal-dialog modal-lg modal-sm" role="document">
                                        <div class="modal-content modal-content-custom">
                                            <div class="modal-header pt-3 pb-2">
                                                <h5 id="edit_work_timing_label" style="color: #2d2d2d;" >Edit</h5>
                                            </div>
                                            <div class="modal-body">
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <h6 class="text-primary">Days <span class="text-danger">*</span></h6>
                                                        <select id="select-work-timing-{{calendar_obj.pk}}" class="custom-form-control edit-work-time-dropdown" onchange="display_calender_event('{{calendar_obj.pk}}')">
                                                          <option value="1" id="workingdays">Working Days</option>
                                                          <option value="2" id="holidays ">Holidays</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row"  id="working-day-option-input-{{calendar_obj.pk}}">
                                                {% if calendar_obj.event_type == "1" %}
                                                    <div class="col-sm-6 mt-4 mb-2" id="start-time-div">
                                                      <h6 class="text-primary">Start Time</h6>
                                                      <input class="form-control col-sm-12 custom-input" type="time" id="start-time-{{calendar_obj.pk}}" value="{{ calendar_obj.start_time | time:'H:i' }}">
                                                    </div>
                                                    <div class="col-sm-6 mt-4 mb-2" id="end-time-div">
                                                        <h6 class="text-primary">End Time</h6>
                                                        <input class="form-control col-sm-12 custom-input" type="time" id="end-time-{{calendar_obj.pk}}" value="{{ calendar_obj.end_time | time:'H:i' }}">
                                                    </div>
                                                {% else %}
                                                    <div class="col-sm-6 mt-4 mb-2" id="start-time-div">
                                                      <h6 class="text-primary">Start Time</h6>
                                                      <input class="form-control col-sm-12 custom-input" type="time" id="start-time-{{calendar_obj.pk}}" value="{{ calendar_obj.start_time | time:'H:i' }}">
                                                    </div>
                                                    <div class="col-sm-6 mt-4 mb-2" id="end-time-div">
                                                        <h6 class="text-primary">End Time</h6>
                                                        <input class="form-control col-sm-12 custom-input" type="time" id="end-time-{{calendar_obj.pk}}" value="{{ calendar_obj.end_time | time:'H:i' }}">
                                                    </div>
                                                {% endif %}
                                                </div>
                                                <div class="row mt-2"id="holiday-option-input-{{calendar_obj.pk}}" style="display: none;">
                                                {% if calendar_obj.event_type == "2" %}
                                                    <div class="col-sm-12 mt-3">
                                                        <h6 class="text-primary">Description <span class="text-danger">*</span></h6>
                                                        <textarea class="form-control col-sm-12 custom-textarea" id="edit-description-text-{{calendar_obj.pk}}">{{calendar_obj.description}}</textarea>
                                                    </div>
                                                    <div class="col-sm-12 mt-3 mb-2">
                                                      <h6 class="text-primary">Auto Response <span class="text-danger">*</span></h6>
                                                      <textarea class="form-control col-sm-12 custom-textarea" id="edit-response-text-{{calendar_obj.pk}}">{{calendar_obj.auto_response}}</textarea>
                                                    </div>
                                                {% else %}
                                                    <div class="col-sm-12 mt-3">
                                                      <h6 class="text-primary">Description <span class="text-danger">*</span></h6>
                                                      <textarea class="form-control col-sm-12 custom-textarea" id="edit-description-text-{{calendar_obj.pk}}">{{calendar_obj.description}}</textarea>
                                                  </div>
                                                  <div class="col-sm-12 mt-3 mb-2">
                                                    <h6 class="text-primary">Auto Response <span class="text-danger">*</span></h6>
                                                    <textarea class="form-control col-sm-12 custom-textarea" id="edit-response-text-{{calendar_obj.pk}}">{{calendar_obj.auto_response}}</textarea>
                                                  </div>
                                                {% endif %}
                                              </div>
                                            </div>
                                            <div class="modal-footer">
                                              <button class="btn btn-secondary btn-custom" style="border: none !important; font-size: 14px !important;" id="cancel_edit_timing" type="button" data-dismiss="modal">Cancel</button>
                                              <button class="btn btn-info btn-custom" id="edit_calendar_event" type="button" onclick="edit_calendar_event('{{calendar_obj.pk}}')">Save</button>
                                            </div>
                                        </div>
                                    </div>
                                  </div>
                                  {% endfor %}
                              </tbody>
                              </table>
                          </div>
                      </div>
                      <div class="row mt-3">
                          <div class="col-md-6 col-sm-12 show-pagination-entry-container" filter_default_text="Showing {{start_point}} to {{end_point}} of {{total_calendar_objs}} entries" start_point="{{start_point}}" end_point="{{end_point}}">
                            Showing {{start_point}} to {{end_point}} of {{total_calendar_objs}} entries
                          </div>
                          <div class="col-md-6 col-sm-12">
                              <div class="d-flex justify-content-end">
                                  <nav aria-label="Page navigation example">
                                    <ul class="pagination">

                                      {% if calendar_objs.has_previous %}
                                          <li class="page-item">
                                              <a class="page-link" onclick="load_more_page('{{ calendar_objs.previous_page_number }}');" href="javascript:void(0)" aria-label="Previous">
                                                  <span aria-hidden="true">Previous</span>
                                                  <span class="sr-only">Previous</span>
                                              </a>
                                          </li>
                                      {% else %}
                                          <li class="disabled page-item"><span>
                                              <a class="page-link" href="javascript:void(0)" aria-label="Previous">
                                                  <span aria-hidden="true">Previous</span>
                                                  <span class="sr-only">Previous</span>
                                              </a>
                                          </li>
                                      {% endif %}
            
                                      {% if calendar_objs.number|add:'-4' > 1 %}
                                          <li class="page-item">
                                              <a class="page-link" onclick="load_more_page('{{ calendar_objs.number|add:'-5' }}');" href="javascript:void(0)">&hellip;</a>
                                          </li>
                                      {% endif %}
            
                                      {% for i in calendar_objs.paginator.page_range %}
                                          {% if calendar_objs.number == i %}
                                              <li class="active purple darken-3 page-item">
                                                  <a onclick="load_more_page('{{ i }}');" href="javascript:void(0)" class="page-link">{{ i }}</a>
                                              </li>
                                          {% elif i > calendar_objs.number|add:'-5' and i < calendar_objs.number|add:'5' %}
                                              <li class="page-item">
                                                  <a href="javascript:void(0)" onclick="load_more_page('{{ i }}');" class="page-link">{{ i }}</a>
                                              </li>
                                          {% endif %}
                                      {% endfor %}
            
                                      {% if calendar_objs.paginator.num_pages > calendar_objs.number|add:'4' %}
                                          <li class="page-item">
                                              <a href="javascript:void(0)" onclick="load_more_page('{{ calendar_objs.number|add:'5' }}');" class="page-link">&hellip;</a>
                                          </li>
                                      {% endif %}
            
                                      {% if calendar_objs.has_next %}
                                          <li class="page-item">
                                              <a class="page-link" href="javascript:void(0)" onclick="load_more_page('{{ calendar_objs.next_page_number }}');" aria-label="Next">
                                                  <span aria-hidden="true">Next</span>
                                                  <span class="sr-only">Next</span>
                                              </a>
                                          </li>
                                      {% else %}
                                          <li class="disabled page-item">
                                              <a class="page-link" href="javascript:void(0)" aria-label="Next">
                                                  <span aria-hidden="true">Next</span>
                                                  <span class="sr-only">Next</span>
                                              </a>
                                          </li>
                                      {% endif %}
                                    </ul>
                                  </nav>
                              </div>
                          </div>
                      </div>
                  </div>
                </div>
                </div>
              </div>
              </div>

              <!-- calendar body end----- -->

                <!--  Cobrowse General Settings -->

                <div class="tab-pane fade show active" id="pills-cobrowse-general-options" role="tabpanel" aria-labelledby="pills-cobrowse-general-tab">

                    <!--  Cobrowse General Settings Body Start -->

                    <div class="card shadow mb-4">
                    <div class="card-body mb-4">
                    <div class="card">
                      <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                        <div class="row">
                          <div class="col-mb-5" style="margin-top: 5px;">
                            <h6 class="ml-3 text-primary card-heading-text">Agent Settings</h6>
                          </div>
                        </div>
                      </div>
                      <div class="card-body table-responsive">
                      <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                        <tbody>
                          <tr>
                            <th scope="row" class="card-subheader-heading-text">Navigation Bar</th>
                            <td style="vertical-align: inherit;">
                            </td>
                          </tr>
                          <tr>
                            {% if access_token_obj.show_easyassist_connect_agent_icon %}
                              <th scope="row" id="floating_button_and_navbar_position_text">Icon and NavBar Position

                              <span style="position: relative;" data-toggle="tooltip" data-placement="bottom" title="Change position of Icon and NavBar." id="floating_button_and_navbar_position_tooltip"><i
                                    class="fas fa-info-circle"></i></span>   
                                    
                              </th>
                            {% else %}
                              <th scope="row" id="floating_button_and_navbar_position_text">Floating Button and NavBar Position

                              <span style="position: relative;" data-toggle="tooltip" data-placement="bottom" title="Change position of Floating button and NavBar." id="floating_button_and_navbar_position_tooltip"><i
                                    class="fas fa-info-circle"></i></span>   
                                    
                              </th>
                            {% endif %}
                            <td style="vertical-align: inherit;">
                              <select id="floating_button_position" class="form-control custom-select-dropdown-navbar-position" style="width:50%;"
                                onchange="show_floating_sidenav_easyassist_button()">
                                {% for value, position in FLOATING_BUTTON_POSITION %}
                                {% if value == access_token_obj.floating_button_position %}
                                <option value="{{ value }}" selected>{{ position| title }}</option>
                                {% else %}
                                <option value="{{ value }}">{{ position| title }}</option>
                                {% endif %}
                                {% endfor %}
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">Enable chat functionality</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.enable_chat_functionality %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_chat_functionality" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_chat_functionality">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="enable_greeting_chat_div">
                              <th scope="row">Enable Chat Bubble
                                <span data-toggle="tooltip" data-placement="bottom" title="This will display LiveChat as a chat bubble while on a co-browsing session."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.enable_chat_bubble %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="enable_chat_bubble" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="enable_chat_bubble">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>

                            <tr id="display_chat_icon" class="tr-flex-sm">
                              <th scope="row">Upload Chat Bubble Icon<br>
                              </th>
                              <td style="vertical-align: inherit;">
                                <div class="row">
                                  <div class="col-md-4 col-sm-12" style="padding-left: 0.7em;display: flex;align-items: center;">
                                    <button class="btn btn-info" data-toggle="modal" data-target="#chat_icon_upload_modal" id="chat_icon_upload_button">Change Icon</button>                                    
                                  </div>
                                  <div class="col-md-4 col-sm-12 default-chat-icon" style="display: none">
                                      <img alt="Chat Icon"  src="/{{ access_token_obj.chat_bubble_icon_source }}" id="default-chat-icon-image">
                                  </div>
                                  <div class="col-md-4 col-sm-12 reset-icon" style="display: none">    
                                      <svg class="chat-svg-icon" width="95" height="95" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g filter="url(#filter0_dd_145_7801)">
                                        <rect x="28" y="16" width="80" height="80" rx="18" fill="{{ access_token_obj.floating_button_bg_color }}"/>
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M55.7863 67.1339C53.277 66.0647 49.9999 64.6685 50 60.663V44.7989C50 41.2922 53.1694 38 56.5454 38H80.4421C83.7148 38 86 41.1728 86 44.7989V60.663C86 62.9293 85.1273 67.4619 81.6364 67.4619H64.1819L58.7273 71.9945C53.7383 75.9669 54.5415 73.5381 56.0207 69.0651L56.0208 69.0649L56.0209 69.0645C56.1895 68.5547 56.3669 68.0184 56.5454 67.4619C56.3039 67.3544 56.0494 67.2459 55.7863 67.1339ZM58.7267 56.1303C59.9317 56.1303 60.9085 55.1156 60.9085 53.864C60.9085 52.6123 59.9317 51.5977 58.7267 51.5977C57.5218 51.5977 56.5449 52.6123 56.5449 53.864C56.5449 55.1156 57.5218 56.1303 58.7267 56.1303ZM78.3636 53.864C78.3636 55.1156 77.3868 56.1303 76.1818 56.1303C74.9768 56.1303 74 55.1156 74 53.864C74 52.6123 74.9768 51.5977 76.1818 51.5977C77.3868 51.5977 78.3636 52.6123 78.3636 53.864ZM67.4552 56.1303C68.6602 56.1303 69.6371 55.1156 69.6371 53.864C69.6371 52.6123 68.6602 51.5977 67.4552 51.5977C66.2503 51.5977 65.2734 52.6123 65.2734 53.864C65.2734 55.1156 66.2503 56.1303 67.4552 56.1303Z" fill="white"/>
                                        <rect x="29.25" y="17.25" width="77.5" height="77.5" rx="16.75" stroke="white" stroke-width="2.5"/>
                                        </g>
                                        <defs>
                                        <filter id="filter0_dd_145_7801" x="0" y="0" width="136" height="136" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                                        <feOffset dy="12"/>
                                        <feGaussianBlur stdDeviation="14"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0.12549 0 0 0 0 0.2 0 0 0 0.12 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_145_7801"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                                        <feOffset dy="8"/>
                                        <feGaussianBlur stdDeviation="4"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0.12549 0 0 0 0 0.2 0 0 0 0.04 0"/>
                                        <feBlend mode="normal" in2="effect1_dropShadow_145_7801" result="effect2_dropShadow_145_7801"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_145_7801" result="shape"/>
                                        </filter>
                                        </defs>
                                      </svg>                                      
                                    </div>
                                  <div class="col-md-4 col-sm-12 reset-chat-icon" style="padding-left: 0.3em;display: flex;align-items: center; cursor:pointer;" onclick="set_default_icon()">
                                    <svg width="80" height="32" viewBox="0 0 80 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M0 16C0 7.16344 7.16344 0 16 0H64C72.8366 0 80 7.16344 80 16V16C80 24.8366 72.8366 32 64 32H16C7.16344 32 0 24.8366 0 16V16Z" fill="#F1F5F9"/>
                                      <path d="M21.5977 21V11.1973H25.0977C26.0911 11.1973 26.8887 11.4775 27.4902 12.0381C28.0918 12.5941 28.3926 13.3187 28.3926 14.2119C28.3926 14.8864 28.208 15.4766 27.8389 15.9824C27.4743 16.4883 27.0094 16.8438 26.4443 17.0488L28.6729 21H26.9639L24.9609 17.2744H23.1084V21H21.5977ZM23.1084 15.9619H25.0293C25.5671 15.9619 26.0023 15.8115 26.335 15.5107C26.6676 15.21 26.834 14.777 26.834 14.2119C26.834 13.7152 26.6699 13.3073 26.3418 12.9883C26.0182 12.6647 25.5625 12.5029 24.9746 12.5029H23.1084V15.9619ZM29.7871 17.3633C29.7871 16.6022 29.9466 15.9277 30.2656 15.3398C30.5846 14.7474 31.0199 14.2917 31.5713 13.9727C32.1273 13.6536 32.7516 13.4941 33.4443 13.4941C34.0003 13.4941 34.5062 13.5921 34.9619 13.7881C35.4176 13.984 35.7936 14.2529 36.0898 14.5947C36.3906 14.9365 36.6208 15.3353 36.7803 15.791C36.9443 16.2467 37.0264 16.7367 37.0264 17.2607V17.8076H31.2568C31.2842 18.4502 31.5007 18.9674 31.9062 19.3594C32.3118 19.7513 32.8473 19.9473 33.5127 19.9473C33.9775 19.9473 34.3923 19.8424 34.7568 19.6328C35.126 19.4232 35.3835 19.1406 35.5293 18.7852H36.958C36.7666 19.5052 36.3587 20.0863 35.7344 20.5283C35.1146 20.9658 34.3604 21.1846 33.4717 21.1846C32.3825 21.1846 31.4961 20.8268 30.8125 20.1113C30.1289 19.3913 29.7871 18.4753 29.7871 17.3633ZM31.2842 16.6729H35.5703C35.5247 16.0713 35.3037 15.5973 34.9072 15.251C34.5107 14.9001 34.0231 14.7246 33.4443 14.7246C32.8792 14.7246 32.3916 14.9069 31.9814 15.2715C31.5713 15.6361 31.3389 16.1032 31.2842 16.6729ZM38.3867 18.833H39.7744C39.8701 19.5941 40.4033 19.9746 41.374 19.9746C41.848 19.9746 42.2148 19.8789 42.4746 19.6875C42.7389 19.4915 42.8711 19.2295 42.8711 18.9014C42.8711 18.6598 42.7913 18.4661 42.6318 18.3203C42.4769 18.1699 42.2718 18.0605 42.0166 17.9922C41.766 17.9193 41.488 17.8577 41.1826 17.8076C40.8773 17.7575 40.5719 17.6914 40.2666 17.6094C39.9658 17.5273 39.6878 17.418 39.4326 17.2812C39.182 17.1445 38.9769 16.9395 38.8174 16.666C38.6624 16.388 38.585 16.0462 38.585 15.6406C38.585 15.0163 38.8402 14.5036 39.3506 14.1025C39.861 13.6969 40.5309 13.4941 41.3604 13.4941C42.1123 13.4941 42.7412 13.6901 43.2471 14.082C43.7529 14.474 44.0332 15.0117 44.0879 15.6953H42.7412C42.7002 15.3763 42.5566 15.1257 42.3105 14.9434C42.0645 14.7611 41.7272 14.6699 41.2988 14.6699C40.8932 14.6699 40.5674 14.7588 40.3213 14.9365C40.0798 15.1097 39.959 15.3353 39.959 15.6133C39.959 15.8047 40.0205 15.9642 40.1436 16.0918C40.2712 16.2194 40.4352 16.3105 40.6357 16.3652C40.8408 16.4199 41.0732 16.4746 41.333 16.5293C41.5928 16.5794 41.8571 16.625 42.126 16.666C42.3994 16.707 42.666 16.7777 42.9258 16.8779C43.1855 16.9782 43.4157 17.1012 43.6162 17.2471C43.8213 17.3883 43.9854 17.5957 44.1084 17.8691C44.236 18.1426 44.2998 18.4639 44.2998 18.833C44.2998 19.5348 44.0309 20.1022 43.4932 20.5352C42.96 20.9681 42.2399 21.1846 41.333 21.1846C40.4261 21.1846 39.7197 20.9749 39.2139 20.5557C38.7126 20.1318 38.4368 19.5576 38.3867 18.833ZM45.7148 17.3633C45.7148 16.6022 45.8743 15.9277 46.1934 15.3398C46.5124 14.7474 46.9476 14.2917 47.499 13.9727C48.055 13.6536 48.6794 13.4941 49.3721 13.4941C49.9281 13.4941 50.4339 13.5921 50.8896 13.7881C51.3454 13.984 51.7214 14.2529 52.0176 14.5947C52.3184 14.9365 52.5485 15.3353 52.708 15.791C52.8721 16.2467 52.9541 16.7367 52.9541 17.2607V17.8076H47.1846C47.2119 18.4502 47.4284 18.9674 47.834 19.3594C48.2396 19.7513 48.7751 19.9473 49.4404 19.9473C49.9053 19.9473 50.32 19.8424 50.6846 19.6328C51.0537 19.4232 51.3112 19.1406 51.457 18.7852H52.8857C52.6943 19.5052 52.2865 20.0863 51.6621 20.5283C51.0423 20.9658 50.2881 21.1846 49.3994 21.1846C48.3102 21.1846 47.4238 20.8268 46.7402 20.1113C46.0566 19.3913 45.7148 18.4753 45.7148 17.3633ZM47.2119 16.6729H51.498C51.4525 16.0713 51.2314 15.5973 50.835 15.251C50.4385 14.9001 49.9508 14.7246 49.3721 14.7246C48.807 14.7246 48.3193 14.9069 47.9092 15.2715C47.499 15.6361 47.2666 16.1032 47.2119 16.6729ZM54.1367 14.8818V13.6924H55.1006C55.2282 13.6924 55.333 13.6491 55.415 13.5625C55.4971 13.4759 55.5381 13.3597 55.5381 13.2139V11.6074H56.9189V13.6787H59.0518V14.8818H56.9189V18.6348C56.9189 19.3822 57.2744 19.7559 57.9854 19.7559H58.9766V21H57.7598C57.0306 21 56.4632 20.8018 56.0576 20.4053C55.652 20.0042 55.4492 19.4277 55.4492 18.6758V14.8818H54.1367Z" fill="#334155"/>
                                  </svg>
                                  </div>                                      
                                  </div>
                                </div>
                              </td>
                            </tr>
                            <tr>
                            <th scope="row">Enable doc sharing through chat
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will allow attachments option in agent and customer chatbox."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.share_document_from_livechat %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="share_document_from_livechat" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="share_document_from_livechat">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">Enable Pre-approved 'Document sharing'
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will display documents icon in the agent's navigation bar while Cobrowsing."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_support_documents %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_support_documents" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_support_documents">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="allow_only_support_documents_div">
                            <th scope="row">Enable agents to share only pre-approved documents
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will hide the attachment icon from the agent's chatbox even if doc sharing through chat is on."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_only_support_documents %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="allow_only_support_documents" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="allow_only_support_documents">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="auto_offline_agent_div">
                            <th scope="row">Enable auto offline agent
                              <span data-toggle="tooltip" data-placement="bottom" title="On enabling, the agent will be automatically offline after 30 sec of inactivity."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.disable_auto_offline_agent %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="auto_offline_agent" >
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="auto_offline_agent" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="display_agent_profile_div">
                            <th scope="row">Display agent profile picture
                              <span data-toggle="tooltip" data-placement="bottom" title="Allows agents to add profile pictures. This will be visible to customers."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.display_agent_profile %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="display_agent_profile" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="display_agent_profile">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                              
                            </td>
                          </tr>
                          </tbody>
                      </table>
                    </div>
                  </div>
                  </div>
                  
                </div>
                <div class="card shadow mb-4">
                  <div class="card-body">
                    <div class="card">
                      <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                        <div class="row">
                          <div class="col-mb-5" style="margin-top: 5px;">
                            <h6 class="ml-3 text-primary card-heading-text">Admin Settings</h6>
                          </div>
                        </div>
                      </div>
                      <div class="card-body table-responsive">
                      <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                        <tbody>
                          <tr>
                            <th scope="row" class="card-subheader-heading-text">General</th>
                            <td style="vertical-align: inherit;">
                            </td>
                          </tr>

                          <tr class="tr-flex-sm">
                            <th scope="row">Cobrowsing theme colour</th>
                            <td style="vertical-align: inherit;">
                              <input type="text" class="form-control jscolor" id="floating_button_bg_color" placeholder="HEX" value="{{ access_token_obj.floating_button_bg_color }}" style="width:50%;" onchange="show_floating_sidenav_easyassist_button();">
                            </td>
                          </tr>

                          <tr id="enable_greeting_bubble_div">
                            <th scope="row">Enable greeting bubble
                              <span data-toggle="tooltip" data-placement="bottom" title="A greeting bubble will popup after the configured time from the time the user lands on the website."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.enable_greeting_bubble %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_greeting_bubble" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_greeting_bubble">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>

                          <tr class="tr-flex-sm" id="greeting-bubble-timer-div">
                            <th scope="row">Greeting bubble auto popup timer (In secs)</th>
                            <td style="vertical-align: inherit;">
                              <input type="number" aria-label="Checkbox for following text input" value={{access_token_obj.greeting_bubble_auto_popup_timer}} id="greeting_bubble_auto_popup_timer" min="0" class="positive_numeric">
                            </td>
                          </tr>

                          <tr id="greeting-bubble-text-div" class="tr-flex-sm">
                            <th scope="row">Greeting bubble text
                            <span data-toggle="tooltip" data-placement="bottom" title="The text provided in the field will be visible at the end customer when the greeting bubble pops up."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              <textarea class="form-control" style="height:6.25em;" id="greeting_bubble_text" maxlength="100">{{access_token_obj.greeting_bubble_text}}</textarea>
                            </td>
                          </tr>

                          <tr id="product-category-list-div" class="tr-flex-sm">
                            <th scope="row">Add Product category for the Agents <br>(Eg. Education Loan, Policy, Others)</th>
                            <td style="vertical-align: inherit;">
                              <div class="easyassist-noselect">
                                <p id="product_category_list" style="display: none;"></p>
                                <ul id="product_category_tag_list" class="cognoai-custom-tag-input" style="padding: 0;"></ul>
                                <input type="text" maxLength ="25"id="input_product_category" placeholder="Add product category">
                              </div>
                            </td>
                          </tr>

                          <tr style="display:none;">
                            <th scope="row">Get Sharable link</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.get_sharable_link %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="get_sharable_link" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="get_sharable_link">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  </div>
                  <div class="card-body">
                    <div class="card mb-4">
                      <div class="card-body table-responsive">
                      <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                        <tbody>
                          <tr>
                            <th scope="row" class="card-subheader-heading-text">Inbound</th>
                            <td style="vertical-align: inherit;">
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">
                            Enable Inbound
                            <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will enable inbound functionality"><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.enable_inbound %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_inbound" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="enable_inbound">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="maximum_active_leads_div">
                              <th scope="row">Enable Maximum leads that can be assigned to an agent</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.maximum_active_leads %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="maximum_active_leads" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="maximum_active_leads">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>

                            <tr class="tr-flex-sm">
                              <th scope="row">Maximum leads
                                <span data-toggle="tooltip" data-placement="bottom" title="Only positive integer values allowed."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.maximum_active_leads_threshold }}" id="maximum_active_leads_threshold" min="0" class="positive_numeric">
                              </td>
                            </tr>

                            <tr id="enable_auto_assign_unattended_lead_tr">
                              <th scope="row">Enable auto assign to another available agent
                                <span data-toggle="tooltip" data-placement="bottom" title="If the lead is assigned to agent 1 and the agent 1 is busy with any customer, then after auto assign timer drains to 0 secs the lead will be assigned to next available agent based on category and language"><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.enable_auto_assign_unattended_lead %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="enable_auto_assign_unattended_lead" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="enable_auto_assign_unattended_lead">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                            
                            <tr id="auto_assign_unattended_lead_timer_tr" class="tr-flex-sm">
                              <th scope="row">Auto-assign Timer (In Seconds)</th>
                              <td style="vertical-align: inherit;">
                                <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.auto_assign_unattended_lead_timer }}" id="auto_assign_unattended_lead_timer_input" min="0" class="positive_numeric">
                              </td>
                            </tr>

                            <tr id="auto_assign_unattended_lead_message_tr" class="tr-flex-sm">
                              <th scope="row">Lead auto-assigned to another agent message
                                <span data-toggle="tooltip" data-placement="bottom" title="The message in the text box will be displayed at the customer side as soon as the lead is auto assigned to next available agent based on category and language."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height: 7em !important;" maxlength="1024" id="auto_assign_unattended_lead_message">{{ access_token_obj.auto_assign_unattended_lead_message }}</textarea>
                              </td>
                            </tr>

                            <tr id="enable_auto_assign_to_one_agent_tr">
                              <th scope="row">End session if auto-assigned agent do not attend the session
                                <span data-toggle="tooltip" data-placement="bottom" title="If the lead assigned to the next available agent is also not able to attend the session then the lead will be registered in the Unattended leads."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.enable_auto_assign_to_one_agent %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="enable_auto_assign_to_one_agent" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="enable_auto_assign_to_one_agent">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>

                            <tr id="auto_assigned_unattended_lead_archive_timer_tr" class="tr-flex-sm">
                              <th scope="row">Auto end session timer (in mins)</th>
                              <td style="vertical-align: inherit;">
                                <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.auto_assigned_unattended_lead_archive_timer }}" id="unattended-lead-archive-timer-input" min="1" class="positive_numeric">
                              </td>
                            </tr>

                            <tr id="auto_assign_lead_end_session_message_tr" class="tr-flex-sm">
                              <th scope="row">Auto end session message
                                <span data-toggle="tooltip" data-placement="bottom" title="This message will be displayed at the customer side as soon as the connect button replaces into archive."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height: 7em !important;" maxlength="1024" id="auto_assign_lead_end_session_message">{{ access_token_obj.auto_assign_lead_end_session_message }}</textarea>
                              </td>
                            </tr>
                            <tr id="show_floating_easyassist_button_div">
                              <th scope="row">Display floating button to 'Connect with an Agent'</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.show_floating_easyassist_button %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_floating_easyassist_button" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_floating_easyassist_button">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                            <tr id="show_easyassist_connect_agent_icon_div">
                              <th scope="row">Display an icon to 'Connect with an Agent'</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.show_easyassist_connect_agent_icon %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_easyassist_connect_agent_icon" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_easyassist_connect_agent_icon">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                            <tr id="display_icon" class="tr-flex-sm">
                              <th scope="row">Upload icon for connect with agent <br>
                              </th>
                              <td style="vertical-align: inherit;">
                                <div class="row">
                                  <div class="col-md-6 col-sm-12" style="padding-left: 0.7em;display: flex;align-items: center;">
                                    {% if access_token_obj.source_easyassist_connect_agent_icon != "null" %}
                                    <button class="btn btn-info mb-2 mr-sm-2" data-toggle="modal" data-target="#connect_with_agent_icon_upload_modal" id="connect_with_agent_icon_upload_button">Change Icon</button>
                                    {% else %}
                                    <button class="btn btn-info mb-2 mr-sm-2" data-toggle="modal" data-target="#connect_with_agent_icon_upload_modal" id="connect_with_agent_icon_upload_button">Upload Icon</button>
                                    {% endif %}
                                  </div>
                                  <div class="col-md-6 col-sm-12">
                                    {% if access_token_obj.source_easyassist_connect_agent_icon != "null" %}
                                    <img alt="Connect with Agent Icon" src="/{{ access_token_obj.source_easyassist_connect_agent_icon }}" id="connect-with-agent-image" style="height: 9em; display: inline-box; width: 100%;">
                                    {% endif %}
                                  </div>
                                </div>
                              </td>
                            </tr>
                            <tr id="icon_position" class="tr-flex-sm">
                              <th scope="row">Change Icon Position
                                <span data-toggle="tooltip" data-placement="bottom" title="Use up arrow to move the icon to right, and down arrow to move the icon to left"><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <input type="number" value="{{ access_token_obj.floating_button_left_right_position }}" id="floating_button_left_right_position">
                              </td>
                            </tr>
                            <tr id="show_only_if_agent_available_div">
                              <th scope="row">Display 'Connect with an Agent' button only if agents are available
                                <span data-toggle="tooltip" data-placement="bottom" title="If enabled, the ‘Connect with an Agent’ button will not be displayed on the website during non-working hours or when agents are not online."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.show_only_if_agent_available %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_only_if_agent_available" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="show_only_if_agent_available">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                            <tr id="disable_connect_button_if_agent_unavailable_div">
                              <th scope="row">Disable 'Connect with an Agent' button if agents are unavailable
                                <span data-toggle="tooltip" data-placement="bottom" title="If enabled, the ‘Connect with an Agent’ button will be disabled and non clickable during non-working hours or when agents are not online."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.disable_connect_button_if_agent_unavailable %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="disable_connect_button_if_agent_unavailable" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="disable_connect_button_if_agent_unavailable">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>
                            <tr id="message-if-agent-unavailable-div" class="tr-flex-sm">
                              <th scope="row">Message to be shown if agents are unavailable</th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height:10em;" maxlength="1024" id="message_if_agent_unavailable">{{ access_token_obj.message_if_agent_unavailable }}</textarea>
                              </td>
                            </tr>
                            <tr id="enable_non_working_hours_modal_popup_div">
                              <th scope="row">
                              Enable non working hours popup
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will ask the customer for his/her details during non-working hours and show those leads in follow up leads tab."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                  {% if access_token_obj.enable_non_working_hours_modal_popup %}
                                    <label class="easyassist-option-switch">
                                      <input type="checkbox" id="enable_non_working_hours_modal_popup" checked>
                                      <span class="easyassist-option-switch-slider round"></span>
                                    </label>
                                  {% else %}
                                    <label class="easyassist-option-switch">
                                      <input type="checkbox" id="enable_non_working_hours_modal_popup">
                                      <span class="easyassist-option-switch-slider round"></span>
                                    </label>
                                  {% endif %}
                              </td>
                            </tr>
                            <tr id="message_on_non_working_hours_div" class="tr-flex-sm">
                              <th scope="row">Message to be shown to customers during non-working hours</th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height:10em;" id="message_on_non_working_hours" maxlength="1024">{{ access_token_obj.message_on_non_working_hours }}</textarea>
                              </td>
                            </tr>
                            <tr id="enable_followup_leads_tab_div">
                              <th scope="row">Enable Follow up Leads</th>
                              <td style="vertical-align: inherit;">
                                  {% if access_token_obj.enable_followup_leads_tab %}
                                    <label class="easyassist-option-switch">
                                      <input type="checkbox" id="enable_followup_leads_tab" checked>
                                      <span class="easyassist-option-switch-slider round"></span>
                                    </label>
                                  {% else %}
                                    <label class="easyassist-option-switch">
                                      <input type="checkbox" id="enable_followup_leads_tab">
                                      <span class="easyassist-option-switch-slider round"></span>
                                    </label>
                                  {% endif %}
                              </td>
                            </tr>

                            <tr id="choose_product_category_div">
                              <th scope="row">Enable tag based assignment for Inbound</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.choose_product_category %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="choose_product_category" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="choose_product_category">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>

                            <tr id="product_category_message_div" class="tr-flex-sm">
                              <th scope="row">Product category message</th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height:10em;" maxlength="1024" id="message_on_choose_product_category_modal">{{ access_token_obj.message_on_choose_product_category_modal }}</textarea>
                              </td>
                            </tr>

                            <tr id="allow_language_support_div">
                              <th scope="row">Enable language support</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.allow_language_support %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="allow_language_support" checked>
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% else %}
                                  <label class="easyassist-option-switch">
                                    <input type="checkbox" id="allow_language_support">
                                    <span class="easyassist-option-switch-slider round"></span>
                                  </label>
                                {% endif %}
                              </td>
                            </tr>

                            <tr id="supported-language-list-div" class="tr-flex-sm">
                              <th scope="row">Supported languages <br>(e.g. Hindi, English)</th>
                              <td style="vertical-align: inherit;">
                                <div class="easyassist-noselect">
                                  <p id="supported_language_list" style="display: none;"></p>
                                  <ul id="support_language_tag_list" class="cognoai-custom-tag-input" style="padding: 0;"></ul>
                                  <input type="text" maxLength ="25"id="input_language_support" placeholder="Add Languages Supported">
                                </div>                        
                              </td>
                            </tr>

                          <tr class="tr-flex-sm" id="connect_message_div">
                            <th scope="row">Message to be shown on 'Connect with our Experts' modal</th>
                            <td style="vertical-align: inherit;">
                              <textarea class="form-control" style="height:10em;" maxlength="1024" id="connect_message">{{ access_token_obj.connect_message }}</textarea>
                            </td>
                          </tr>

                            <tr id="no_agent_connects_toast_div">
                              <th scope="row">
                              No Agent connects session toast
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will show a toast to the customer if the agent does not connect for more than below mentioned time."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.no_agent_connects_toast %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="no_agent_connects_toast" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                                {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="no_agent_connects_toast">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                                {% endif%}
                              </td>
                            </tr>
                            <tr id="no_agent_connects_toast_threshold_section" class="tr-flex-sm">
                              <th scope="row">No Agent connects session toast time (in min.)</th>
                              <td style="vertical-align: inherit;">
                                <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.no_agent_connects_toast_threshold }}" id="no_agent_connects_toast_threshold" min="0" class="positive_numeric">
                              </td>
                            </tr>
                            <tr id="no_agent_connects_toast_text_section" class="tr-flex-sm">
                              <th scope="row">Toast text to be shown</th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height:10em;" maxlength="1024" id="no_agent_connects_toast_text">{{ access_token_obj.no_agent_connects_toast_text }}</textarea>
                              </td>
                            </tr>

                            <tr id="no_agent_connect_timer_reset_count_tr" class="tr-flex-sm">
                              <th scope="row">No. of times 'No Agent Connect Timer' resets
                                <span data-toggle="tooltip" data-placement="bottom" title="This refers to the number of times no agent connect timer should reset before getting closed. '0' means, the timer modal closes after it exhausts once."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.no_agent_connects_toast_reset_count }}" id="no_agent_connect_timer_reset_count" min="0" class="positive_numeric">
                              </td>
                            </tr>
                          
                            <tr id="no_agent_connect_timer_reset_message_tr" class="tr-flex-sm">
                              <th scope="row">Timer reset toast
                                <span data-toggle="tooltip" data-placement="bottom" title="This message will be displayed to the customer, when the timer reset value drains off."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height:10em;" maxlength="1024" id="no_agent_connect_timer_reset_message">{{ access_token_obj.no_agent_connects_toast_reset_message }}</textarea>
                              </td>
                            </tr>

                            <tr id="auto_archive_lead_timer_input_section" class="tr-flex-sm">
                              <th scope="row">Auto archive lead if agents are offline (in min.)
                                 <span data-toggle="tooltip" data-placement="bottom" title="The lead will auto archive and get registered in follow up leads once this timer drains off."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                 <input type="number" value="{{ access_token_obj.archive_on_unassigned_time_threshold }}" id="auto-archive-lead-timer-input" min="0" class="positive_numeric">
                              </td>
                           </tr>
                           <tr id="auto_archive_popup_text_section" class="tr-flex-sm">
                              <th scope="row">Auto archive pop up
                                 <span data-toggle="tooltip" data-placement="bottom" title="This pop up would be shown to the customer when the lead gets auto archived and get registered inside follow up leads"><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                 <textarea class="form-control" style="height:10em;" maxlength="160" id="auto-archive-popup-text">{{ access_token_obj.archive_message_on_unassigned_time_threshold }}</textarea>
                              </td>
                           </tr>

                          <tr id="field_stuck_event_handler_div">
                            <th scope="row">Enable 'Connect with an Agent' auto-popup after inactivity</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.field_stuck_event_handler %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="field_stuck_event_handler" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="field_stuck_event_handler">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="field_stuck_event_handler_popup_time" class="tr-flex-sm">
                            <th scope="row">Number of times 'Connect with an Agent' auto popup after inactivity</th>
                            <td style="vertical-align: inherit;">
                              <input type="number" aria-label="Checkbox for following text input" id="inactivity_auto_popup_number" value="{{ access_token_obj.inactivity_auto_popup_number }}"  min="0" class="positive_numeric">
                            </td>
                          </tr>
                          <tr id="field_recursive_stuck_timer_div">
                            <th scope="row">Show Inactivity pop up recursively</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.field_recursive_stuck_event_check %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="field_recursive_stuck_event_check" onchange="hide_inactivity_popup_number()" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="field_recursive_stuck_event_check" onchange="hide_inactivity_popup_number()">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="field_recursive_timer_div" class="tr-flex-sm">
                            <th scope="row">Set inactivity time interval (in seconds)</th>
                            <td style="vertical-align: inherit;">
                              <input type="number" aria-label="Checkbox for following text input" value="{{ access_token_obj.field_stuck_timer }}" id="field_stuck_timer" min="0" class="positive_numeric">
                            </td>
                          </tr>
                          <tr id="allow_popup_on_browser_leave_div">
                            <th scope="row">
                              Enable Exit Intent 
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will popup a 'Connect with Experts' modal whenever the customer tries to close the tab"><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_popup_on_browser_leave %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_popup_on_browser_leave" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_popup_on_browser_leave">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>
                          <tr id="exit_intent_popup_count_div" class="tr-flex-sm">
                            <th scope="row">Number of times exit intent should pop up</th>
                            <td style="vertical-align: inherit;">
                              <input type="number" aria-label="Checkbox for following text input" id="exit-intent-popup-count" value={{access_token_obj.no_of_times_exit_intent_popup}}  min="1" class="positive_numeric">
                            </td>
                          </tr>
                          <tr id="recursive_exit_intent_div">
                            <th scope="row">Show Exit Intent popup recursively</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.enable_recursive_browser_leave_popup %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_recursive_browser_leave_popup" onchange="hide_exit_intent_popup_number()" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_recursive_browser_leave_popup" onchange="hide_exit_intent_popup_number()">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>

                          </tbody>
                      </table>
                    </div>
                  </div>
                  </div>



                  <div class="card-body" style="padding-top: 0px;">
                    <div class="card mb-4">
                      <div class="card-body table-responsive">
                      <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                        <tbody>
                          <tr>
                            <th scope="row" class="card-subheader-heading-text">Outbound</th>
                            <td style="vertical-align: inherit;">
                            </td>
                          </tr>

                          <tr>
                            <th scope="row">
                            Enable Outbound
                            <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will enable Search Lead functionality"><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.lead_generation %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="lead_generation" checked>
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% else %}
                              <label class="easyassist-option-switch">
                                <input type="checkbox" id="lead_generation">
                                <span class="easyassist-option-switch-slider round"></span>
                              </label>
                              {% endif %}
                            </td>
                          </tr>

                          <tr id="enable_tag_based_assignment_for_outbound_div">
                            <th scope="row">Enable tag based assignment for Outbound
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.enable_tag_based_assignment_for_outbound %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_tag_based_assignment_for_outbound" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="enable_tag_based_assignment_for_outbound">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>

                          <tr id="show_floating_button_after_lead_search_div">
                            <th scope="row">Show floating button even after the lead is generated
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will show the floating button until the CoBrowsing session hasn’t started or the customer has not requested for support."><i class="fas fa-info-circle"></i></span>
                            </th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.show_floating_button_after_lead_search %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="show_floating_button_after_lead_search" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="show_floating_button_after_lead_search">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>

                        </tbody>
                      </table>
                    </div>
                  </div>
                  </div>

                          
                  <div class="card-body" style="padding-top: 0px;">
                    <div class="card mb-4">
                      <div class="card-body table-responsive">
                        <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                          <tbody>
                            <tr>
                              <th scope="row" class="card-subheader-heading-text">Reverse</th>
                              <td style="vertical-align: inherit;">
                              </td>
                            </tr>

                            <tr>
                            <th scope="row">Enable reverse cobrowsing</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_agent_to_customer_cobrowsing %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_agent_to_customer_cobrowsing" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                  <input type="hidden" id="previous_reverse_toggle_value" value="{{access_token_obj.allow_agent_to_customer_cobrowsing}}">
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_agent_to_customer_cobrowsing">
                                  <span class="easyassist-option-switch-slider round"></span>
                                  <input type="hidden" id="previous_reverse_toggle_value" value="{{access_token_obj.allow_agent_to_customer_cobrowsing}}">
                                </label>
                              {% endif %}
                            </td>
                          </tr>

                          <tr id="allow_agent_to_screen_record_customer_cobrowsing_div">
                            <th scope="row">Enable auto screen record</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_agent_to_screen_record_customer_cobrowsing %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_agent_to_screen_record_customer_cobrowsing" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_agent_to_screen_record_customer_cobrowsing">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>

                          <tr id="allow_agent_to_audio_record_customer_cobrowsing_div">
                            <th scope="row">Enable audio in screen recording</th>
                            <td style="vertical-align: inherit;">
                              {% if access_token_obj.allow_agent_to_audio_record_customer_cobrowsing %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_agent_to_audio_record_customer_cobrowsing" checked>
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="allow_agent_to_audio_record_customer_cobrowsing">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                              {% endif %}
                            </td>
                          </tr>

                        </tbody>
                      </table>
                      </div>
                    </div>
                  </div>
                </div>
              

                  <div class="card shadow mb-4">
                      <div class="card-body">
                          <div class="card mb-4">
                              <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                                  <div class="row">
                                      <div class="col-mb-5" style="margin-top: 5px;">
                                          <h6 class="ml-3 text-primary card-heading-text">Customer Side Settings </h6>
                                      </div>
                                  </div>
                              </div>
                              <div class="card-body table-responsive">
                                  <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                                      <tbody>
                                          <tr class="tr-flex-sm">
                                              <th scope="row">Choose Font </th>
                                              <td style="vertical-align: inherit;" class="console-font-container">
                                                <div class="row">
                                                  <div class="col-md-12 col-lg-6 col-xl-6 col-sm-12">
                                                    <select class="selectpicker" data-live-search="true" data-live-search-placeholder="Search Font" data-container="body" id="easyassit_font_family" onchange="easyassist_download_and_apply_test_font()" data-none-results-text="No match found">
                                                    </select>
                                                  </div>
                                                  <div class="col-md-12 col-lg-6 col-xl-6 col-sm-12 mt-md-2 mt-lg-0">
                                                    <input type="text" class="form-control" id="font_test_input" placeholder="Test it here" style="width: 100%;" autocomplete="off">
                                                  </div>
                                                </div>
                                              </td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="card shadow mb-4">
                    <div class="card-body">
                      <div class="card mb-4">
                        <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
                          <div class="row">
                            <div class="col-mb-5" style="margin-top: 5px;">
                              <h6 class="ml-3 text-primary card-heading-text">Console Settings</h6>
                            </div>
                          </div>
                        </div>
                        <div class="card-body table-responsive">
                        <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                          <tbody>

                            <tr class="tr-flex-sm">
                              <th scope="row">Change Console Color</th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.get_cobrowsing_console_theme_color == None %}
                                  <input type="text" class="form-control jscolor" id="cobrowsing-console-theme-color" placeholder="HEX" value="" style="width:50%;">
                                {% else %}
                                  <input type="text" class="form-control jscolor" id="cobrowsing-console-theme-color" placeholder="HEX" value="{{ access_token_obj.get_cobrowsing_console_theme_color.hex }}" style="width:50%;">
                                {% endif %}
                              </td>
                            </tr>

                            {% comment %} <tr class="tr-flex-sm">
                              <th scope="row">
                                Change Logo
                              </th>
                              <td style="vertical-align: inherit;" id="cobrowse-logo-image-data">
                                {% if access_token_obj.source_easyassist_cobrowse_logo %}
                                <div class="row">
                                  <div class="col-md-6 col-sm-12" style="padding-left: 0.7em;display: flex;align-items: center;">
                                    <button class="mb-2 mr-sm-2" data-toggle="modal" type="button" data-target="#cobrowse_logo_upload_modal" id="cobrowse_logo_upload_button">Change Logo
                                    </button>
                                  </div>
                                  <div class="col-md-6 col-sm-12">
                                    <img alt="Logo" src="/{{ access_token_obj.source_easyassist_cobrowse_logo }}" id="cobrowse-logo-image" style="height: 9em; display: inline-box; width: 100%;">
                                  </div>
                                </div>
                                {% else %}
                                <button data-toggle="modal" type="button" data-target="#cobrowse_logo_upload_modal" id="cobrowse_logo_upload_button">Upload Logo
                                </button>
                                {% endif %}
                              </td>
                            </tr> {% endcomment %}

                            <tr class="tr-flex-sm">
                              <th scope="row">Go-Live Date</th>
                              <td style="vertical-align: inherit;">
                                <input class="form-control datepicker" autocomplete="off" data-date-format="dd-mm-yyyy" id="go_live_date" value="{{access_token_obj.go_live_date|date:'d-m-Y'}}" style="width: 50%">
                              </td>
                            </tr>

                            <tr class="tr-flex-sm">
                              <th scope="row">Whitelisted domains <br>(e.g. www.xyz.com, www.abc.com)<br><br>Note: Add '*' to activate the script in all domains</th>
                              <td style="vertical-align: inherit;">
                                <textarea class="form-control" style="height:10em;" id="whitelisted_domain">{{ access_token_obj.whitelisted_domain }}</textarea>
                              </td>
                            </tr>

                            <tr class="tr-flex-sm">
                              <th scope="row">Password Prefix</th>
                              <td style="vertical-align: inherit;">
                                <input type="text" class="form-control" id="cobrowsing_default_password_prefix" value="{{access_token_obj.password_prefix}}" style="width:50%;" autocomplete="off">
                              </td>
                            </tr>

                            <tr>
                              <th scope="row">
                              Deploy Chatbot
                              <span data-toggle="tooltip" data-placement="bottom" title="Enabling this will allow you to integrate a chatbot to the cobrowsing console."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                {% if access_token_obj.deploy_chatbot_flag %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="deploy_chatbot_flag" checked >
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                                {% else %}
                                <label class="easyassist-option-switch">
                                  <input type="checkbox" id="deploy_chatbot_flag">
                                  <span class="easyassist-option-switch-slider round"></span>
                                </label>
                                {% endif%}
                              </td>
                            </tr>
                            <tr id="deploy_chatbot_url_section" class="tr-flex-sm">
                              <th scope="row">Chatbot CJS Script
                              <span data-toggle="tooltip" data-placement="bottom" title="Paste the CJS script of your chatbot."><i class="fas fa-info-circle"></i></span>
                              </th>
                              <td style="vertical-align: inherit;">
                                <input type="text" class="form-control" value="{{ access_token_obj.deploy_chatbot_url }}" id="deploy_chatbot_url" style="width:50%;" placeholder="Paste Chatbot CJS script" autocomplete="off">
                              </td>
                            </tr>

                            </tbody>
                        </table>
                      </div>
                    </div>
                    </div>
                  </div>

                  <!--  Cobrowse General Settings Body End -->

                <!-- General Save Save -->
               <p id="save-cobrowsing-meta-details-error-general"></p>
                <div class="col-md-12" style="padding: 0 1.25em;">
                  <button type="button" class="btn btn-success float-right btn-width-100" onclick="chip_product_category();chip_language_support();save_cobrowsing_meta_details_general(this)">Save</button>
                  <button type="button" class="btn btn-info float-left btn-width-100" data-toggle="modal" data-target="#reset_cobrowsing_meta_details_modal">Reset All</button>
                  <br><br>
                </div>

                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
    <!--  ADVANCED SETTINGS TAB -->
    <div class="tab-pane fade" id="pills-advanced-settings" role="tabpanel" aria-labelledby="pills-advanced-settings-tab">
      <div class="row">
        <div class="col-md-12">
          <div class="card shadow mb-4">
            <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
              <div class="row">
                <div class="col-sm-5" style="margin-top: 5px;">
                  <h6 class="m-0 font-weight-bold text-primary advance-setting-text">Masking Fields</h6>
                </div>
                <div class="col-sm-7" style="text-align: right;">
                  <button class="btn btn-info mb-2 mr-sm-2 admin-setting-btn-save-changes" data-toggle="modal" data-target="#add_new_masking_field_modal">Add Field</button>
                </div>
              </div>
            </div>
            <div class="card-body">
              {% if access_token_obj.obfuscated_fields.all %}
              <div class="table-responsive">
                <table class="table table-bordered" id="fieldTable" style="width: 100%; border-spacing: 0px;">
                  <thead>
                    <tr>
                      <th scope="col">Field Key</th>
                      <th scope="col">Field Value</th>
                      <th scope="col">Masking Type</th>
                      <th scope="col"></th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for field in access_token_obj.obfuscated_fields.all %}
                    <tr>
                      <td>
                        {{ field.key }}
                        <div style="position: absolute; right: 0; top: 20px;">
                            <a onclick="show_edit_masking_field_modal('{{ field.pk }}');" style="margin-top: -2rem;display: inline-block;margin-right: 0.5em;">
                                <svg class="svg-hide-on-desktop" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M17.0604 0.939564C18.3132 2.19232 18.3132 4.22343 17.0604 5.47618L6.33146 16.2052C6.08325 16.4534 5.77457 16.6325 5.43593 16.7249L0.849981 17.9756C0.348084 18.1124 -0.112448 17.6519 0.0244331 17.15L1.27515 12.5641C1.3675 12.2254 1.54664 11.9167 1.79484 11.6685L12.5238 0.939564C13.7766 -0.313188 15.8077 -0.313188 17.0604 0.939564ZM11.6547 3.7104L2.74567 12.6194C2.66293 12.7021 2.60322 12.805 2.57244 12.9179L1.6313 16.3687L5.08212 15.4276C5.195 15.3968 5.2979 15.3371 5.38063 15.2543L14.2894 6.34506L11.6547 3.7104ZM13.4746 1.89039L12.6049 2.75927L15.2396 5.39482L16.1096 4.52535C16.8372 3.79773 16.8372 2.61802 16.1096 1.89039C15.382 1.16277 14.2023 1.16277 13.4746 1.89039Z" fill="#0254D7"/>
                                </svg>
                            </a>
                            <a onclick="show_delete_masking_field_modal('{{ field.pk }}')" style="margin: -2rem 2rem 0px 0px; display: inline-block;margin-right: 0.5em">
                                <svg class="svg-hide-on-desktop"  width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 0C9.60341 0 10.913 1.19168 10.9958 2.69116L11 2.84211H15.4C15.7314 2.84211 16 3.0966 16 3.41053C16 3.6983 15.7743 3.93612 15.4814 3.97376L15.4 3.97895H14.5528L13.5769 15.3876C13.4506 16.8633 12.1496 18 10.5867 18H5.41328C3.85044 18 2.5494 16.8633 2.42309 15.3876L1.4464 3.97895H0.6C0.296243 3.97895 0.0452071 3.7651 0.00547714 3.48766L0 3.41053C0 3.12276 0.225723 2.88493 0.518584 2.84729L0.6 2.84211H5C5 1.27245 6.34315 0 8 0ZM13.3494 3.97895H2.65062L3.61917 15.2957C3.69495 16.1812 4.47557 16.8632 5.41328 16.8632H10.5867C11.5244 16.8632 12.305 16.1812 12.3808 15.2957L13.3494 3.97895ZM6.2 6.82105C6.50376 6.82105 6.75479 7.0349 6.79452 7.31234L6.8 7.38947V13.4526C6.8 13.7666 6.53137 14.0211 6.2 14.0211C5.89624 14.0211 5.64521 13.8072 5.60548 13.5298L5.6 13.4526V7.38947C5.6 7.07554 5.86863 6.82105 6.2 6.82105ZM9.8 6.82105C10.1038 6.82105 10.3548 7.0349 10.3945 7.31234L10.4 7.38947V13.4526C10.4 13.7666 10.1314 14.0211 9.8 14.0211C9.49624 14.0211 9.24521 13.8072 9.20548 13.5298L9.2 13.4526V7.38947C9.2 7.07554 9.46863 6.82105 9.8 6.82105ZM8 1.13684C7.04731 1.13684 6.26748 1.83802 6.20415 2.72535L6.2 2.84211H9.8L9.79585 2.72535C9.73252 1.83802 8.95269 1.13684 8 1.13684Z" fill="#EE2525"/>
                                </svg>
                            </a>
                        </div>
                      </td>
                      <td>{{ field.value }}</td>
                      {% if field.masking_type == "full-masking" %}
                      <td>Full Masking</td>
                      {% elif field.masking_type == "partial-masking" %}
                      <td>Partial Masking</td>
                      {% else %}
                      <td>No Masking</td>
                      {% endif %}
                      <td class="td-hide-on-small-device">
                        <div class="edit-delete-btn-class" style="visibility: hidden;display: flex; justify-content: center;">
                            <a data-toggle="tooltip" data-placement="bottom" title="Edit" style="cursor: pointer; margin-right: 1em;" onclick="show_edit_masking_field_modal('{{ field.pk }}');">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.2692 0.730772C14.2436 1.70513 14.2436 3.28489 13.2692 4.25925L4.92447 12.604C4.73142 12.7971 4.49134 12.9364 4.22794 13.0082L0.661097 13.981C0.270732 14.0875 -0.0874597 13.7293 0.0190035 13.3389L0.99178 9.77206C1.06361 9.50867 1.20294 9.26858 1.39599 9.07553L9.74075 0.730772C10.7151 -0.243591 12.2949 -0.243591 13.2692 0.730772ZM9.06478 2.88586L2.13552 9.81506C2.07117 9.87941 2.02473 9.95944 2.00078 10.0472L1.26879 12.7312L3.95276 11.9992C4.04056 11.9753 4.12059 11.9288 4.18494 11.8645L11.114 4.93504L9.06478 2.88586ZM10.4803 1.4703L9.80385 2.1461L11.853 4.19597L12.5297 3.51972C13.0956 2.95379 13.0956 2.03623 12.5297 1.4703C11.9638 0.904373 11.0462 0.904373 10.4803 1.4703Z" fill="#0254D7"/>
                                </svg>                                                    
                            </a>
                            <a data-toggle="tooltip" data-placement="bottom" title="Delete" style="cursor: pointer; margin-right: 1em;" onclick="show_delete_masking_field_modal('{{ field.pk }}')">
                                <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 0C8.40298 0 9.54889 1.05927 9.62136 2.39215L9.625 2.52632H13.475C13.7649 2.52632 14 2.75253 14 3.03158C14 3.28737 13.8025 3.49877 13.5462 3.53223L13.475 3.53684H12.7337L11.8798 13.6779C11.7693 14.9896 10.6309 16 9.26338 16H4.73662C3.36913 16 2.23072 14.9896 2.12021 13.6779L1.2656 3.53684H0.525C0.259213 3.53684 0.0395562 3.34676 0.0047925 3.10014L0 3.03158C0 2.77578 0.197508 2.56438 0.453761 2.53093L0.525 2.52632H4.375C4.375 1.13107 5.55025 0 7 0ZM11.6807 3.53684H2.31929L3.16677 13.5962C3.23308 14.3832 3.91613 14.9895 4.73662 14.9895H9.26338C10.0839 14.9895 10.7669 14.3832 10.8332 13.5962L11.6807 3.53684ZM5.425 6.06316C5.69079 6.06316 5.91044 6.25324 5.94521 6.49986L5.95 6.56842V11.9579C5.95 12.2369 5.71495 12.4632 5.425 12.4632C5.15921 12.4632 4.93956 12.2731 4.90479 12.0265L4.9 11.9579V6.56842C4.9 6.28937 5.13505 6.06316 5.425 6.06316ZM8.575 6.06316C8.84079 6.06316 9.06044 6.25324 9.09521 6.49986L9.1 6.56842V11.9579C9.1 12.2369 8.86495 12.4632 8.575 12.4632C8.30921 12.4632 8.08956 12.2731 8.05479 12.0265L8.05 11.9579V6.56842C8.05 6.28937 8.28505 6.06316 8.575 6.06316ZM7 1.01053C6.1664 1.01053 5.48405 1.63379 5.42863 2.42254L5.425 2.52632H8.575L8.57137 2.42254C8.51595 1.63379 7.8336 1.01053 7 1.01053Z" fill="#EE2525"/>
                                </svg>
                            </a>
                        </div>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
              {% else %}
              <div class="table-responsive">
                Masking fields not available
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="col-md-12">
          <div class="card shadow mb-4">
            <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
              <div class="row">
                <div class="col-sm-5" style="margin-top: 5px;">
                  <h6 class="m-0 font-weight-bold text-primary advance-setting-text">Search Tag Fields</h6>
                </div>
                <div class="col-sm-7" style="text-align: right;">
                  <button class="btn btn-info mb-2 mr-sm-2  admin-setting-btn-save-changes" data-toggle="modal" data-target="#add_new_search_tag_field_modal">Add Field</button>
                </div>
              </div>
            </div>
            <div class="card-body">
              {% if access_token_obj.search_fields.all %}
              <div class="table-responsive">
                <table class="table table-bordered" id="fieldTable" style="width: 100%; border-spacing: 0px;">
                  <thead>
                    <tr>
                      <th scope="col">Tag</th>
                      <th scope="col">Tag Label</th>
                      <th scope="col">Tag Key</th>
                      <th scope="col">Tag Value</th>
                      <th scope="col">Tag Type</th>
                      <th scope="col">Unique Identifier</th>
                      <th scope="col"></th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for field in access_token_obj.search_fields.all %}
                      {% if not field.is_deleted %}
                      <tr>
                        <td>
                          {{ field.tag }}
                          <div style="position: absolute; right: 0; top: 20px;">
                              <a onclick="show_search_tag_field_modal('{{ field.pk }}');" style="margin-top: -2rem;display: inline-block;margin-right: 0.5em;">
                                  <svg class="svg-hide-on-desktop" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M17.0604 0.939564C18.3132 2.19232 18.3132 4.22343 17.0604 5.47618L6.33146 16.2052C6.08325 16.4534 5.77457 16.6325 5.43593 16.7249L0.849981 17.9756C0.348084 18.1124 -0.112448 17.6519 0.0244331 17.15L1.27515 12.5641C1.3675 12.2254 1.54664 11.9167 1.79484 11.6685L12.5238 0.939564C13.7766 -0.313188 15.8077 -0.313188 17.0604 0.939564ZM11.6547 3.7104L2.74567 12.6194C2.66293 12.7021 2.60322 12.805 2.57244 12.9179L1.6313 16.3687L5.08212 15.4276C5.195 15.3968 5.2979 15.3371 5.38063 15.2543L14.2894 6.34506L11.6547 3.7104ZM13.4746 1.89039L12.6049 2.75927L15.2396 5.39482L16.1096 4.52535C16.8372 3.79773 16.8372 2.61802 16.1096 1.89039C15.382 1.16277 14.2023 1.16277 13.4746 1.89039Z" fill="#0254D7"/>
                                  </svg>
                              </a>
                              <a onclick="show_delete_search_tag_field_modal('{{ field.pk }}')" style="margin: -2rem 2rem 0px 0px; display: inline-block;margin-right: 0.5em">
                                  <svg class="svg-hide-on-desktop"  width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M8 0C9.60341 0 10.913 1.19168 10.9958 2.69116L11 2.84211H15.4C15.7314 2.84211 16 3.0966 16 3.41053C16 3.6983 15.7743 3.93612 15.4814 3.97376L15.4 3.97895H14.5528L13.5769 15.3876C13.4506 16.8633 12.1496 18 10.5867 18H5.41328C3.85044 18 2.5494 16.8633 2.42309 15.3876L1.4464 3.97895H0.6C0.296243 3.97895 0.0452071 3.7651 0.00547714 3.48766L0 3.41053C0 3.12276 0.225723 2.88493 0.518584 2.84729L0.6 2.84211H5C5 1.27245 6.34315 0 8 0ZM13.3494 3.97895H2.65062L3.61917 15.2957C3.69495 16.1812 4.47557 16.8632 5.41328 16.8632H10.5867C11.5244 16.8632 12.305 16.1812 12.3808 15.2957L13.3494 3.97895ZM6.2 6.82105C6.50376 6.82105 6.75479 7.0349 6.79452 7.31234L6.8 7.38947V13.4526C6.8 13.7666 6.53137 14.0211 6.2 14.0211C5.89624 14.0211 5.64521 13.8072 5.60548 13.5298L5.6 13.4526V7.38947C5.6 7.07554 5.86863 6.82105 6.2 6.82105ZM9.8 6.82105C10.1038 6.82105 10.3548 7.0349 10.3945 7.31234L10.4 7.38947V13.4526C10.4 13.7666 10.1314 14.0211 9.8 14.0211C9.49624 14.0211 9.24521 13.8072 9.20548 13.5298L9.2 13.4526V7.38947C9.2 7.07554 9.46863 6.82105 9.8 6.82105ZM8 1.13684C7.04731 1.13684 6.26748 1.83802 6.20415 2.72535L6.2 2.84211H9.8L9.79585 2.72535C9.73252 1.83802 8.95269 1.13684 8 1.13684Z" fill="#EE2525"/>
                                  </svg>
                              </a>
                          </div>
                        </td>
                        <td>{{ field.tag_label }}</td>
                        <td>{{ field.tag_key }}</td>
                        <td>{{ field.tag_value }}</td>
                        <td>{{ field.tag_type }}</td>
                        {% if field.unique_identifier %}
                          <td>Yes</td>
                        {% else %}
                          <td>No</td>
                        {% endif %}
                        <td class="td-hide-on-small-device">
                          <div class="edit-delete-btn-class" style="visibility: hidden;display: flex; ">
                              <a data-toggle="tooltip" data-placement="bottom" title="Edit" style="cursor: pointer; margin-right: 1em;" onclick="show_search_tag_field_modal('{{ field.pk }}');">
                                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M13.2692 0.730772C14.2436 1.70513 14.2436 3.28489 13.2692 4.25925L4.92447 12.604C4.73142 12.7971 4.49134 12.9364 4.22794 13.0082L0.661097 13.981C0.270732 14.0875 -0.0874597 13.7293 0.0190035 13.3389L0.99178 9.77206C1.06361 9.50867 1.20294 9.26858 1.39599 9.07553L9.74075 0.730772C10.7151 -0.243591 12.2949 -0.243591 13.2692 0.730772ZM9.06478 2.88586L2.13552 9.81506C2.07117 9.87941 2.02473 9.95944 2.00078 10.0472L1.26879 12.7312L3.95276 11.9992C4.04056 11.9753 4.12059 11.9288 4.18494 11.8645L11.114 4.93504L9.06478 2.88586ZM10.4803 1.4703L9.80385 2.1461L11.853 4.19597L12.5297 3.51972C13.0956 2.95379 13.0956 2.03623 12.5297 1.4703C11.9638 0.904373 11.0462 0.904373 10.4803 1.4703Z" fill="#0254D7"/>
                                  </svg>                                                    
                              </a>
                              <a data-toggle="tooltip" data-placement="bottom" title="Delete" style="cursor: pointer; margin-right: 1em;" onclick="show_delete_search_tag_field_modal('{{ field.pk }}')">
                                  <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M7 0C8.40298 0 9.54889 1.05927 9.62136 2.39215L9.625 2.52632H13.475C13.7649 2.52632 14 2.75253 14 3.03158C14 3.28737 13.8025 3.49877 13.5462 3.53223L13.475 3.53684H12.7337L11.8798 13.6779C11.7693 14.9896 10.6309 16 9.26338 16H4.73662C3.36913 16 2.23072 14.9896 2.12021 13.6779L1.2656 3.53684H0.525C0.259213 3.53684 0.0395562 3.34676 0.0047925 3.10014L0 3.03158C0 2.77578 0.197508 2.56438 0.453761 2.53093L0.525 2.52632H4.375C4.375 1.13107 5.55025 0 7 0ZM11.6807 3.53684H2.31929L3.16677 13.5962C3.23308 14.3832 3.91613 14.9895 4.73662 14.9895H9.26338C10.0839 14.9895 10.7669 14.3832 10.8332 13.5962L11.6807 3.53684ZM5.425 6.06316C5.69079 6.06316 5.91044 6.25324 5.94521 6.49986L5.95 6.56842V11.9579C5.95 12.2369 5.71495 12.4632 5.425 12.4632C5.15921 12.4632 4.93956 12.2731 4.90479 12.0265L4.9 11.9579V6.56842C4.9 6.28937 5.13505 6.06316 5.425 6.06316ZM8.575 6.06316C8.84079 6.06316 9.06044 6.25324 9.09521 6.49986L9.1 6.56842V11.9579C9.1 12.2369 8.86495 12.4632 8.575 12.4632C8.30921 12.4632 8.08956 12.2731 8.05479 12.0265L8.05 11.9579V6.56842C8.05 6.28937 8.28505 6.06316 8.575 6.06316ZM7 1.01053C6.1664 1.01053 5.48405 1.63379 5.42863 2.42254L5.425 2.52632H8.575L8.57137 2.42254C8.51595 1.63379 7.8336 1.01053 7 1.01053Z" fill="#EE2525"/>
                                  </svg>
                              </a>
                          </div>
                        </td>
                      </tr>
                      {% endif %}
                  {% endfor %}
                </tbody>
              </table>
              </div>
              {% else %}
              <div class="table-responsive">
                Search tag fields not available
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="col-md-12">
          <div class="card shadow mb-4">
            <div class="card-header py-3" style="padding: 0.5em 1.25em 0.5em 1.25em !important;">
              <div class="row">
                <div class="col-sm-5" style="margin-top: 5px;">
                  <h6 class="m-0 font-weight-bold text-primary advance-setting-text">Auto-fetch Fields</h6>
                </div>
                <div class="col-sm-7" style="text-align: right;">
                  <button class="btn btn-info mb-2 mr-sm-2 admin-setting-btn-save-changes" data-toggle="modal" data-target="#add_new_auto_fetch_field_modal">Add Field</button>
                </div>
              </div>
            </div>
            <div class="card-body">
              {% if access_token_obj.auto_fetch_fields.all %}
              <div class="table-responsive">
                <table class="table table-bordered" id="fieldTable" style="width: 100%; border-spacing: 0px;">
                  <thead>
                    <tr>
                      <th scope="col">Fetch Field Key</th>
                      <th scope="col">Fetch Field Value</th>
                      <th scope="col">Modal Field Key</th>
                      <th scope="col">Modal Field Value</th>
                      <th scope="col"></th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for field in access_token_obj.auto_fetch_fields.all %}
                    <tr>
                      <td>
                        {{ field.fetch_field_key }}
                        <div style="position: absolute; right: 0; top: 20px;">
                            <a onclick="show_edit_auto_fetch_field_modal('{{ field.pk }}');" style="margin-top: -2rem;display: inline-block;margin-right: 0.5em;">
                                <svg class="svg-hide-on-desktop" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M17.0604 0.939564C18.3132 2.19232 18.3132 4.22343 17.0604 5.47618L6.33146 16.2052C6.08325 16.4534 5.77457 16.6325 5.43593 16.7249L0.849981 17.9756C0.348084 18.1124 -0.112448 17.6519 0.0244331 17.15L1.27515 12.5641C1.3675 12.2254 1.54664 11.9167 1.79484 11.6685L12.5238 0.939564C13.7766 -0.313188 15.8077 -0.313188 17.0604 0.939564ZM11.6547 3.7104L2.74567 12.6194C2.66293 12.7021 2.60322 12.805 2.57244 12.9179L1.6313 16.3687L5.08212 15.4276C5.195 15.3968 5.2979 15.3371 5.38063 15.2543L14.2894 6.34506L11.6547 3.7104ZM13.4746 1.89039L12.6049 2.75927L15.2396 5.39482L16.1096 4.52535C16.8372 3.79773 16.8372 2.61802 16.1096 1.89039C15.382 1.16277 14.2023 1.16277 13.4746 1.89039Z" fill="#0254D7"/>
                                </svg>
                            </a>
                            <a onclick="show_delete_auto_fetch_field_modal('{{ field.pk }}')" style="margin: -2rem 2rem 0px 0px; display: inline-block;margin-right: 0.5em">
                                <svg class="svg-hide-on-desktop"  width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 0C9.60341 0 10.913 1.19168 10.9958 2.69116L11 2.84211H15.4C15.7314 2.84211 16 3.0966 16 3.41053C16 3.6983 15.7743 3.93612 15.4814 3.97376L15.4 3.97895H14.5528L13.5769 15.3876C13.4506 16.8633 12.1496 18 10.5867 18H5.41328C3.85044 18 2.5494 16.8633 2.42309 15.3876L1.4464 3.97895H0.6C0.296243 3.97895 0.0452071 3.7651 0.00547714 3.48766L0 3.41053C0 3.12276 0.225723 2.88493 0.518584 2.84729L0.6 2.84211H5C5 1.27245 6.34315 0 8 0ZM13.3494 3.97895H2.65062L3.61917 15.2957C3.69495 16.1812 4.47557 16.8632 5.41328 16.8632H10.5867C11.5244 16.8632 12.305 16.1812 12.3808 15.2957L13.3494 3.97895ZM6.2 6.82105C6.50376 6.82105 6.75479 7.0349 6.79452 7.31234L6.8 7.38947V13.4526C6.8 13.7666 6.53137 14.0211 6.2 14.0211C5.89624 14.0211 5.64521 13.8072 5.60548 13.5298L5.6 13.4526V7.38947C5.6 7.07554 5.86863 6.82105 6.2 6.82105ZM9.8 6.82105C10.1038 6.82105 10.3548 7.0349 10.3945 7.31234L10.4 7.38947V13.4526C10.4 13.7666 10.1314 14.0211 9.8 14.0211C9.49624 14.0211 9.24521 13.8072 9.20548 13.5298L9.2 13.4526V7.38947C9.2 7.07554 9.46863 6.82105 9.8 6.82105ZM8 1.13684C7.04731 1.13684 6.26748 1.83802 6.20415 2.72535L6.2 2.84211H9.8L9.79585 2.72535C9.73252 1.83802 8.95269 1.13684 8 1.13684Z" fill="#EE2525"/>
                                </svg>
                            </a>
                        </div>
                      </td>
                      <td>{{ field.fetch_field_value }}</td>
                      <td>{{ field.modal_field_key }}</td>
                      <td>{{ field.modal_field_value }}</td>
                      <td class="td-hide-on-small-device">
                        <div class="edit-delete-btn-class" style="visibility: hidden;display: flex; justify-content: center;">
                            <a data-toggle="tooltip" data-placement="bottom" title="Edit" style="cursor: pointer; margin-right: 1em;" onclick="show_edit_auto_fetch_field_modal('{{ field.pk }}');">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.2692 0.730772C14.2436 1.70513 14.2436 3.28489 13.2692 4.25925L4.92447 12.604C4.73142 12.7971 4.49134 12.9364 4.22794 13.0082L0.661097 13.981C0.270732 14.0875 -0.0874597 13.7293 0.0190035 13.3389L0.99178 9.77206C1.06361 9.50867 1.20294 9.26858 1.39599 9.07553L9.74075 0.730772C10.7151 -0.243591 12.2949 -0.243591 13.2692 0.730772ZM9.06478 2.88586L2.13552 9.81506C2.07117 9.87941 2.02473 9.95944 2.00078 10.0472L1.26879 12.7312L3.95276 11.9992C4.04056 11.9753 4.12059 11.9288 4.18494 11.8645L11.114 4.93504L9.06478 2.88586ZM10.4803 1.4703L9.80385 2.1461L11.853 4.19597L12.5297 3.51972C13.0956 2.95379 13.0956 2.03623 12.5297 1.4703C11.9638 0.904373 11.0462 0.904373 10.4803 1.4703Z" fill="#0254D7"/>
                                </svg>                                                    
                            </a>
                            <a data-toggle="tooltip" data-placement="bottom" title="Delete" style="cursor: pointer; margin-right: 1em;" onclick="show_delete_auto_fetch_field_modal('{{ field.pk }}')">
                                <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 0C8.40298 0 9.54889 1.05927 9.62136 2.39215L9.625 2.52632H13.475C13.7649 2.52632 14 2.75253 14 3.03158C14 3.28737 13.8025 3.49877 13.5462 3.53223L13.475 3.53684H12.7337L11.8798 13.6779C11.7693 14.9896 10.6309 16 9.26338 16H4.73662C3.36913 16 2.23072 14.9896 2.12021 13.6779L1.2656 3.53684H0.525C0.259213 3.53684 0.0395562 3.34676 0.0047925 3.10014L0 3.03158C0 2.77578 0.197508 2.56438 0.453761 2.53093L0.525 2.52632H4.375C4.375 1.13107 5.55025 0 7 0ZM11.6807 3.53684H2.31929L3.16677 13.5962C3.23308 14.3832 3.91613 14.9895 4.73662 14.9895H9.26338C10.0839 14.9895 10.7669 14.3832 10.8332 13.5962L11.6807 3.53684ZM5.425 6.06316C5.69079 6.06316 5.91044 6.25324 5.94521 6.49986L5.95 6.56842V11.9579C5.95 12.2369 5.71495 12.4632 5.425 12.4632C5.15921 12.4632 4.93956 12.2731 4.90479 12.0265L4.9 11.9579V6.56842C4.9 6.28937 5.13505 6.06316 5.425 6.06316ZM8.575 6.06316C8.84079 6.06316 9.06044 6.25324 9.09521 6.49986L9.1 6.56842V11.9579C9.1 12.2369 8.86495 12.4632 8.575 12.4632C8.30921 12.4632 8.08956 12.2731 8.05479 12.0265L8.05 11.9579V6.56842C8.05 6.28937 8.28505 6.06316 8.575 6.06316ZM7 1.01053C6.1664 1.01053 5.48405 1.63379 5.42863 2.42254L5.425 2.52632H8.575L8.57137 2.42254C8.51595 1.63379 7.8336 1.01053 7 1.01053Z" fill="#EE2525"/>
                                </svg>
                            </a>
                        </div>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
              {% else %}
              <div class="table-responsive">
                Auto-fetch fields not available
              </div>
              {% endif %}
            </div>
          </div>
        </div>

        <div class="col-md-12">
          <div class="card shadow mb-4">
            <div class="card-header py-3">
              <div class="row">
                <div class="col-sm-5" style="margin-top: 5px;">
                  <h6 class="m-0 font-weight-bold text-primary advance-setting-text">Other Settings</h6>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-borderless gy-settings-table" style="margin-bottom: 0;">
                    <tbody>
                      <tr style="border: none;">
                        <th scope="row">Masking PII</th>
                        <td style="vertical-align: inherit; border: none !important;">
                          <label class="easyassist-option-switch">
                            {% if access_token_obj.enable_masking_pii_data %}
                              <input type="checkbox" id="enable_masking_pii_data"  checked onclick="send_otp_for_masking_pii_data(this, event);">
                              <span class="easyassist-option-switch-slider round"></span>
                            {% else %}
                              <input type="checkbox" id="enable_masking_pii_data" onclick="enable_masking_of_pii_data(this);">
                              <span class="easyassist-option-switch-slider round"></span>
                            {% endif %}
                          </label>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="tab-pane fade" id="pills-extension-settings" role="tabpanel" aria-labelledby="pills-extension-settings-tab">
      <div class="row">
        <div class="col-md-6">
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="inputGroup-sizing-sm">Extension Name</span>
            </div>
            {% if chrome_extension_obj.extension_name %}
              <input type="text" style="background-color: white !important;" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" placeholder="CognoAI" value={{ chrome_extension_obj.extension_name }} id="extension-name" autocomplete="off">
            {% else %}
              <input type="text" style="background-color: white !important;" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" placeholder="CognoAI" id="extension-name" autocomplete="off">
            {% endif %}
          </div>
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="inputGroup-sizing-sm">Deploy Links</span>
            </div>
             {% if chrome_extension_obj.deploy_links %}
                <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" id="extension-deploy-domains" value="{{ chrome_extension_obj.deploy_links }}" autocomplete="off">
             {% else %}
                <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" id="extension-deploy-domains" placeholder="www.example.com, www.google.com" autocomplete="off">
              {% endif %}
          </div>
          <div class="input-group input-group-sm">
            <p style="color:green;" id="save-extension-error"></p>
          </div>
          <div class="input-group input-group-sm" id="extension_download">
            {% if chrome_extension_obj.extension_path %}
              <a href="{{ chrome_extension_obj.extension_path }}" class="btn btn-info admin-setting-btn">Download Extension</a>
            {% endif %}
          </div>
          <div class="input-group input-group-sm">
            <p style="color:green;"></p>
          </div>
        </div>

        <div class="col-md-12" id="save-btn-admin">
          <button type="button" class="btn btn-success admin-setting-btn" onclick="save_extension(this, '{{ access_token_obj.key }}' )">Save</button>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<div class="modal fade" id="otp_verification_masking_pi_modal" tabindex="-1" role="dialog" aria-labelledby="add_new_masking_field_modal_modal_label" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="add_new_masking_field_modal_modal_label">OTP Verification</h5>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12 ">

                        <div class="col-sm-12 mb-sm mb-4">
                            <div class="switch-off-toggle-info-div">
                                To switch off the Masking PII toggle you need to enter the 6-digit OTP code.
                            </div>
                        </div>
                        <div class="col-sm-12 mb-sm mb-4">
                            <div class="otp-send-to-div">
                                OTP is send to 
                                {% for email_id in email_ids %}
                                  {% if not forloop.last %}
                                    <a href="#">{{ email_id }}, </a>
                                  {% else %}
                                    <a href="#">{{ email_id }}</a>
                                  {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        <div class="col-sm-12 mb-4 px-5 px-mx-sm">
                            <div class="d-flex flex-row mx-5 padding-sm">
                                <input type="text" class="pii-data-otp" autofocus>
                                <input type="text" class="pii-data-otp">
                                <input type="text" class="pii-data-otp">
                                <input type="text" class="pii-data-otp">
                                <input type="text" class="pii-data-otp">
                                <input type="text" class="pii-data-otp" style="margin-right: 0px !important;"></div>
                        </div>
                        <div class="col-sm-12">
                            <div class="resend-otp-div">
                                Didn’t receive the OTP? <a href="#" style="font-weight: bold;" onclick="resend_pii_data_otp(this);">RESEND OTP</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border: none;">
                <button class="btn btn-text" type="button" data-dismiss="modal" style="border: none !important; color: #0254D7 !important;">Cancel</button>
                <button class="btn btn-success" type="button" onclick="verify_pii_data_otp(this)">Submit</button>
            </div>
        </div>

    </div>
</div>

{% for field in access_token_obj.obfuscated_fields.all %}
<div class="modal fade" id="edit_masking_field_modal_{{ field.pk }}" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Masking Field</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-6 mb-sm">
            <label class="sr-only" for="edit-masking-field-key-{{field.pk}}">Masking Field Key</label>
            <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-masking-field-key-{{field.pk}}" placeholder="Masking Field Key" value="{{field.key}}">
          </div>
          <div class="col-sm-6 mb-sm">
            <label class="sr-only" for="edit-masking-field-value-{{field.pk}}">Masking Field Value</label>
            <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-masking-field-value-{{field.pk}}" placeholder="Masking Field Value"  value="{{field.value}}">
          </div>
          <div class="col-sm-6">
            <select class="custom-select" id="edit-masking-type-{{ field.pk }}" style="width: 100%;">
              {% if field.masking_type == "no-masking" %}
                <option value="no-masking" selected>No Masking</option>
              {% else %}
                <option value="no-masking">No Masking</option>
              {% endif %}

              {% if field.masking_type == "partial-masking" %}
                <option value="partial-masking" selected>Partial Masking</option>
              {% else %}
                <option value="partial-masking">Partial Masking</option>
              {% endif %}

              {% if field.masking_type == "full-masking" %}
                <option value="full-masking" selected>Full Masking</option>
              {% else %}
                <option value="full-masking">Full Masking</option>
              {% endif %}
            </select>
          </div>
        </div>
        <p id="edit-masking-field-error-{{ field.pk }}" style="display: none; margin: 1em 0 0 0;"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-success" onclick="save_masking_field(this, '{{ field.pk }}')">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="delete_masking_field_modal_{{ field.pk }}" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Delete Masking Field</h5>
      </div>
      <div class="modal-body">
            Do you really want to delete this field?
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-danger" onclick="delete_masking_field(this, '{{ field.pk }}')">Delete</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}


<div class="modal fade" id="add_new_masking_field_modal" tabindex="-1" role="dialog" aria-labelledby="add_new_masking_field_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="add_new_masking_field_modal_modal_label">Add Masking Field</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <form class="form-inline" action="javascript:void(0)">
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-masking-field-key">Masking Field Key</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-masking-field-key" placeholder="Masking Field Key">
              </div>
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-masking-field-value">Masking Field Value</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-masking-field-value" placeholder="Masking Field Value">
              </div>
              <div class="col-sm-6">
                <select class="custom-select" id="inline-form-input-masking-type" style="width: 100%;">
                  <option selected="" value="">Choose masking type</option>
                  <option value="no-masking">No Masking</option>
                  <option value="partial-masking">Partial Masking</option>
                  <option value="full-masking">Full Masking</option>
                </select>
              </div>
            </form>
            <p id="add-new-masking-field-error"></p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-success" onclick="add_new_masking_field(this)">Add</button>
      </div>
    </div>
  </div>
</div>

{% for field in access_token_obj.search_fields.all %}
<div class="modal fade" id="edit_search_tag_field_modal_{{ field.pk }}" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Search Tag Field</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-6 mb-sm">
            <select class="custom-select" id="edit-search-tag-{{ field.pk }}" style="width: 100%;">
              <option selected="" value="">Choose tag</option>
              {% if field.tag == "input" %}
                <option value="input" selected>input</option>
              {% else %}
                <option value="input">input</option>
              {% endif %}

              {% if field.tag == "textarea" %}
                <option value="textarea" selected>textarea</option>
              {% else %}
                <option value="textarea">textarea</option>
              {% endif %}

              {% if field.tag == "select" %}
                <option value="select" selected>select</option>
              {% else %}
                <option value="select">select</option>
              {% endif %}
            </select>
          </div>
          <div class="col-sm-6 mb-sm">
            <label class="sr-only" for="edit-search-tag-label-{{ field.pk }}">Tag Label</label>
            <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-search-tag-label-{{ field.pk }}" placeholder="Tag Label" value="{{ field.tag_label }}">
          </div>
          <div class="col-sm-6 mb-sm">
            <label class="sr-only" for="edit-search-tag-key-{{ field.pk }}">Tag Key</label>
            <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-search-tag-key-{{ field.pk }}" placeholder="Tag Key" value="{{ field.tag_key }}">
          </div>
          <div class="col-sm-6 mb-sm">
            <label class="sr-only" for="edit-search-tag-value-{{ field.pk }}">Tag Value</label>
            <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-search-tag-value-{{ field.pk }}" placeholder="Tag Value" value="{{ field.tag_value }}">
          </div>
          <div class="col-sm-6">
            <select class="custom-select" id="edit-search-tag-type-{{ field.pk }}" style="width: 100%;">
              <option selected="" value="">Choose tag type</option>
              {% if field.tag_type == "primary" %}
                <option value="primary" selected>primary</option>
              {% else %}
                <option value="primary">primary</option>
              {% endif %}

              {% if field.tag_type == "secondary" %}
                <option value="secondary" selected>secondary</option>
              {% else %}
                <option value="secondary">secondary</option>
              {% endif %}
            </select>
          </div>
          <div class="col-sm-12">
            <div class="d-flex align-items-center mt-4 unique-identifier-heading">
              Mark as Unique Identifier
              <span class="ml-2" data-toggle="tooltip" data-placement="bottom" title="Marking this field as unique identifier would treat user details generated from this field as a unique detail to display unique or repeated customer count in outbound analytics."><i class="fas fa-info-circle"></i></span>
              {% if field.unique_identifier %}
                <label class="easyassist-option-switch mt-0 ml-3">
                    <input type="checkbox" id="edit-unique-identifier-{{ field.pk }}"  checked>
                    <span class="easyassist-option-switch-slider round "></span>
                </label>
              {% else %}
                <label class="easyassist-option-switch mt-0 ml-3">
                  <input type="checkbox" id="edit-unique-identifier-{{ field.pk }}">
                  <span class="easyassist-option-switch-slider round "></span>
                </label>
              {% endif %}
            </div>
          </div>
          <div class="message-container">
            <p class="mb-0">Editing the unique identifier toggle value will affect unique and repeated customers data in outbound analytics and there are high chances of data mismatch.</p>
          </div>
        </div>
        <p id="edit-search-tag-field-error-{{ field.pk }}" style="display: none; margin: 1em 0 0 0;"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-success" onclick="save_search_tag_field(this, '{{ field.pk }}')">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="delete_search_tag_field_field_modal_{{ field.pk }}" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Delete Search Tag Field</h5>
      </div>
      <div class="modal-body">
            Do you really want to delete this field?
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-danger" onclick="delete_search_tag_field(this, '{{ field.pk }}')">Delete</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}

<div class="modal fade" id="add_new_search_tag_field_modal" tabindex="-1" role="dialog" aria-labelledby="add_new_search_tag_field_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="add_new_search_tag_field_modal_modal_label">Add Search Tag Field</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <form class="form-inline" action="javascript:void(0)">
              <div class="col-sm-6 mb-sm">
                <select class="custom-select" id="inline-form-input-search-tag" style="width: 100%;">
                  <option selected="" value="">Choose tag</option>
                  <option value="input">input</option>
                  <option value="textarea">textarea</option>
                  <option value="select">select</option>
                </select>
              </div>
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-search-tag-label">Tag Label</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-search-tag-label" placeholder="Tag Label">
              </div>
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-search-tag-key">Tag Key</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-search-tag-key" placeholder="Tag Key">
              </div>
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-search-tag-value">Tag Value</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-search-tag-value" placeholder="Tag Value">
              </div>
              <div class="col-sm-6">
                <select class="custom-select" id="inline-form-input-search-tag-type" style="width: 100%;">
                  <option selected="" value="">Choose tag type</option>
                  <option value="primary">primary</option>
                  <option value="secondary">secondary</option>
                </select>
              </div>
              <div class="col-sm-12">
                <div class="d-flex align-items-center mt-4 unique-identifier-heading">
                  Mark as Unique Identifier
                  <span class="ml-2" data-toggle="tooltip" data-placement="bottom" title="Marking this field as unique identifier would treat user details generated from this field as a unique detail to display unique or repeated customer count in outbound analytics."><i class="fas fa-info-circle"></i></span>
                  <label class="easyassist-option-switch mt-0 ml-3">
                      <input type="checkbox" id="enable-mark-unique-identifier"  checked>
                      <span class="easyassist-option-switch-slider round "></span>
                  </label>
                </div>
              </div>
              <div class="message-container">
                <p class="mb-0">Adding a search tag keeping the unique identifier toggle disabled, would treat all customers coming from that tag as unique customers even if he/she joins a session with the same data more than once.</p>
              </div>
            </form>
            <p id="add-new-search-tag-field-error"></p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-success" onclick="add_new_search_tag_field(this)">Add</button>
      </div>
    </div>
  </div>
</div>

{% for field in access_token_obj.auto_fetch_fields.all %}
<div class="modal fade" id="edit_auto_fetch_field_modal_{{ field.pk }}" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Auto Fetch Field</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-6 mb-sm">
              <label class="sr-only" for="edit-auto-fetch-field-key-{{ field.pk }}">Fetch Field Key</label>
              <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-auto-fetch-field-key-{{ field.pk }}" placeholder="Fetch Field Key" value="{{ field.fetch_field_key }}">
            </div>
            <div class="col-sm-6 mb-sm">
              <label class="sr-only" for="edit-auto-fetch-field-value-{{ field.pk }}">Fetch Field Value</label>
              <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-auto-fetch-field-value-{{ field.pk }}" placeholder="Fetch Field Value" value="{{ field.fetch_field_value }}">
            </div>
            <div class="col-sm-6 mb-sm">
              <label class="sr-only" for="edit-auto-fetch-field-modal-key-{{ field.pk }}">Modal Field Key</label>
              <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-auto-fetch-field-modal-key-{{ field.pk }}" placeholder="Modal Field Key" value="{{ field.modal_field_key }}">
            </div>
            <div class="col-sm-6">
              <label class="sr-only" for="edit-auto-fetch-field-modal-value-{{ field.pk }}">Modal Field Value</label>
              <input type="text" style="width: 100%;" class="form-control mb-2" id="edit-auto-fetch-field-modal-value-{{ field.pk }}" placeholder="Modal Field Value" value="{{ field.modal_field_value }}">
            </div>
        </div>
        <p id="edit-auto-fetch-field-error-{{ field.pk }}" style="display: none; margin: 1em 0 0 0;"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-success" onclick="save_auto_fetch_field(this, '{{ field.pk }}')">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="delete_auto_fetch_field_field_modal_{{ field.pk }}" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Delete Search Tag Field</h5>
      </div>
      <div class="modal-body">
            Do you really want to delete this field?
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-danger" onclick="delete_auto_fetch_field(this, '{{ field.pk }}')">Delete</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}

<div class="modal fade" id="add_new_auto_fetch_field_modal" tabindex="-1" role="dialog" aria-labelledby="add_new_auto_fetch_field_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="add_new_auto_fetch_field_modal_modal_label">Add Auto Fetch Field</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <form class="form-inline" action="javascript:void(0)">
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-fetch-field-key">Fetch Field Key</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-fetch-field-key" placeholder="Fetch Field Key">
              </div>
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-fetch-field-value"">Fetch Field Value</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-fetch-field-value"" placeholder="Fetch Field Value">
              </div>
              <div class="col-sm-6 mb-sm">
                <label class="sr-only" for="inline-form-input-modal-field-key">Modal Field Key</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-modal-field-key" placeholder="Modal Field Key">
              </div>
              <div class="col-sm-6">
                <label class="sr-only" for="inline-form-input-modal-field-value">Modal Field Value</label>
                <input type="text" style="width: 100%;" class="form-control mb-2" id="inline-form-input-modal-field-value" placeholder="Modal Field Value">
              </div>
            </form>
            <p id="add-new-auto-fetch-field-error"></p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-success" onclick="add_auto_fetch_field(this)">Add</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="cobrowse_delete_upload_modal" tabindex="-1" role="dialog" aria-labelledby="document_upload_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="document_upload_modal_modal_label">Delete Logo</h5>
      </div>
      <div class="modal-body">
          <div class="row">
              <div class="col-sm-12">
                <p>Are you sure, you want to delete the logo?<p>
              </div>
          </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-danger" onclick="delete_cobrowse_logo()">Delete</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade upload_file_modal" id="cobrowse_logo_upload_modal" tabindex="-1" role="dialog" aria-labelledby="document_upload_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Upload Logo</h5>
      </div>
      <div class="modal-body">
          <div class="row">
              <div class="col-sm-12">
                <label for="cobrowse_logo_input" class="custom-file-upload">
                    Choose File
                </label>
                <input type="file" id="cobrowse_logo_input" class="form-control" name="" style="display: none !important;" accept=".png, .jpg, .jpeg, .PNG">
              </div>
              <div class="col-sm-11">
                  <div class="col-md-12 col-sm-12 modal-upload-file mt-4" style="display: none;" id="cobrowse_image_file_upload_bar">
                    <div class="col-md-1 col-sm-1 width-auto-sm pd-mg">
                      <svg width="24" height="32" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0V8.50667C14 9.33333 14.6667 10 15.4933 10H24V30.5067C24 31.3333 23.3333 32 22.5067 32H1.49333C0.666665 32 0 31.3333 0 30.5067V1.49333C0 0.666667 0.666665 0 1.49333 0H14ZM17.4404 0.426667L23.5471 6.56C23.8404 6.85333 24.0004 7.22667 24.0004 7.62667V8H16.0004V0H16.3737C16.7737 0 17.147 0.16 17.4404 0.426667Z" fill="#ef827f"/>
                        <defs>
                          <linearGradient id="paint0_linear" x1="2.39111" y1="3" x2="23.3908" y2="32.0002" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#E08F8D"/>
                            <stop offset="1" stop-color="#FE736F"/>
                          </linearGradient>
                        </defs>
                      </svg>
                    </div>
                    <div class="col-md-10 col-sm-10 file-name-container">
                      <div class="file-name-div">
                      </div>
                      <div class="progress">
                        <div class="indeterminate"></div>
                      </div>
                    </div>
                    <div class="col-md-1 col-sm-1 width-auto-sm pr-sm-0">
                      <button class="upload-file-cross-btn" type="button" onclick="remove_uploaded_file();">
                        <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.48438 4.98438L9.85938 1.64062C10.0469 1.45312 10.0469 1.10938 9.85938 0.921875L9.07812 0.140625C8.89062 -0.046875 8.54688 -0.046875 8.35938 0.140625L5.01562 3.51562L1.64062 0.140625C1.45312 -0.046875 1.10938 -0.046875 0.921875 0.140625L0.140625 0.921875C-0.046875 1.10938 -0.046875 1.45312 0.140625 1.64062L3.51562 4.98438L0.140625 8.35938C-0.046875 8.54688 -0.046875 8.89062 0.140625 9.07812L0.921875 9.85938C1.10938 10.0469 1.45312 10.0469 1.64062 9.85938L5.01562 6.48438L8.35938 9.85938C8.54688 10.0469 8.89062 10.0469 9.07812 9.85938L9.85938 9.07812C10.0469 8.89062 10.0469 8.54688 9.85938 8.35938L6.48438 4.98438Z" fill="#E08F8D"/>
                          </svg>
                      </button>
                    </div>
                  </div>
              </div>
              <div class="col-sm-12">
                <p style="padding-top: 1em;" id="cobrowse_logo_input_error"></p>
            </div>
          </div>
      </div>
      <div class="modal-footer" id="modal_cobrowse_image_buttons">
        {% if access_token_obj.source_easyassist_cobrowse_logo|length %}
        <button class="btn btn-outline-primary mr-auto" onclick="delete_cobrowse_logo()" style="margin-right: auto !important;">Delete</button>
        {% endif %}
        <button class="btn btn-text-only" type="button" data-dismiss="modal" id="cobrowse_logo_upload_modal_close">Cancel</button>
        <button class="btn btn-primary" onclick="upload_cobrowse_logo(this)">Upload</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade upload_file_modal" id="connect_with_agent_icon_upload_modal" tabindex="-1" role="dialog" aria-labelledby="document_upload_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Upload Icon</h5>
      </div>
      <div class="modal-body">
          <div class="row">
              <div class="col-sm-12">
                <label for="connect_with_agent_icon_input" class="custom-file-upload">
                    Choose File
                </label>
                <input type="file" id="connect_with_agent_icon_input" class="form-control" name="" style="display: none !important;" accept=".png, .jpg, .jpeg, .PNG">
              </div>
              <div class="col-sm-11">
                  <div class="col-md-12 col-sm-12 modal-upload-file mt-4" style="display: none;">
                    <div class="col-md-1 col-sm-1 width-auto-sm pd-mg">
                      <svg width="24" height="32" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0V8.50667C14 9.33333 14.6667 10 15.4933 10H24V30.5067C24 31.3333 23.3333 32 22.5067 32H1.49333C0.666665 32 0 31.3333 0 30.5067V1.49333C0 0.666667 0.666665 0 1.49333 0H14ZM17.4404 0.426667L23.5471 6.56C23.8404 6.85333 24.0004 7.22667 24.0004 7.62667V8H16.0004V0H16.3737C16.7737 0 17.147 0.16 17.4404 0.426667Z" fill="#ef827f"/>
                        <defs>
                          <linearGradient id="paint0_linear" x1="2.39111" y1="3" x2="23.3908" y2="32.0002" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#E08F8D"/>
                            <stop offset="1" stop-color="#FE736F"/>
                          </linearGradient>
                        </defs>
                      </svg>
                    </div>
                    <div class="col-md-10 col-sm-10 file-name-container">
                      <div class="file-name-div">
                      </div>
                      <div class="progress">
                        <div class="indeterminate"></div>
                      </div>
                    </div>
                    <div class="col-md-1 col-sm-1 width-auto-sm pr-sm-0">
                      <button class="upload-file-cross-btn" type="button" onclick="remove_uploaded_file_connect_icon();">
                        <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.48438 4.98438L9.85938 1.64062C10.0469 1.45312 10.0469 1.10938 9.85938 0.921875L9.07812 0.140625C8.89062 -0.046875 8.54688 -0.046875 8.35938 0.140625L5.01562 3.51562L1.64062 0.140625C1.45312 -0.046875 1.10938 -0.046875 0.921875 0.140625L0.140625 0.921875C-0.046875 1.10938 -0.046875 1.45312 0.140625 1.64062L3.51562 4.98438L0.140625 8.35938C-0.046875 8.54688 -0.046875 8.89062 0.140625 9.07812L0.921875 9.85938C1.10938 10.0469 1.45312 10.0469 1.64062 9.85938L5.01562 6.48438L8.35938 9.85938C8.54688 10.0469 8.89062 10.0469 9.07812 9.85938L9.85938 9.07812C10.0469 8.89062 10.0469 8.54688 9.85938 8.35938L6.48438 4.98438Z" fill="#E08F8D"/>
                          </svg>
                      </button>
                    </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-text-only" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-primary" onclick="upload_connect_with_agent_icon(this)">Upload</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade upload_file_modal" id="chat_icon_upload_modal" tabindex="-1" role="dialog" aria-labelledby="document_upload_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Upload Icon</h5>
      </div>
      <div class="modal-body">
          <div class="row">
              <div class="col-sm-12">
                <label for="chat_icon_input" class="custom-file-upload">
                    Choose File
                </label>
                <input type="file" id="chat_icon_input" class="form-control" name="" style="display: none !important;" accept=".png, .svg, .SVG .PNG">
              </div>
              <div class="col-sm-11" id="progress-modal-chat-icon">
                  <div class="col-md-12 col-sm-12 modal-upload-file mt-4" style="display: none;">
                    <div class="col-md-1 col-sm-1 width-auto-sm pd-mg">
                      <svg width="24" height="32" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0V8.50667C14 9.33333 14.6667 10 15.4933 10H24V30.5067C24 31.3333 23.3333 32 22.5067 32H1.49333C0.666665 32 0 31.3333 0 30.5067V1.49333C0 0.666667 0.666665 0 1.49333 0H14ZM17.4404 0.426667L23.5471 6.56C23.8404 6.85333 24.0004 7.22667 24.0004 7.62667V8H16.0004V0H16.3737C16.7737 0 17.147 0.16 17.4404 0.426667Z" fill="#ef827f"/>
                        <defs>
                          <linearGradient id="paint0_linear" x1="2.39111" y1="3" x2="23.3908" y2="32.0002" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#E08F8D"/>
                            <stop offset="1" stop-color="#FE736F"/>
                          </linearGradient>
                        </defs>
                      </svg>
                    </div>
                    <div class="col-md-10 col-sm-10 file-name-container">
                      <div class="file-name-div">
                      </div>
                      <div class="progress">
                        <div class="indeterminate"></div>
                      </div>
                    </div>
                    <div class="col-md-1 col-sm-1 width-auto-sm pr-sm-0">
                      <button class="upload-file-cross-btn" type="button" onclick="remove_chat_icon();">
                        <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.48438 4.98438L9.85938 1.64062C10.0469 1.45312 10.0469 1.10938 9.85938 0.921875L9.07812 0.140625C8.89062 -0.046875 8.54688 -0.046875 8.35938 0.140625L5.01562 3.51562L1.64062 0.140625C1.45312 -0.046875 1.10938 -0.046875 0.921875 0.140625L0.140625 0.921875C-0.046875 1.10938 -0.046875 1.45312 0.140625 1.64062L3.51562 4.98438L0.140625 8.35938C-0.046875 8.54688 -0.046875 8.89062 0.140625 9.07812L0.921875 9.85938C1.10938 10.0469 1.45312 10.0469 1.64062 9.85938L5.01562 6.48438L8.35938 9.85938C8.54688 10.0469 8.89062 10.0469 9.07812 9.85938L9.85938 9.07812C10.0469 8.89062 10.0469 8.54688 9.85938 8.35938L6.48438 4.98438Z" fill="#E08F8D"/>
                          </svg>
                      </button>
                    </div>
                  </div>
              </div>
          </div>
          <div id="icon-error-div">        
          </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-text-only" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-primary" onclick="upload_chat_icon(this)">Upload</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade upload_file_modal" id="reset_cobrowsing_meta_details_modal" tabindex="-1" role="dialog"aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Reset All Settings</h5>
      </div>
      <div class="modal-body">
          <div class="row">
              <div class="col-sm-12">
                <p>Are you sure, you want to reset all the settings?<p>
              </div>
          </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-text-only" type="button" data-dismiss="modal">No</button>
        <button class="btn btn-primary" onclick="reset_cobrowsing_meta_details(this)">Yes</button>
      </div>
    </div>
  </div>
</div>
</div>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
$( function() {
  $('#sortable-subremarks-with-buttons-div').sortable({
                      containment: "parent",
                  });
} );

$('#subremark-with-buttons-input-field').keypress(function(event) {
  var keycode = (event.keyCode ? event.keyCode : event.which);
  var value = $('#subremark-with-buttons-input-field').val();
  value = remove_special_characters_from_str(value);
  value = value.trim().replace( /(<([^>]+)>)/ig, '');

  if(keycode == 13){
    if(value.length < 2){
      show_easyassist_toast('Predefined sub-remark should be atleast 2 characters long')
      return;
    }
      
    var predefined_subremarks_with_buttons_list = [];
    var remark = $('#subRemarkModalWithButtons').find('#subremark-with-buttons-remark-field').html();
    var subremarks_with_buttons_element_list = $('#subRemarkModalWithButtons').find('.subremark-with-buttons-value');   
    for(var i=0; i<subremarks_with_buttons_element_list.length; i++){
      predefined_subremarks_with_buttons_list.push(subremarks_with_buttons_element_list[i].value);
    }

    if (predefined_subremarks_with_buttons_list.some(val => val === value)) {
      show_easyassist_toast('Predefined Sub-remark already exist');
      $('#subremark-with-buttons-input-field').val('');
      return;
    }
    $('#subremark-with-buttons-input-field').val('');
      $('#sortable-subremarks-with-buttons-div').append(`
      <div class="modal-dragable-output-item" onmouseover="handle_mouse_over_drag_icon_subremarks_modal(this)" onmouseout="handle_mouse_out_drag_icon_subremarks_modal(this)">
        <div class="dragable-item-icon"  style="cursor: grabbing;display: none">
          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M16.9998 6.5C16.9998 7.6 16.0998 8.5 14.9998 8.5C13.8998 8.5 12.9998 7.6 12.9998 6.5C12.9998 5.4 13.8998 4.5 14.9998 4.5C16.0998 4.5 16.9998 5.4 16.9998 6.5ZM8.9998 4.5C7.8998 4.5 6.9998 5.4 6.9998 6.5C6.9998 7.6 7.8998 8.5 8.9998 8.5C10.0998 8.5 10.9998 7.6 10.9998 6.5C10.9998 5.4 10.0998 4.5 8.9998 4.5ZM6.99976 12.5C6.99976 11.4 7.89976 10.5 8.99976 10.5C10.0998 10.5 10.9998 11.4 10.9998 12.5C10.9998 13.6 10.0998 14.5 8.99976 14.5C7.89976 14.5 6.99976 13.6 6.99976 12.5ZM8.99976 20.5C10.0998 20.5 10.9998 19.6 10.9998 18.5C10.9998 17.4 10.0998 16.5 8.99976 16.5C7.89976 16.5 6.99976 17.4 6.99976 18.5C6.99976 19.6 7.89976 20.5 8.99976 20.5ZM14.9998 10.5C13.8998 10.5 12.9998 11.4 12.9998 12.5C12.9998 13.6 13.8998 14.5 14.9998 14.5C16.0998 14.5 16.9998 13.6 16.9998 12.5C16.9998 11.4 16.0998 10.5 14.9998 10.5ZM12.9998 18.5C12.9998 17.4 13.8998 16.5 14.9998 16.5C16.0998 16.5 16.9998 17.4 16.9998 18.5C16.9998 19.6 16.0998 20.5 14.9998 20.5C13.8998 20.5 12.9998 19.6 12.9998 18.5Z" fill="#DADADA"/>
          </svg>
        </div>  
        <input type="text" class="subremark-with-buttons-value" value="${value}">
        <div class="sub-remark-with-buttons-delete-icon" onclick="$(this).parent().remove()">
            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 6C22 6.51284 21.614 6.93551 21.1166 6.99327L21 7H20.1553L18.9239 19.5192C18.7854 20.9269 17.6016 22 16.1871 22H8.81293C7.3984 22 6.2146 20.9269 6.07614 19.5192L4.84474 7H4C3.44772 7 3 6.55228 3 6C3 5.44772 3.44772 5 4 5H9C9 3.067 10.567 1.5 12.5 1.5C14.433 1.5 16 3.067 16 5H21C21.5523 5 22 5.44772 22 6ZM14.75 9.25C14.3703 9.25 14.0565 9.53215 14.0068 9.89823L14 10V17L14.0068 17.1018C14.0565 17.4678 14.3703 17.75 14.75 17.75C15.1297 17.75 15.4435 17.4678 15.4932 17.1018L15.5 17V10L15.4932 9.89823C15.4435 9.53215 15.1297 9.25 14.75 9.25ZM10.25 9.25C9.8703 9.25 9.55651 9.53215 9.50685 9.89823L9.5 10V17L9.50685 17.1018C9.55651 17.4678 9.8703 17.75 10.25 17.75C10.6297 17.75 10.9435 17.4678 10.9932 17.1018L11 17V10L10.9932 9.89823C10.9435 9.53215 10.6297 9.25 10.25 9.25ZM12.5 3.5C11.6716 3.5 11 4.17157 11 5H14C14 4.17157 13.3284 3.5 12.5 3.5Z" fill="#E53E3E"/>
            </svg>                                    
        </div>
      </div>`);
  }
});
</script>

<div class="modal fade" id="subRemarkModal" tabindex="-1" role="dialog" aria-labelledby="subRemarkModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="subRemarkModalLabel">Map Sub-Remarks to Call Back Request</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <p hidden id="subremark-remark-field"></p>  
          <div class="modal-input-field">
              <input id="subremark-input-field" maxlength='40' type="text" placeholder="Hit 'Enter' after adding Sub-remarks">
          </div>
          <div class="modal-list">
              <div class="subremarks-list-dragable-output-div" id="sortable-subremarks-div">
              </div>
          </div>
      </div>
      <div class="modal-footer">
        <p id="save-subremarks-error"></p>
        <button type="button" class="btn btn-primary" onclick="save_subremarks(this, 'Dropdown')">Save</button>
      </div>
    </div>
  </div>
</div>


<!-- sprint 5.4----- -->
<!-- add holiday modal------ -->

<div class="modal fade" id="add_holiday_modal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-sm" role="document">
      <div class="modal-content modal-content-custom">
          <div class="modal-header pt-3 pb-2">
              <h5 id="add_holiday_label" style="color: #2d2d2d;" >Add Holiday</h5>
          </div>
          <div class="modal-body">
              <div class="row">
                  <div class="col-sm-12">
                      <h6>Days <span class="text-danger">*</span></h6>
                      <div id="datepicker" class="input-group date" data-date-format="dd-mm-yyyy">
                        <input class="form-control custom-input" type="text" placeholder="DD-MM-YY" id="selectDate" readonly style="background-color: #ffffff;"/>
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                    </div>
                  </div>
              </div>
              <div class="row mt-2">
                <div class="col-sm-12 mt-3">
                    <h6>Description <span class="text-danger">*</span></h6>
                    <textarea class="form-control custom-textarea" id="description-text"></textarea>
                </div>
                <div class="col-sm-12 mt-3 mb-2">
                  <h6>Auto Response <span class="text-danger">*</span></h6>
                  <textarea class="form-control custom-textarea" id="response-text">Thank you, we have captured your details. We will contact you shortly</textarea>
              </div>
              </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" style="border: none !important; font-size: 14px !important;" type="button" data-dismiss="modal">Cancel</button>
            <button class="btn btn-info btn-custom" id="save-holiday-info" onclick="add_holiday_calendar()" type="button" disabled>Save</button>
          </div>
      </div>
  </div>
</div>

<!-- sprint 5.4----- -->
<!-- add work timing modal----- -->
<div class="modal fade" id="add_work_timing_modal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-sm" role="document">
      <div class="modal-content modal-content-custom">
          <div class="modal-header pt-3 pb-2">
              <h5 id="add_work_timing_label" style="color: #2d2d2d;" >Add Working Timing</h5>
          </div>
          <div class="modal-body">
              <div class="row">
                  <div class="col-sm-12">
                      <h6>Days <span class="text-danger">*</span></h6>
                      <select id="select-add-work-timing" class="form-control custom-select">
                          <option value="0" selected="selected">Choose from the following</option>
                          <option value="1">Monthly</option>
                          <option value="2">Yearly</option>
                      </select>
                  </div>
              </div>
              <div class="row mt-2" id="select-yearly-option" style="display: none;">
                <div class="col-sm-12">
                    <select id="selet-yearly-time" class="form-control">
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>
                </div>
              </div>
              <div class="row mt-2" id="select-monthly-option" style="display: none;">
                  <div class="col-sm-6" id="start-time-div">
                      <select id="selet-month-time" class="form-control">
                        <option value="1">Jan</option>
                        <option value="2">Feb</option>
                        <option value="3">Mar</option>
                        <option value="4">Apr</option>
                        <option value="5">May</option>
                        <option value="6">Jun</option>
                        <option value="7">Jul</option>
                        <option value="8">Aug</option>
                        <option value="9">Sep</option>
                        <option value="10">Oct</option>
                        <option value="11">Nov</option>
                        <option value="12">Dec</option>
                      </select>
                  </div>
                  <div class="col-sm-6" id="end-time-div">
                      <select id="selet-year-time" class="form-control">
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                      </select>
                  </div>
              </div>

              <div class="row" >
                  <div class="col-sm-6 mt-4" id="start-time-div">
                      <h6>Start Time</h6>
                      <input class="col-sm-12 custom-input" type="time" id="start-time" value="00:00">
                  </div>
                  <div class="col-sm-6 mt-4" id="end-time-div">
                      <h6>End Time</h6>
                      <input class="col-sm-12 custom-input" type="time" id="end-time" value="23:59">
                  </div>
              </div>

              <div class="row mt-2">
                <div class="col-sm-12 mt-2">
                  <h6>Select Working Days</h6>
                  <div class="select-day-div pl-2 pr-2 d-flex flex-wrap">
                    <div class="single-day">
                        <input type="checkbox" class="individual" id="week-day-0" name="week-day-0" disabled>
                        <label class="label-for-check" for="week-day-0">Monday</label>
                    </div>
                    <div class="single-day">
                        <input type="checkbox" class="individual" id="week-day-1" name="week-day-1" disabled>
                        <label class="label-for-check" for="week-day-1">Tuesday</label>
                    </div>
                    <div class="single-day">
                        <input type="checkbox" class="individual" id="week-day-2" name="week-day-2" disabled>
                        <label class="label-for-check" for="week-day-2">Wednesday</label>
                    </div>
                    <div class="single-day">
                        <input type="checkbox" class="individual" id="week-day-3" name="week-day-3" disabled>
                        <label class="label-for-check" for="week-day-3">Thursday</label> 
                    </div>
                    <br>
                    <div class="single-day">
                        <input type="checkbox" class="individual" id="week-day-4" name="week-day-4" disabled>
                        <label class="label-for-check" for="week-day-4">Friday</label>
                    </div>
                    <div class="single-day">
                        <input type="checkbox" class="individual" id="week-day-5" name="week-day-5" disabled>
                        <label class="label-for-check" for="week-day-5">Saturday</label>
                    </div>
                    <div class="single-day">
                        <input type="checkbox" class="individual" id="week-day-6" name="week-day-6" disabled>
                        <label class="label-for-check" for="week-day-6">Sunday</label>
                    </div>
                    <div class="single-day">
                        <input type="checkbox" class="selectall" name="select-all" disabled>
                        <label class="label-for-check" for="select-all">All</label>
                    </div>
                  </div>
                </div>
              </div>
              
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" style="border: none !important; font-size: 14px !important;" type="button" data-dismiss="modal">Cancel</button>
            <button class="btn btn-info btn-custom" id="save-work-time" onclick="add_working_hours(this)" type="button" disabled>Save</button>
          </div>
      </div>
  </div>
</div>

<!-- sprint 5.4--------- -->
<!--filter modal----------- -->
<div class="modal fade" id="apply_filter_modal" tabindex="-1" role="dialog" aria-labelledby="apply_filter_modal_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 id="apply_filter_modal_modal_label" style="color: #2d2d2d;">Apply Custom Filter</h5>
          </div>
          <div class="modal-body">
              <div class="row filter-header-row">
                  <div class="col-md-4 col-sm-12 filter-mb-sm-4">
                      <select class="form-control" onchange="show_filter_options(this)" id="selected-filter-parameter" style="width: 100%!important;">
                          <option value="None">Select Filter</option>
                          <option value="days">Day</option>
                          <option value="month">Months</option>
                          <option value="years">Year</option>
                      </select>
                  </div>
                  <div class="col-md-5 col-sm-12 filter-mb-sm-4 easyassist-multiselect-dropdown-container" id="selected-filter-container">
                    <select class="form-control" style="display:none;" id="selected-month-filter" multiple>
                      <option value="Jan">Jan</option>
                      <option value="Feb">Feb</option>
                      <option value="Mar">Mar</option>
                      <option value="Apr">Apr</option>
                      <option value="May">May</option>
                      <option value="Jun">Jun</option>
                      <option value="Jul">Jul</option>
                      <option value="Aug">Aug</option>
                      <option value="Sep">Sep</option>
                      <option value="Oct">Oct</option>
                      <option value="Nov">Nov</option>
                      <option value="Dec">Dec</option>
                    </select>
                      
                      


                      <select class="form-control" style="display:none;" id="selected-days-filter">
                          <option value="workingdays">Working Days</option>
                          <option value="holidays">Holidays</option>
                      </select>
                      
                      <select class="form-control" style="display:none;" id="selected-year-filter">
                          <option value="0">Select Year</option>
                          <option value="2021">2021</option>
                          <option value="2022">2022</option>
                          <option value="2023">2023</option>
                          <option value="2024">2024</option>
                          <option value="2025">2025</option>
                      </select>
                  </div>
                  <div class="col-md-3 col-sm-12" style="align-items: center; display: flex;">
                      <button class="btn btn-success btn-icon-split" type="button" id="add-filter-btn" onclick="add_new_filter_parameter(this)" style="width: 100%;justify-content: start;" disabled>
                          <span class="icon text-white-50">
                              <svg width="19" height="14" viewBox="0 0 19 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path d="M6.03809 11.0455L1.53383 6.69202L0 8.16406L6.03809 14L19 1.47204L17.477 0L6.03809 11.0455Z" fill="white"/>
                              </svg>
                          </span>
                          <span class="text" style="width: 100%;">Add</span>
                      </button>
                  </div>
              </div>
              <div class="row" id="tbody-filter-parameters">

              </div>
          </div>
          <div class="modal-footer">
              <button class="btn btn-secondary" style="font-size: 16px !important;" type="button" data-dismiss="modal">Cancel</button>
              <button id="reset_filter" class="btn btn-white-border" style="display: none;" disabled onclick="reset_calendar_filter(this)">Reset</button>
              <button id="apply_filter_confirm"  class="btn btn-primary" disabled onclick="apply_calendar_filter(this)">Submit</button>
          </div>
      </div>
  </div>
</div>

<script>

// Calendar JS

function display_calender_event(pk){
  value = document.getElementById("select-work-timing-" + pk).value
  if(this.value == 2){
    $('#holiday-option-input-' + pk).css('display','block');
    $('#working-day-option-input-' + pk).css('display','none');
  } else{
    $('#holiday-option-input-'+ pk).css('display','none')
    $('#working-day-option-input-' + pk).css('display','flex');
  }
}

$(document).ready(function(){
    $('#select-add-work-timing').on('change', function(){
        // $('#save-work-time').prop('disabled',false);
        if(this.value == 1){
            $('#select-monthly-option').css('display','flex');
            $('#select-yearly-option').css('display','none');
        }else if (this.value == 2){
            $('#select-yearly-option').css('display','block');
            $('#select-monthly-option').css('display','none');
        }else{
            $('#select-yearly-option').css('display','none');
            $('#select-monthly-option').css('display','none');
        }
    })
    let params = new URLSearchParams(window.location.search)
    if(params.has('days') || params.has('years') || params.has('month') || params.has('calendar_updated')){
      document.getElementById('pills-calendar-tab').click();
    }
})
    $('.selectall').click(function(){
        $(".individual").prop("checked",$(this).prop("checked"));
    })
    $('.individual').on('change', function(){
          if($('.individual').filter(":checked").length == 7){
              $('.selectall').prop('checked', true);
          } else {
            $('.selectall').attr('checked', false);
          }
        })

  window.is_filter_applied = false;
  // window.custom_month_filter_dropdown = null;
  window.custom_day_filter_dropdown = null;
  window.custom_year_filter_dropdown = null;
  window.custom_filter_option_dropdown = null;
  window.applied_filter_key_value_map = {};
  window.chat_bubble_icon_path = "{{access_token_obj.chat_bubble_icon_source}}";
  
  function show_filter_options(element) {
      // custom_month_filter_dropdown.hide_custom_dropdown();
      $("#selected-month-filter").next().hide();
      custom_day_filter_dropdown.hide_custom_dropdown();
      custom_year_filter_dropdown.hide_custom_dropdown();
  
      if (element.value == "None") {
          document.getElementById("add-filter-btn").disabled = true;
      } else {
  
          document.getElementById("selected-filter-container").style.display = "block";
  
          filter_parameters = document.getElementsByClassName("filter-parameter");
          for (var index = 0; index < filter_parameters.length; index++) {
              filter_parameters[index].style.display = "none";
          }
          if (element.value == "month") {
            $("#selected-month-filter").next().show();
          } else if (element.value == "days") {
              custom_day_filter_dropdown.show_custom_dropdown();
          } else if (element.value == "years") {
              custom_year_filter_dropdown.show_custom_dropdown();
          } else {
              alert("Please select valid filter");
          }
          
          document.getElementById("reset_filter").removeAttribute("disabled");
          document.getElementById("reset_filter").style.display = "block";
          document.getElementById("add-filter-btn").disabled = false;
      }
  }
  
  function add_new_filter_parameter() {
      var filter_key = null;
      var filter_value = null;
      element = document.getElementById("selected-filter-parameter");
      if (element.value == "None") {
          alert("Please select valid filter parameter");
      } else {
          var value = "None";
          var key = element.value;
          if (element.value == "month") {
            value = $("#selected-month-filter").val();
            if (value.length == 0) {
                alert("Please choose valid filter.");
                return;
            }
            filter_key = "month"
            filter_value = value;
            console.log(filter_value);
        }  else if (element.value == "days") {
              value = document.getElementById("selected-days-filter").value;
  
              filter_key = "days"
              if (value == "holidays") {
                  filter_value = "Holidays";
              } else {
                filter_value = "Working Days";
              }
              filter_value = [filter_value];
          } else if (element.value == "years") {
              value = document.getElementById("selected-year-filter").value;
  
              filter_key = "years"
              if (value == "2021") {
                  filter_value = "2021";
              } else if (value == "2022") {
                  filter_value = "2022";
              } else if (value == "2023") {
                  filter_value = "2023";
              }  else if (value == "2024") {
                  filter_value = "2024";
              } else if (value == "2025") {
                  filter_value = "2025";
              }else {
                  alert("Please select a valid year");
                  return;
              }
              filter_value = [filter_value];
          } else {
              alert("Please select valid filter parameter");
          }
  
          if(check_filter_already_applied(applied_filter_key_value_map[key], filter_value)) {
              alert(filter_key + " filter already applied");
              return;
          }
  
          if (applied_filter_key_value_map[key] != null) {
              applied_filter_key_value_map[key] = filter_value;
              update_applied_filter_by_key(key, filter_value);
              return;
          }
          applied_filter_key_value_map[key] = filter_value;
  
          var filter_chip_html = "";
          filter_chip_html = generate_filter_chips(filter_key, filter_value);
          
          var html_filter = [
              '<div class="col-md-12 filter-parameter-column" filter-key="' + key + '" filter-data=\'' + JSON.stringify(filter_value) + '\' style="padding: 1em;border-bottom: 1px solid #E6E6E6;">',
                  '<div class="row filter-custom-row">',
                      '<div class="col-md-2 filter-mb-sm-2 filter-flex-column">',
                          '<span class="filter-text">' + filter_key + '</span>',
                          '<button type="button" class="btn remove-filter-row-btn filter-show-on-mobile" onclick="remove_selected_filter_parameter(this)">',
                              '<svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">',
                                  '<path d="M8 0C9.49884 0 10.7237 1.20574 10.8064 2.72496L10.8108 2.88889H15.3514C15.7096 2.88889 16 3.18737 16 3.55556C16 3.89306 15.756 4.17199 15.4394 4.21614L15.3514 4.22222H14.6629L13.5558 15.7948C13.441 16.994 12.4959 17.92 11.3406 17.9951L11.1888 18H4.81118C3.63878 18 2.64965 17.124 2.46385 15.9497L2.44423 15.7948L1.33622 4.22222H0.648649C0.320263 4.22222 0.0488727 3.97142 0.00592144 3.64602L0 3.55556C0 3.21805 0.244025 2.93912 0.560631 2.89497L0.648649 2.88889H5.18919C5.18919 1.2934 6.44763 0 8 0ZM13.3596 4.22222H2.63957L3.73529 15.6643C3.7861 16.1952 4.19488 16.6083 4.70127 16.661L4.81118 16.6667H11.1888C11.7078 16.6667 12.1478 16.289 12.2484 15.7762L12.2647 15.6643L13.3596 4.22222ZM9.51351 6.66667C9.8419 6.66667 10.1133 6.91747 10.1562 7.24287L10.1622 7.33333V13.5556C10.1622 13.9237 9.87175 14.2222 9.51351 14.2222C9.18513 14.2222 8.91374 13.9714 8.87079 13.646L8.86487 13.5556V7.33333C8.86487 6.96514 9.15528 6.66667 9.51351 6.66667ZM6.48649 6.66667C6.81487 6.66667 7.08626 6.91747 7.12921 7.24287L7.13514 7.33333V13.5556C7.13514 13.9237 6.84473 14.2222 6.48649 14.2222C6.1581 14.2222 5.88671 13.9714 5.84376 13.646L5.83784 13.5556V7.33333C5.83784 6.96514 6.12825 6.66667 6.48649 6.66667ZM8 1.33333C7.2059 1.33333 6.55464 1.96188 6.4915 2.76131L6.48649 2.88889H9.51351C9.51351 2.02978 8.83589 1.33333 8 1.33333Z" fill="#757575"/>',
                              '</svg>',
                          '</button>',
                      '</div>',
                      '<div class="col-md-8 filter-chip-column">',
                          filter_chip_html,
                      '</div>',
                      '<div class="col-md-2 filter-hide-on-mobile">',
                          '<button type="button" class="btn remove-filter-row-btn" onclick="remove_selected_filter_parameter(this)">',
                              '<svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">',
                                  '<path d="M8 0C9.49884 0 10.7237 1.20574 10.8064 2.72496L10.8108 2.88889H15.3514C15.7096 2.88889 16 3.18737 16 3.55556C16 3.89306 15.756 4.17199 15.4394 4.21614L15.3514 4.22222H14.6629L13.5558 15.7948C13.441 16.994 12.4959 17.92 11.3406 17.9951L11.1888 18H4.81118C3.63878 18 2.64965 17.124 2.46385 15.9497L2.44423 15.7948L1.33622 4.22222H0.648649C0.320263 4.22222 0.0488727 3.97142 0.00592144 3.64602L0 3.55556C0 3.21805 0.244025 2.93912 0.560631 2.89497L0.648649 2.88889H5.18919C5.18919 1.2934 6.44763 0 8 0ZM13.3596 4.22222H2.63957L3.73529 15.6643C3.7861 16.1952 4.19488 16.6083 4.70127 16.661L4.81118 16.6667H11.1888C11.7078 16.6667 12.1478 16.289 12.2484 15.7762L12.2647 15.6643L13.3596 4.22222ZM9.51351 6.66667C9.8419 6.66667 10.1133 6.91747 10.1562 7.24287L10.1622 7.33333V13.5556C10.1622 13.9237 9.87175 14.2222 9.51351 14.2222C9.18513 14.2222 8.91374 13.9714 8.87079 13.646L8.86487 13.5556V7.33333C8.86487 6.96514 9.15528 6.66667 9.51351 6.66667ZM6.48649 6.66667C6.81487 6.66667 7.08626 6.91747 7.12921 7.24287L7.13514 7.33333V13.5556C7.13514 13.9237 6.84473 14.2222 6.48649 14.2222C6.1581 14.2222 5.88671 13.9714 5.84376 13.646L5.83784 13.5556V7.33333C5.83784 6.96514 6.12825 6.66667 6.48649 6.66667ZM8 1.33333C7.2059 1.33333 6.55464 1.96188 6.4915 2.76131L6.48649 2.88889H9.51351C9.51351 2.02978 8.83589 1.33333 8 1.33333Z" fill="#EE2525"/>',
                              '</svg>',
                          '</button>',
                      '</div>',
                  '</div>',
              '</div>',
          ].join('');
  
          document.getElementById("tbody-filter-parameters").innerHTML += html_filter;
          document.getElementById("apply_filter_confirm").removeAttribute("disabled");
          document.getElementById("reset_filter").removeAttribute("disabled");
          document.getElementById("reset_filter").style.display = "block";
          scrollToBottom();
      }
  }
  
  function remove_selected_filter_parameter(element){
      remove_element = $(element).closest('.filter-parameter-column')[0];
      var filter_element = $(remove_element).attr("filter-key");
      applied_filter_key_value_map[filter_element] = null;

      remove_element.parentElement.removeChild(remove_element);
      if(document.getElementsByClassName("tr-filter-parameters").length <= 0){
          document.getElementById("apply_filter_confirm").setAttribute("disabled", "disabled");
          if(!is_filter_applied) {
              document.getElementById("reset_filter").setAttribute("disabled", "disabled");
          }
      }
  }
  
  function apply_calendar_filter(element) {
      selected_filter_parameters = document.getElementsByClassName("filter-parameter-column");
      var key_value = '';
      let request_params = {}
      for(var idx = 0; idx < selected_filter_parameters.length; idx ++) {
        var filter_key = selected_filter_parameters[idx].getAttribute('filter-key');
        var filter_data = selected_filter_parameters[idx].getAttribute('filter-data');
  
        filter_data = JSON.parse(filter_data);
        for(var index = 0; index < filter_data.length; index ++) {
          key_value += filter_key + "=" + filter_data[index] + "&";
        }
      }
      window.location.href = window.location.href.replace( /[\?#].*|$/, "?"+key_value+"#pills-options-tab" );
      console.log(applied_filter_key_value_map)
  }
  
  function reset_calendar_filter() {
      document.getElementById("tbody-filter-parameters").innerHTML = "";
      document.getElementById("reset_filter").setAttribute("disabled", "disabled");
      document.getElementById("apply_filter_confirm").setAttribute("disabled", "disabled");
      
      // custom_month_filter_dropdown.update_value("None");
      $("#selected-month-filter").val("").multiselect('refresh');
      
      custom_filter_option_dropdown.update_value("None");
      custom_year_filter_dropdown.update_value("all");
      custom_day_filter_dropdown.update_value("all");
      
      initialize_custom_filter_map();
  }
  
  function load_map_script() {

    var params = JSON.stringify({});

    var xhttp = new XMLHttpRequest();
    xhttp.open("POST", "/easy-assist/map-script/", true);
    xhttp.setRequestHeader('Content-Type', 'application/json');
    xhttp.setRequestHeader('X-CSRFToken', get_csrfmiddlewaretoken());
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            response = JSON.parse(this.responseText);
            response = easyassist_custom_decrypt(response.Response);
            response = JSON.parse(response);
            if (response["status"] == 200) {
                var src = response['src'];
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.defer = true;
                script.src = src
                document.body.appendChild(script);          
            }
        }
    }
    xhttp.send(params);
    }
  
  $(document).ready(function() {
      initialize_custom_filter_map();
      initialize_custom_dropdown();
      initialize_custom_tabs();
      load_map_script();
      update_applied_filter();
  
      
          $("#support-history-table").DataTable({
          "ordering": false,
          "bPaginate": false,
          "bInfo": false,
          "bSort": false,
          });
      
          $("#selected-month-filter").multiselect({
            nonSelectedText: 'Select Month',
            // enableFiltering: true,
            // enableCaseInsensitiveFiltering: true,
            includeSelectAllOption: true
          });
          
          $("#selected-month-filter").next().hide();

  });
  
  function initialize_custom_dropdown() {
      var console_theme_color = getComputedStyle(document.body).getPropertyValue('--color_rgb');
      $("#selected-month-filter")[0].selectedIndex = -1;
  
      custom_filter_option_dropdown = new EasyassistCustomSelect("#selected-filter-parameter", "Select One", console_theme_color);
      custom_day_filter_dropdown = new EasyassistCustomSelect("#selected-days-filter", "Select Days", console_theme_color);
      
      custom_year_filter_dropdown = new EasyassistCustomSelect("#selected-year-filter", "Select Year", console_theme_color);
  }
  
  function initialize_custom_filter_map() {
      applied_filter_key_value_map = {
          'days': null,
          'month': null,
          'years': null,
      }
  }

$(function() {
  $('#sortable-subremarks-div').sortable({
      containment: "parent",
  });
});

$('#subremark-input-field').keypress(function(event) {
  var keycode = (event.keyCode ? event.keyCode : event.which);
  var value = $('#subremark-input-field').val();
  value = remove_special_characters_from_str(value);
  value = value.trim().replace( /(<([^>]+)>)/ig, '');

  if(keycode == 13){
    if(value.length < 2){
      show_easyassist_toast('Predefined Sub-remark should be atleast 2 characters long')
      return;
    }
    var predefined_subremarks_list = []; 
    var remark = $('#subRemarkModal').find('#subremark-remark-field').html();
    var subremarks_element_list = $('#subRemarkModal').find('.subremark-value');
    for(var i=0; i<subremarks_element_list.length; i++){
        predefined_subremarks_list.push(subremarks_element_list[i].value);
    }
    
    if (predefined_subremarks_list.some(val => val === value)) {
      show_easyassist_toast('Predefined Sub-remark already exist');
      $('#subremark-input-field').val('');
      return;
    }
    $('#subremark-input-field').val('');
      $('#sortable-subremarks-div').append(`
      <div class="modal-dragable-output-item" onmouseover="handle_mouse_over_drag_icon_subremarks_modal(this)" onmouseout="handle_mouse_out_drag_icon_subremarks_modal(this)">
        <div class="dragable-item-icon"  style="cursor: grabbing;display: none">
          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M16.9998 6.5C16.9998 7.6 16.0998 8.5 14.9998 8.5C13.8998 8.5 12.9998 7.6 12.9998 6.5C12.9998 5.4 13.8998 4.5 14.9998 4.5C16.0998 4.5 16.9998 5.4 16.9998 6.5ZM8.9998 4.5C7.8998 4.5 6.9998 5.4 6.9998 6.5C6.9998 7.6 7.8998 8.5 8.9998 8.5C10.0998 8.5 10.9998 7.6 10.9998 6.5C10.9998 5.4 10.0998 4.5 8.9998 4.5ZM6.99976 12.5C6.99976 11.4 7.89976 10.5 8.99976 10.5C10.0998 10.5 10.9998 11.4 10.9998 12.5C10.9998 13.6 10.0998 14.5 8.99976 14.5C7.89976 14.5 6.99976 13.6 6.99976 12.5ZM8.99976 20.5C10.0998 20.5 10.9998 19.6 10.9998 18.5C10.9998 17.4 10.0998 16.5 8.99976 16.5C7.89976 16.5 6.99976 17.4 6.99976 18.5C6.99976 19.6 7.89976 20.5 8.99976 20.5ZM14.9998 10.5C13.8998 10.5 12.9998 11.4 12.9998 12.5C12.9998 13.6 13.8998 14.5 14.9998 14.5C16.0998 14.5 16.9998 13.6 16.9998 12.5C16.9998 11.4 16.0998 10.5 14.9998 10.5ZM12.9998 18.5C12.9998 17.4 13.8998 16.5 14.9998 16.5C16.0998 16.5 16.9998 17.4 16.9998 18.5C16.9998 19.6 16.0998 20.5 14.9998 20.5C13.8998 20.5 12.9998 19.6 12.9998 18.5Z" fill="#DADADA"/>
          </svg>
        </div>  
        <input type="text" class="subremark-value" value="${value}">
        <div class="sub-remark-delete-icon" onclick="$(this).parent().remove()">
            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 6C22 6.51284 21.614 6.93551 21.1166 6.99327L21 7H20.1553L18.9239 19.5192C18.7854 20.9269 17.6016 22 16.1871 22H8.81293C7.3984 22 6.2146 20.9269 6.07614 19.5192L4.84474 7H4C3.44772 7 3 6.55228 3 6C3 5.44772 3.44772 5 4 5H9C9 3.067 10.567 1.5 12.5 1.5C14.433 1.5 16 3.067 16 5H21C21.5523 5 22 5.44772 22 6ZM14.75 9.25C14.3703 9.25 14.0565 9.53215 14.0068 9.89823L14 10V17L14.0068 17.1018C14.0565 17.4678 14.3703 17.75 14.75 17.75C15.1297 17.75 15.4435 17.4678 15.4932 17.1018L15.5 17V10L15.4932 9.89823C15.4435 9.53215 15.1297 9.25 14.75 9.25ZM10.25 9.25C9.8703 9.25 9.55651 9.53215 9.50685 9.89823L9.5 10V17L9.50685 17.1018C9.55651 17.4678 9.8703 17.75 10.25 17.75C10.6297 17.75 10.9435 17.4678 10.9932 17.1018L11 17V10L10.9932 9.89823C10.9435 9.53215 10.6297 9.25 10.25 9.25ZM12.5 3.5C11.6716 3.5 11 4.17157 11 5H14C14 4.17157 13.3284 3.5 12.5 3.5Z" fill="#E53E3E"/>
            </svg>                                    
        </div>
      </div>`);
  }
});
</script>
<script type="text/javascript">

  var input_product_category = document.getElementById('input_product_category');
  var product_category_tag_list = document.getElementById('product_category_tag_list');
  var product_categories_array = {{product_category|safe}};
  {% if access_token_obj.source_easyassist_connect_agent_icon == "null" %}
  window.is_icon_for_connect_with_agent = false;
  {% else %}
  window.is_icon_for_connect_with_agent = true;
  {% endif %}
  if(product_categories_array.length==1 && product_categories_array[0] =="")
      product_categories_array = []

  var input_predefined_remark = document.getElementById("input-predefined-remark");
  var predefined_remarks_tag_list = document.getElementById("predefined-remarks-tag-list");
  var predefined_remarks_array = {{access_token_obj.predefined_remarks|safe}};

  var input_predefined_remark_with_buttons = document.getElementById("input-predefined-remark-with-buttons");
  var predefined_remarks_tag_with_buttons_list = document.getElementById("predefined-remarks-tag-with-buttons-list");
  var predefined_remarks_array_with_buttons = "{{access_token_obj.predefined_remarks_with_buttons|safe}}";
  if(predefined_remarks_array_with_buttons === "")
    predefined_remarks_array_with_buttons = []
  else
    predefined_remarks_array_with_buttons = predefined_remarks_array_with_buttons.split(",")

  var support_language_array = "{{access_token_obj.get_supported_languages|safe}}";
  if(support_language_array === "")
    support_language_array = []
  else
    support_language_array = support_language_array.split(",")

  for(var index=0 ; index<support_language_array.length ; index++) {
    support_language_array[index] = support_language_array[index].trim();
  }

  for(var index=0 ; index<product_categories_array.length ; index++) {
    product_categories_array[index] = product_categories_array[index].trim();
  }

function chip_product_category(){
  var product_category_string = window.PRODUCT_CATEGORY_TAG_OBJ.value_list.join(',');
  document.getElementById("product_category_list").value = product_category_string;
}

input_predefined_remark_with_buttons.addEventListener('keypress', function(e) {
  if (e.key === 'Enter' || e.keyCode==13) {
    let val = input_predefined_remark_with_buttons.value.trim().replace( /(<([^>]+)>)/ig, '');

    if(val.length < 2) {
      show_easyassist_toast("Predefined remark should be atleast 2 characters long");
    }  else if(val.length > 25) {
      show_easyassist_toast("Predefined remark should not be more than 25 characters");
    } else {
        if (predefined_remarks_array_with_buttons.some(value => value === val)) {
        show_easyassist_toast('Predefined Remark already exist');
        input_predefined_remark_with_buttons.value = '';
      } else {
        predefined_remarks_array_with_buttons.push(val);
        render_predefined_remarks_with_buttons();
        input_predefined_remark_with_buttons.value = '';
        input_predefined_remark_with_buttons.focus();
      }
    }
  }
});

function get_predefined_remarks() {
  var predefined_remarks_list = [];
  var remarks_element_list = $('#predefined-remarks-tag-list').find('.remark-value');
  for(var i=0; i<remarks_element_list.length; i++){
    predefined_remarks_list.push(remarks_element_list[i].innerHTML);
  }
  return predefined_remarks_list;
}


function render_predefined_remarks_with_buttons() {
  predefined_remarks_tag_with_buttons_list.innerHTML = '';
  predefined_remarks_array_with_buttons.map((item, index) => {
    predefined_remarks_tag_with_buttons_list.innerHTML += `<li class="bg-primary" id="predefined-remark-li-with-buttons"><span style="font-weight: bold;">${item}</span><span style="color:white;cursor: pointer;font-weight: bold;vertical-align: text-bottom;"onclick="javascript: remove_predefined_remark_tag_with_buttons(${index})"> x</span></li>`;
  });
}

function remove_predefined_remark_tag_with_buttons(index) {
  predefined_remarks_array_with_buttons = predefined_remarks_array_with_buttons.filter(item => predefined_remarks_array_with_buttons.indexOf(item) != index);
  render_predefined_remarks_with_buttons();
}

function chip_predefined_remarks_with_buttons(){
  var predefined_remarks_with_buttons_string = predefined_remarks_array_with_buttons.join(',');
  document.getElementById("predefined_remarks_with_buttons").value = predefined_remarks_with_buttons_string;
}

input_predefined_remark.addEventListener('keypress', function(e) {

  if (e.key === 'Enter' || e.keyCode==13) {
    let val = input_predefined_remark.value.trim();
    val = sanitize_input_string(val);
    var predefined_remarks_list = get_predefined_remarks();

    if (predefined_remarks_list.some(value => value == val)) {
      show_easyassist_toast('Predefined Remark already exist');
      $('#input-predefined-remark').val('');
    } else if(val.length < 2) {
      show_easyassist_toast("Predefined remark should be atleast 2 characters long");
    } else if(val.length > 25) {
      show_easyassist_toast("Predefined remark should not be more than 25 characters");
    } else if (val.toLowerCase() == "others" || val.toLowerCase() == "other") {
      show_easyassist_toast(val + ' option can not be added');
      input_predefined_remark.value = '';
    } else {
      predefined_remarks_array.push({"remark":val,"subremark":[]});
      input_predefined_remark.value = '';
      input_predefined_remark.focus();
      render_predefined_remarks();
    }
  }
});


function add_subremarks_in_modal(remark) {
  var subremark_array = [];
  for(var i=0; i<predefined_remarks_array.length; i++){
    if(remark == predefined_remarks_array[i].remark){
      subremark_array = predefined_remarks_array[i].subremark;
      break;
    }
  }
  $('#subRemarkModalLabel').html(`Map Sub-Remarks to ${remark}`)
  $('#sortable-subremarks-div').empty();
  $('#subremark-remark-field').empty();
  $('#subremark-remark-field').append(remark);

  for(var i=0; i<subremark_array.length; i++) {
    $('#sortable-subremarks-div').append(`
      <div class="modal-dragable-output-item" onmouseover="handle_mouse_over_drag_icon_subremarks_modal(this)" onmouseout="handle_mouse_out_drag_icon_subremarks_modal(this)">
        <div class="dragable-item-icon"  style="cursor: grabbing;display: none">
          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M16.9998 6.5C16.9998 7.6 16.0998 8.5 14.9998 8.5C13.8998 8.5 12.9998 7.6 12.9998 6.5C12.9998 5.4 13.8998 4.5 14.9998 4.5C16.0998 4.5 16.9998 5.4 16.9998 6.5ZM8.9998 4.5C7.8998 4.5 6.9998 5.4 6.9998 6.5C6.9998 7.6 7.8998 8.5 8.9998 8.5C10.0998 8.5 10.9998 7.6 10.9998 6.5C10.9998 5.4 10.0998 4.5 8.9998 4.5ZM6.99976 12.5C6.99976 11.4 7.89976 10.5 8.99976 10.5C10.0998 10.5 10.9998 11.4 10.9998 12.5C10.9998 13.6 10.0998 14.5 8.99976 14.5C7.89976 14.5 6.99976 13.6 6.99976 12.5ZM8.99976 20.5C10.0998 20.5 10.9998 19.6 10.9998 18.5C10.9998 17.4 10.0998 16.5 8.99976 16.5C7.89976 16.5 6.99976 17.4 6.99976 18.5C6.99976 19.6 7.89976 20.5 8.99976 20.5ZM14.9998 10.5C13.8998 10.5 12.9998 11.4 12.9998 12.5C12.9998 13.6 13.8998 14.5 14.9998 14.5C16.0998 14.5 16.9998 13.6 16.9998 12.5C16.9998 11.4 16.0998 10.5 14.9998 10.5ZM12.9998 18.5C12.9998 17.4 13.8998 16.5 14.9998 16.5C16.0998 16.5 16.9998 17.4 16.9998 18.5C16.9998 19.6 16.0998 20.5 14.9998 20.5C13.8998 20.5 12.9998 19.6 12.9998 18.5Z" fill="#DADADA"/>
          </svg>
        </div>  
        <input type="text" class="subremark-value" value="${subremark_array[i].remark}">
        <div class="sub-remark-delete-icon" onclick="$(this).parent().remove()">
            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 6C22 6.51284 21.614 6.93551 21.1166 6.99327L21 7H20.1553L18.9239 19.5192C18.7854 20.9269 17.6016 22 16.1871 22H8.81293C7.3984 22 6.2146 20.9269 6.07614 19.5192L4.84474 7H4C3.44772 7 3 6.55228 3 6C3 5.44772 3.44772 5 4 5H9C9 3.067 10.567 1.5 12.5 1.5C14.433 1.5 16 3.067 16 5H21C21.5523 5 22 5.44772 22 6ZM14.75 9.25C14.3703 9.25 14.0565 9.53215 14.0068 9.89823L14 10V17L14.0068 17.1018C14.0565 17.4678 14.3703 17.75 14.75 17.75C15.1297 17.75 15.4435 17.4678 15.4932 17.1018L15.5 17V10L15.4932 9.89823C15.4435 9.53215 15.1297 9.25 14.75 9.25ZM10.25 9.25C9.8703 9.25 9.55651 9.53215 9.50685 9.89823L9.5 10V17L9.50685 17.1018C9.55651 17.4678 9.8703 17.75 10.25 17.75C10.6297 17.75 10.9435 17.4678 10.9932 17.1018L11 17V10L10.9932 9.89823C10.9435 9.53215 10.6297 9.25 10.25 9.25ZM12.5 3.5C11.6716 3.5 11 4.17157 11 5H14C14 4.17157 13.3284 3.5 12.5 3.5Z" fill="#E53E3E"/>
            </svg>                                    
        </div>
      </div>`);
  }
}

function render_predefined_remarks() {

    var html = "";
    predefined_remarks_array.forEach(function(remark_obj, index) {
        var remark = remark_obj.remark;
        html += 
            `<li class="predefined-remark-li bg-primary" ondblclick="start_rename_remark('${remark}')" onmouseover="handleDragIconMouseOver('Dropdown',this)" onmouseout="handleDragIconMouseOut('Dropdown',this)" id="predefined-remark-li">
                <svg width="15" height="16" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="7.08333" cy="4.66667" r="1.66667" fill="#F8F8F8"/>
                    <circle cx="7.08333" cy="10.5002" r="1.66667" fill="#F8F8F8"/>
                    <circle cx="7.08333" cy="16.3332" r="1.66667" fill="#F8F8F8"/>
                    <circle cx="12.9167" cy="4.66667" r="1.66667" fill="#F8F8F8"/>
                    <circle cx="12.9167" cy="10.5002" r="1.66667" fill="#F8F8F8"/>
                    <circle cx="12.9167" cy="16.3332" r="1.66667" fill="#F8F8F8"/>
                </svg>
                <span class="remark-value" style="font-weight: bold;">${remark}</span>
                <span style="color:white;cursor: pointer;font-weight: bold;vertical-align: text-bottom;"onclick="remove_predefined_remark_tag(${index});"> x</span>
                <div class="add-sub-remark-btn" onclick="add_subremarks_in_modal('${remark}')" data-toggle="modal" data-target="#subRemarkModal" style="display:none;text-align: center;font-size: 10px;cursor: pointer;border-top: 1px solid rgba(255, 255, 255, 0.3);">
                    Add Sub-Remark
                </div>
            </li>`;
    });

    predefined_remarks_tag_list.innerHTML = html;

    var remark_tag_container = document.getElementById("predefined-remarks-tag-list");
    remark_tag_container.drag_obj = new CognoAiDragableTagInput(
        remark_tag_container, 
        function(event) {
            remark_tag_container.drag_finish_callback(event)
        }
    );
}

function start_rename_remark(remark) {
  var remarks_list = document.getElementsByClassName("predefined-remark-li");
  var input = document.createElement("input");
  input.value = remark;
  input.type = "text";
  input.maxLength = 25;
  input.className = "remark-input";
  input.setAttribute('id', `${remark}`);
  end_rename_remark(input);

  for(var i=0; i<remarks_list.length; i++) {
    var element = remarks_list[i].querySelector('.remark-value'); 
    if(element.innerHTML == remark) {
      element.parentNode.setAttribute('style','display:none');
      element.parentNode.parentNode.insertBefore(input,element.parentNode.nextSibling);
      break;
    }
  }
  input.focus();
}

function end_rename_remark(element) {
  element.addEventListener("keypress", function(event){
    var val = element.value;
    var remark = element.id;

    
    var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == 13){
      //remove special characters
      val = remove_special_characters_from_str(val);
      
      //length and duplicate check
      if(val.length < 2) {
          show_easyassist_toast("Predefined Remark should be atleast 2 characters long");
          return;
      }           
  
      var cnt = 0;
      for(var i=0; i<predefined_remarks_array.length; i++) {
          if(val == predefined_remarks_array[i]['remark'])
            cnt++;
      }
      if(remark != val && cnt > 0) {
          show_easyassist_toast("Duplicate Remarks are not allowed");
          return;
      }

      for(i=0; i<predefined_remarks_array.length; i++){
        ele = predefined_remarks_array[i];
        if(ele.remark == remark) {
          ele.remark = val;
          break;
        }
      }
      var prev = element.previousElementSibling; 
      prev.getElementsByClassName('remark-value')[0].innerHTML = val;
      prev.getElementsByClassName('add-sub-remark-btn')[0].setAttribute('onclick',`add_subremarks_in_modal("${val}")`)
      prev.setAttribute('style','display:inline-block');
      prev.setAttribute('ondblclick',`start_rename_remark("${val}")`);
      element.remove();
    }
  });
}

function remove_predefined_remark_tag(index) {
  predefined_remarks_array = predefined_remarks_array.filter((item, idx) => idx != index);
  render_predefined_remarks();
  
}

function chip_predefined_remarks(){
  var predefined_remarks_string = predefined_remarks_array.join(',');
  document.getElementById("predefined-remarks-list").value = predefined_remarks_string;
}

function chip_language_support(){
  var support_language_string = window.LANGUAGE_TAG_OBJ.value_list.join(', ');
  document.getElementById("supported_language_list").value = support_language_string;
}

window.addEventListener("load", function() {
    var option_btn_id = location.hash;
    if( option_btn_id){
      $(option_btn_id).click();
    }

    render_predefined_remarks();
    render_predefined_remarks_with_buttons();
    hide_exit_intent_popup_number();
    hide_inactivity_popup_number();
    if(chat_bubble_icon_path != "") {
      $(".default-chat-icon").css({"display":"flex"});
    } else {
      $(".reset-icon").css({"display":"flex"});
      $(".reset-chat-icon").css({"display":"none"})
    }
    // render_cognomeet_and_cobrowse_tabs();
    var cobrowsingconsole_theme_color_el = document.getElementById("cobrowsing-console-theme-color");
    cobrowsingconsole_theme_color_el.jscolor.zIndex = 1090;
  });

  if (document.getElementById("easy_assist_delete_logo") != null) {
    var image_listener = document.getElementById("easy_assist_delete_logo");
    image_listener.addEventListener('click', function(el){
      $('#cobrowse_delete_upload_modal').modal('show');
    });
  }
  var host_protocol = window.location.protocol;
  var host_name = window.location.host;
  var script = host_protocol + '//' +  host_name +'/static/EasyAssistApp/js/easy-assist-v6.js?key=' + "{{ access_token_obj.key }}";

  var load_script = '<script type="text/javascript" src="'+script+'"></scr'+'ipt>';
  var script_editor = ace.edit("editor-code");
  script_editor.setTheme("ace/theme/chrome");
  script_editor.session.setMode("ace/mode/javascript");
  script_editor.setValue(load_script);
  script_editor.setFontSize("15px");
  script_editor.session.setUseWorker(false);
  script_editor.setReadOnly(true);
  script_editor.setOption("dragEnabled", false);
  script_editor.setAutoScrollEditorIntoView(true);
  script_editor.setOption("maxLines", 4);

  var load_script = script;
  var cjs_editor = ace.edit("editor-code-cjs");
  cjs_editor.setTheme("ace/theme/chrome");
  cjs_editor.session.setMode("ace/mode/javascript");
  cjs_editor.setValue(load_script);
  cjs_editor.setFontSize("15px");
  cjs_editor.session.setUseWorker(false);
  cjs_editor.setReadOnly(true);
  cjs_editor.setOption("dragEnabled", false);
  cjs_editor.setAutoScrollEditorIntoView(true);
  cjs_editor.setOption("maxLines", 4);

  function show_upload_image(){
    var show_image = document.getElementById("show_easyassist_connect_agent_icon");
    var display_image = document.getElementById("display_icon");
    if(show_image.checked == true){
      display_image.style.display = "contents";
    }
    else{
      display_image.style.setProperty('display', 'none', 'important');
    }
  }

  function copy_script() {
      script_editor.selectAll();
      var copyGfGText = document.getElementById("editor-code").childNodes[1];
      copyGfGText.select();
      document.execCommand("copy");
      show_easyassist_toast("Script copied");
  }

  function copy_cjs_script() {
      cjs_editor.selectAll();
      var copyGfGText = document.getElementById("editor-code-cjs").childNodes[1];
      copyGfGText.select();
      document.execCommand("copy");
      show_easyassist_toast("CJS script copied");
  }

  function add_floating_sidenav_easyassist_button() {
      bg_color = "{{ access_token_obj.floating_button_bg_color }}";
      var nav_span = document.createElement("span");
      nav_span.id = "easyassist-side-nav-options-co-browsing";
      nav_span.style.backgroundColor = bg_color;
      nav_span.textContent = "Request for Support";
      nav_span.setAttribute("onclick", "show_easyassist_browsing_modal()");
      nav_span.style.width = "auto";
      document.getElementsByTagName("body")[0].appendChild(nav_span);
      if ("{{ access_token_obj.floating_button_position }}" == "left") {
          nav_span.style.left = "-70px";
          nav_span.style.borderRadius = "0px 0px 10px 10px";
      } else {
          nav_span.style.right = "-70px";
          nav_span.style.borderRadius = "10px 10px 0px 0px";
      }
  }

  add_floating_sidenav_easyassist_button();

  function hide_floating_sidenav_easyassist_button() {
    document.getElementById("easyassist-side-nav-options-co-browsing").style.display = "none";
  }

  function show_floating_sidenav_easyassist_button() {
    bg_color = "#"+document.getElementById("floating_button_bg_color").value;
    position = document.getElementById("floating_button_position").value;
    sidenav_element = document.getElementById("easyassist-side-nav-options-co-browsing");
    sidenav_element.style.left = "";
    sidenav_element.style.right = "";
    
    if (position == "left") {
      sidenav_element.style.top = "50vh";
      sidenav_element.style.left = "-70px";
      sidenav_element.style.transform = "rotate(-90deg)";
      sidenav_element.style.borderRadius = "0px 0px 10px 10px";
    } else if (position == "right") {
      sidenav_element.style.top = "50vh";
      sidenav_element.style.right = "-70px";
      sidenav_element.style.transform = "rotate(-90deg)";
      sidenav_element.style.borderRadius = "10px 10px 0px 0px";
    } else if (position == "top") {
      sidenav_element.style.top = "-5px";
      sidenav_element.style.transform = "rotate(0deg)";
      sidenav_element.style.left = "50vw";
      sidenav_element.style.borderRadius = "0px 0px 10px 10px"
    } else if (position == "bottom") {
      sidenav_element.style.top = "96%";
      sidenav_element.style.left = "50vw";
      sidenav_element.style.transform = "rotate(0deg)";
      sidenav_element.style.borderRadius = "10px 10px 0px 0px";
    }
    sidenav_element.style.backgroundColor = bg_color;
    sidenav_element.style.display = "inline-block";
  }

  function show_change_password() {
    document.getElementById('change-password-button').style.display = "none";
    document.getElementById("change-password-div").style.display = "block";
    document.getElementById("change_password_cancel_btn").style.visibility = "visible";
  }

  function hide_change_password() {
    document.getElementById("change_password_cancel_btn").style.visibility = "hidden";
    document.getElementById("change-password-div").style.display = "none";
    document.getElementById('change-password-button').style.display = "block";
    document.getElementById("old-password").value = "";
    document.getElementById("new-password").value = "";
    document.getElementById("confirm-password").value = "";
    document.getElementById("save-details-error").innerHTML = "";
  }

  function disable_connect_button_if_agent_unavailable_change_actions(){
    var check_element = document.getElementById("disable_connect_button_if_agent_unavailable");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("message-if-agent-unavailable-div").classList.remove("easyassist_hidden_div");
    }else{
      document.getElementById("message-if-agent-unavailable-div").classList.add("easyassist_hidden_div");
    }
  }

  function allow_language_support_change_actions(){
    var check_element = document.getElementById("allow_language_support");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("supported-language-list-div").classList.remove("easyassist_hidden_div");
    }else{
      document.getElementById("supported-language-list-div").classList.add("easyassist_hidden_div");
    }
  }

  function change_product_category_list_div_visiblity(){
    var check_element_1 = document.getElementById("choose_product_category");
    var check_element_2 = document.getElementById("enable_tag_based_assignment_for_outbound");
    var tr_check_element_1 = get_tr_tag_from_parent_recursive(check_element_1);
    var tr_check_element_2 = get_tr_tag_from_parent_recursive(check_element_2);
    if( 
      (check_element_1.checked == true && tr_check_element_1.classList.contains("easyassist_hidden_div") == false) || 
      (check_element_2.checked == true && tr_check_element_2.classList.contains("easyassist_hidden_div") == false) 
    ){
      document.getElementById("product-category-list-div").classList.remove("easyassist_hidden_div");
    }else{
      document.getElementById("product-category-list-div").classList.add("easyassist_hidden_div");
    }
  }

  function choose_product_category_change_actions(){
    var check_element = document.getElementById("choose_product_category");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("product_category_message_div").classList.remove("easyassist_hidden_div");
    }else{
      document.getElementById("product_category_message_div").classList.add("easyassist_hidden_div");
    }
  }

  function enable_predefined_remarks_change_actions(){
    var predefined_remarks_button = document.getElementById('enable_predefined_remarks_with_buttons');
    var check_element = document.getElementById("enable_predefined_remarks");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("predefined_remarks_list_div").classList.remove("easyassist_hidden_div");
      document.getElementById("row-enable_predefined_sub_remarks_with_dropdown").classList.remove("easyassist_hidden_div");
      if(predefined_remarks_button.checked){
        predefined_remarks_button.click();
      }
    }else{
      document.getElementById("predefined_remarks_list_div").classList.add("easyassist_hidden_div");
      document.getElementById("row-enable_predefined_sub_remarks_with_dropdown").classList.add("easyassist_hidden_div");
    }
  }

  function enable_predefined_remarks_with_buttons_change_actions(){
    var predefined_remarks_dropdown = document.getElementById('enable_predefined_remarks');
    var check_element = document.getElementById("enable_predefined_remarks_with_buttons");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("predefined_remarks_list_with_buttons_div").classList.remove("easyassist_hidden_div");
      if(predefined_remarks_dropdown.checked){
        predefined_remarks_dropdown.click();
      }
    } else {
      document.getElementById("predefined_remarks_list_with_buttons_div").classList.add("easyassist_hidden_div");
    }
  }

  function allow_screen_recording_change_actions(){
    var check_element = document.getElementById("allow_screen_recording");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      if(document.getElementById("screen_recording_expire_div"))
        document.getElementById("screen_recording_expire_div").classList.remove("easyassist_hidden_div");
    } else {
      if(document.getElementById("screen_recording_expire_div"))
        document.getElementById("screen_recording_expire_div").classList.add("easyassist_hidden_div");
    }
  }

  function enable_masked_field_warning_change_actions(){
    var check_element = document.getElementById("enable_masked_field_warning");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("masked_field_warning_div").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("masked_field_warning_div").classList.add("easyassist_hidden_div");
    }
  }

  function enable_agent_connect_message_change_actions(){
    var check_element = document.getElementById("enable_agent_connect_message");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("agent_connect_message_div").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("agent_connect_message_div").classList.add("easyassist_hidden_div");
    }
  }

  function enable_smart_agent_assignment_change_actions(){
    var check_element = document.getElementById("enable_smart_agent_assignment");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("reconnecting_window_timer_section").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("reconnecting_window_timer_section").classList.add("easyassist_hidden_div");
    }
  }

  function lead_generation_change_actions(){
    var check_element = document.getElementById("lead_generation");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("enable_tag_based_assignment_for_outbound_div").classList.remove("easyassist_hidden_div");
      document.getElementById("show_floating_button_after_lead_search_div").classList.remove("easyassist_hidden_div");
      document.getElementById("allow_agent_to_customer_cobrowsing").checked = false;
      reverse_cobrowsing_toggles_action();
    } else {
      document.getElementById("enable_tag_based_assignment_for_outbound_div").classList.add("easyassist_hidden_div");
      document.getElementById("show_floating_button_after_lead_search_div").classList.add("easyassist_hidden_div");
    }
  }

  function show_floating_easyassist_button_change_actions(){
    var check_element = document.getElementById("show_floating_easyassist_button");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("show_easyassist_connect_agent_icon").checked = false;
      document.getElementById("display_icon").classList.add("easyassist_hidden_div");

      show_easyassist_connect_agent_icon_change_actions();
    }

    // if(document.getElementById("show_easyassist_connect_agent_icon").checked || 
    //   document.getElementById("show_floating_easyassist_button").checked){
    //     document.getElementById("floating-button-postion-div").classList.remove("easyassist_hidden_div");
    // } else {
    //     document.getElementById("floating-button-postion-div").classList.add("easyassist_hidden_div");
    // }
    if(check_element.checked == false && document.getElementById("show_easyassist_connect_agent_icon").checked == false){
      let greeting_bubble_element = document.getElementById('enable_greeting_bubble');
      if(greeting_bubble_element){
        document.getElementById('enable_greeting_bubble').checked = false;
        document.getElementById('greeting-bubble-timer-div').classList.add('easyassist_hidden_div');
        document.getElementById('greeting-bubble-text-div').classList.add('easyassist_hidden_div');
      }
    }
  }

  function show_easyassist_connect_agent_icon_change_actions(){
    var check_element = document.getElementById("show_easyassist_connect_agent_icon");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("display_icon").classList.remove("easyassist_hidden_div");
      document.getElementById("show_floating_easyassist_button").checked = false;
    } else {
      document.getElementById("display_icon").classList.add("easyassist_hidden_div");
    }

    if (check_element.checked) {
      let navbar_position_tooltip = document.getElementById("floating_button_and_navbar_position_tooltip");
      navbar_position_tooltip.setAttribute("data-original-title", "Change position of Icon and NavBar");

      let navbar_position_text = document.getElementById("floating_button_and_navbar_position_text");
      document.getElementById("floating_button_and_navbar_position_text").innerHTML = "Icon and NavBar Position ";

      document.getElementById("floating_button_and_navbar_position_text").appendChild(navbar_position_tooltip);
    }
    else {
      let navbar_position_tooltip = document.getElementById("floating_button_and_navbar_position_tooltip");
      navbar_position_tooltip.setAttribute("data-original-title", "Change position of Floating button and NavBar.");

      let navbar_position_text = document.getElementById("floating_button_and_navbar_position_text");
      document.getElementById("floating_button_and_navbar_position_text").innerHTML = "Floating Button and NavBar Position ";

      document.getElementById("floating_button_and_navbar_position_text").appendChild(navbar_position_tooltip);
    }

    // if(document.getElementById("show_easyassist_connect_agent_icon").checked || 
    //   document.getElementById("show_floating_easyassist_button").checked){
    //     document.getElementById("floating-button-postion-div").classList.remove("easyassist_hidden_div");
    // } else {
    //     document.getElementById("floating-button-postion-div").classList.add("easyassist_hidden_div");
    // }
    if(check_element.checked == false && document.getElementById("show_floating_easyassist_button").checked == false){
      let greeting_bubble_element = document.getElementById('enable_greeting_bubble');
      if(greeting_bubble_element){
        document.getElementById('enable_greeting_bubble').checked = false;
        document.getElementById('greeting-bubble-timer-div').classList.add('easyassist_hidden_div');
        document.getElementById('greeting-bubble-text-div').classList.add('easyassist_hidden_div');
      }
    }
  }

  function field_stuck_event_handler_change_actions(){
    var check_element = document.getElementById("field_stuck_event_handler");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("field_recursive_timer_div").classList.remove("easyassist_hidden_div");
      document.getElementById("field_recursive_stuck_timer_div").classList.remove("easyassist_hidden_div");
      document.getElementById("field_stuck_event_handler_popup_time").classList.remove("easyassist_hidden_div");      
    } else {
      document.getElementById("field_recursive_stuck_event_check").checked = false;
      document.getElementById("field_recursive_timer_div").classList.add("easyassist_hidden_div");
      document.getElementById("field_recursive_stuck_timer_div").classList.add("easyassist_hidden_div");
      document.getElementById("field_stuck_event_handler_popup_time").classList.add("easyassist_hidden_div");
    }
  }

  function allow_support_documents_change_actions(){
    var check_element = document.getElementById("allow_support_documents");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("allow_only_support_documents_div").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("allow_only_support_documents_div").classList.add("easyassist_hidden_div");
      document.getElementById("allow_only_support_documents").checked = false;
    }
  }

  function maximum_active_leads_change_actions(){
    var check_element = document.getElementById("maximum_active_leads");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    var target_element = document.getElementById("maximum_active_leads_threshold");
    var tr_target_element = get_tr_tag_from_parent_recursive(target_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      tr_target_element.classList.remove("easyassist_hidden_div");
    } else {
      tr_target_element.classList.add("easyassist_hidden_div");
    }
  }
  
  function auto_assign_unattended_leads_change_actions(){
    var check_element = document.getElementById("enable_auto_assign_unattended_lead");

    var elements_to_hide = [
      'auto_assign_unattended_lead_timer_tr',
      'auto_assign_unattended_lead_message_tr',
      'enable_auto_assign_to_one_agent_tr'
    ]
    if (document.getElementById('enable_auto_assign_to_one_agent').checked) {
      elements_to_hide.push('auto_assign_lead_end_session_message_tr');
      elements_to_hide.push('auto_assigned_unattended_lead_archive_timer_tr');
    }


    var check_element = document.getElementById("enable_auto_assign_unattended_lead");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      for(var index=0; index < elements_to_hide.length; index++){
        try{
          document.getElementById(elements_to_hide[index]).classList.remove("easyassist_hidden_div");
        }catch(err){

        }
      }
    } else {
      for(var index=0; index < elements_to_hide.length; index++){
        try{
          document.getElementById(elements_to_hide[index]).classList.add("easyassist_hidden_div");
        }catch(err){

        }
      }
    }
  }
  
  function auto_assign_to_one_agent_change_actions(){
    var check_element = document.getElementById("enable_auto_assign_to_one_agent");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    var target_element = document.getElementById("auto_assign_lead_end_session_message");
    var tr_target_element = get_tr_tag_from_parent_recursive(target_element);
    var unattended_lead_archive_timer_input_ele = document.getElementById("unattended-lead-archive-timer-input");
    var unattended_lead_archive_timer_input_tr = get_tr_tag_from_parent_recursive(unattended_lead_archive_timer_input_ele);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false) {
      tr_target_element.classList.remove("easyassist_hidden_div");
      unattended_lead_archive_timer_input_tr.classList.remove("easyassist_hidden_div");
    } else {
      tr_target_element.classList.add("easyassist_hidden_div");
      unattended_lead_archive_timer_input_tr.classList.add("easyassist_hidden_div");
    }
  }

  function show_verification_code_modal_change_actions(){
    var check_element = document.getElementById("show_verification_code_modal");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("ask-for-suport-code-div").classList.remove("easyassist_hidden_div");
      document.getElementById("customer-conset-modal-div").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("ask-for-suport-code-div").classList.add("easyassist_hidden_div");
      document.getElementById("enable_verification_code_popup").checked = false;
      document.getElementById("customer-conset-modal-div").classList.add("easyassist_hidden_div");
    }
  }

  function no_agent_connects_toast_change_actions(){
    var check_element = document.getElementById("no_agent_connects_toast");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("no_agent_connects_toast_threshold_section").classList.remove("easyassist_hidden_div");
      document.getElementById("no_agent_connects_toast_text_section").classList.remove("easyassist_hidden_div");
      document.getElementById("no_agent_connect_timer_reset_count_tr").classList.remove("easyassist_hidden_div");
      document.getElementById("no_agent_connect_timer_reset_message_tr").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("no_agent_connects_toast_threshold_section").classList.add("easyassist_hidden_div");
      document.getElementById("no_agent_connects_toast_text_section").classList.add("easyassist_hidden_div");
      document.getElementById("no_agent_connect_timer_reset_count_tr").classList.add("easyassist_hidden_div");
      document.getElementById("no_agent_connect_timer_reset_message_tr").classList.add("easyassist_hidden_div");
    }
  }

  function allow_popup_on_browser_leave_change_actions(){
    var check_element = document.getElementById("allow_popup_on_browser_leave");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("recursive_exit_intent_div").classList.remove("easyassist_hidden_div");
      document.getElementById("exit_intent_popup_count_div").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("enable_recursive_browser_leave_popup").checked = false;
      document.getElementById("recursive_exit_intent_div").classList.add("easyassist_hidden_div");
      // hide exit popup number input----
      document.getElementById("exit_intent_popup_count_div").classList.add("easyassist_hidden_div");
    }
  }

  function hide_exit_intent_popup_number(){
    var check_element = document.getElementById("enable_recursive_browser_leave_popup");
    var ele_exit_intent = document.getElementById("allow_popup_on_browser_leave");
    if(check_element.checked == true || ele_exit_intent.checked == false){
        document.getElementById("exit_intent_popup_count_div").classList.add("easyassist_hidden_div");
    }else{
        document.getElementById("exit_intent_popup_count_div").classList.remove("easyassist_hidden_div");
    }
  }

  function hide_inactivity_popup_number(){
    var recursive_check = document.getElementById("field_recursive_stuck_event_check");    
    var main_check = document.getElementById("field_stuck_event_handler");         
    if(recursive_check.checked == true || main_check.checked == false){
        document.getElementById("field_stuck_event_handler_popup_time").classList.add("easyassist_hidden_div");
    }else{
        document.getElementById("field_stuck_event_handler_popup_time").classList.remove("easyassist_hidden_div");
    }
  }

  function allow_meeting_end_time_change_actions(){
    var check_element = document.getElementById("allow_meeting_end_time");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("meeting_end_time_div").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("meeting_end_time_div").classList.add("easyassist_hidden_div");
    }
  }
  
  function no_agent_connect_toast_meeting_startup() {
    var check_element = document.getElementById("no_agent_connects_toast_meeting");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("tr_no_agent_connects_meeting_toast_threshold").classList.remove("easyassist_hidden_div");
      document.getElementById("tr_no_agent_connects_meeting_toast_text").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("tr_no_agent_connects_meeting_toast_threshold").classList.add("easyassist_hidden_div");
      document.getElementById("tr_no_agent_connects_meeting_toast_text").classList.add("easyassist_hidden_div");
    }
  }

  function allow_no_agent_connect_toast_meeting_actions(){
    var check_element = document.getElementById("no_agent_connects_toast_meeting");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("show_cobrowsing_meeting_lobby").checked = true;
      document.getElementById("tr_no_agent_connects_meeting_toast_threshold").classList.remove("easyassist_hidden_div");
      document.getElementById("tr_no_agent_connects_meeting_toast_text").classList.remove("easyassist_hidden_div");
    } else {
      document.getElementById("tr_no_agent_connects_meeting_toast_threshold").classList.add("easyassist_hidden_div");
      document.getElementById("tr_no_agent_connects_meeting_toast_text").classList.add("easyassist_hidden_div");
    }
  }
  
  function allow_only_video_calling_actions(){
    var check_element = document.getElementById("allow_video_meeting_only");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      document.getElementById("show_cobrowsing_meeting_lobby").checked = true;
      document.getElementById("no_agent_connects_toast_meeting").checked = true;
      document.getElementById("tr_no_agent_connects_meeting_toast_threshold").classList.remove("easyassist_hidden_div");
      document.getElementById("tr_no_agent_connects_meeting_toast_text").classList.remove("easyassist_hidden_div");
    }
  }
  
  function allow_lobby_page_actions(){

    var check_element = document.getElementById("show_cobrowsing_meeting_lobby");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      //if (document.getElementById("allow_video_meeting_only").checked) {
        //document.getElementById("no_agent_connects_toast_meeting").checked = true;
        //document.getElementById("tr_no_agent_connects_meeting_toast_threshold").classList.remove("easyassist_hidden_div");
        //document.getElementById("tr_no_agent_connects_meeting_toast_text").classList.remove("easyassist_hidden_div");
      //}
    } else {
      document.getElementById("no_agent_connects_toast_meeting").checked = false;
      document.getElementById("tr_no_agent_connects_meeting_toast_threshold").classList.add("easyassist_hidden_div");
      document.getElementById("tr_no_agent_connects_meeting_toast_text").classList.add("easyassist_hidden_div");
    }
  }

  function allow_video_calling_cobrowsing_change_actions(element){
    var check_element = document.getElementById("allow_video_calling_cobrowsing");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      if (element) {
        document.getElementById("customer_initiate_video_call").checked = true;
      }
      document.getElementById("enable_voip_with_video_calling").checked = false;
      document.getElementById("customer_initiate_video_call_as_pip").checked = false;
      document.getElementById("enable_voip_calling").checked = false;
      document.getElementById("customer_initiate_voice_call").checked = false;
      document.getElementById("allow_screen_sharing_cobrowse").checked = false;
      document.getElementById("voip_with_video_calling_message_div").classList.add("easyassist_hidden_div");
      document.getElementById("auto_voip_with_video_calling_first_time_div").classList.add("easyassist_hidden_div");
      document.getElementById("voip_calling_message_div").classList.add("easyassist_hidden_div");
      document.getElementById("auto_voip_calling_first_time_div").classList.add("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_video_call").classList.remove("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_voice_call").classList.add("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_video_call_as_pip").classList.add("easyassist_hidden_div");
    }
    else{
      document.getElementById("allow_customer_initiate_video_call").classList.add("easyassist_hidden_div");
    }
  }

  function allow_screen_sharing_cobrowse_change_actions(){
    var check_element = document.getElementById("allow_screen_sharing_cobrowse");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
        document.getElementById("enable_voip_calling").checked = false;
        document.getElementById("enable_voip_with_video_calling").checked = false;
        document.getElementById("allow_video_calling_cobrowsing").checked = false;
        document.getElementById("customer_initiate_video_call_as_pip").checked = false;
        document.getElementById("customer_initiate_voice_call").checked = false;
        document.getElementById("customer_initiate_video_call").checked = false;
        document.getElementById("auto_voip_calling_first_time_div").classList.add("easyassist_hidden_div");
        document.getElementById("voip_calling_message_div").classList.add("easyassist_hidden_div");
        document.getElementById("voip_with_video_calling_message_div").classList.add("easyassist_hidden_div");
        document.getElementById("auto_voip_with_video_calling_first_time_div").classList.add("easyassist_hidden_div");
        document.getElementById("allow_customer_initiate_video_call_as_pip").classList.add("easyassist_hidden_div");
        document.getElementById("allow_customer_initiate_video_call").classList.add("easyassist_hidden_div");
        document.getElementById("allow_customer_initiate_voice_call").classList.add("easyassist_hidden_div");
        document.getElementById("enable_low_bandwidth_cobrowsing").checked = false;
        document.getElementById("enable_manual_switching").checked = false;
        document.getElementById("enable_manual_switching_div").style.display = "none";
        document.getElementById("low_bandwidth_cobrowsing_threshold_div").style.display = "none";
    }
    reverse_cobrowsing_toggles_action();
  }

  function enable_voip_calling_change_actions(element){
    var check_element = document.getElementById("enable_voip_calling");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      if (element) {
        document.getElementById("customer_initiate_voice_call").checked = true;
      }
      document.getElementById("enable_voip_with_video_calling").checked = false;
      document.getElementById("customer_initiate_video_call_as_pip").checked = false;
      document.getElementById("allow_screen_sharing_cobrowse").checked = false;
      document.getElementById("allow_video_calling_cobrowsing").checked = false;
      document.getElementById("customer_initiate_video_call").checked = false;
      document.getElementById("voip_calling_message_div").classList.remove("easyassist_hidden_div");
      document.getElementById("auto_voip_calling_first_time_div").classList.remove("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_voice_call").classList.remove("easyassist_hidden_div");
      document.getElementById("voip_with_video_calling_message_div").classList.add("easyassist_hidden_div");
      document.getElementById("auto_voip_with_video_calling_first_time_div").classList.add("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_video_call").classList.add("easyassist_hidden_div")
      document.getElementById("allow_customer_initiate_video_call_as_pip").classList.add("easyassist_hidden_div")
    } else{
      document.getElementById("voip_calling_message_div").classList.add("easyassist_hidden_div");
      document.getElementById("auto_voip_calling_first_time_div").classList.add("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_voice_call").classList.add("easyassist_hidden_div");
    }
  }

  function enable_voip_with_video_calling_change_actions(e) {
    var check_element = document.getElementById("enable_voip_with_video_calling");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == true && tr_check_element.classList.contains("easyassist_hidden_div") == false){
      if (e) {
        document.getElementById("customer_initiate_video_call_as_pip").checked = true;
      }
      document.getElementById("enable_voip_calling").checked = false;
      document.getElementById("customer_initiate_voice_call").checked = false;
      document.getElementById("allow_screen_sharing_cobrowse").checked = false;
      document.getElementById("allow_video_calling_cobrowsing").checked = false;
      document.getElementById("customer_initiate_video_call").checked = false;
      document.getElementById("voip_with_video_calling_message_div").classList.remove("easyassist_hidden_div");
      document.getElementById("auto_voip_with_video_calling_first_time_div").classList.remove("easyassist_hidden_div");
      document.getElementById("voip_calling_message_div").classList.add("easyassist_hidden_div");
      document.getElementById("auto_voip_calling_first_time_div").classList.add("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_video_call").classList.add("easyassist_hidden_div")
      document.getElementById("allow_customer_initiate_voice_call").classList.add("easyassist_hidden_div")
      document.getElementById("allow_customer_initiate_video_call_as_pip").classList.remove("easyassist_hidden_div");
      
    } else {
      document.getElementById("voip_with_video_calling_message_div").classList.add("easyassist_hidden_div");
      document.getElementById("auto_voip_with_video_calling_first_time_div").classList.add("easyassist_hidden_div");
      document.getElementById("allow_customer_initiate_video_call_as_pip").classList.add("easyassist_hidden_div");
    }
  }

  function enable_followup_leads_tab_change_actions(e){
    var check_element = document.getElementById("enable_followup_leads_tab");
    var tr_check_element = get_tr_tag_from_parent_recursive(check_element);
    if(check_element.checked == false){
      document.getElementById("enable_non_working_hours_modal_popup").checked = false;
    }
  }

  function enable_low_bandwidth_cobrowsing_change_actions(e){
    var check_element = document.getElementById("enable_low_bandwidth_cobrowsing");
    if(check_element.checked == false){
      document.getElementById("low_bandwidth_cobrowsing_threshold_div").style.setProperty("display", "none", "important");
      document.getElementById("enable_manual_switching_div").style.display = "none";
      document.getElementById("enable_manual_switching").checked = false;
    } else {
      document.getElementById("low_bandwidth_cobrowsing_threshold_div").style.display = "";
      document.getElementById("enable_manual_switching_div").style.display = "";
    }
  }

  function deploy_chatbot_flag_change_actions(e){
    var check_element = document.getElementById("deploy_chatbot_flag");
    if(check_element.checked == false){
      document.getElementById("deploy_chatbot_url_section").style.setProperty("display", "none", "important");
    } else {
      document.getElementById("deploy_chatbot_url_section").style.display = "";
    }
  }

  function reverse_cobrowsing_toggles_action(){
    if(document.getElementById("allow_agent_to_customer_cobrowsing").checked){
      document.getElementById("allow_agent_to_screen_record_customer_cobrowsing_div").style.display = "";
      if(document.getElementById("allow_agent_to_screen_record_customer_cobrowsing").checked){
        document.getElementById("allow_agent_to_audio_record_customer_cobrowsing_div").style.display = "";
      }else{
        document.getElementById("allow_agent_to_audio_record_customer_cobrowsing_div").style.display = "none";
        document.getElementById("allow_agent_to_audio_record_customer_cobrowsing").checked = false;
      }
      document.getElementById("allow_screen_sharing_cobrowse").checked = false;
      document.getElementById("enable_low_bandwidth_cobrowsing").checked = false;
      document.getElementById("enable_manual_switching").checked = false;
      document.getElementById("enable_manual_switching_div").style.display = "none";
      document.getElementById("low_bandwidth_cobrowsing_threshold_div").style.display = "none";
    }else{
      document.getElementById("allow_agent_to_screen_record_customer_cobrowsing_div").style.setProperty("display", "none", "important");
      document.getElementById("allow_agent_to_audio_record_customer_cobrowsing_div").style.display = "none";
      document.getElementById("allow_agent_to_screen_record_customer_cobrowsing").checked = false;
      document.getElementById("allow_agent_to_audio_record_customer_cobrowsing").checked = false;
    }
  }

  function reverse_function_toggles(){
    if(document.getElementById("allow_agent_to_customer_cobrowsing").checked){
      document.getElementById("allow_agent_to_screen_record_customer_cobrowsing_div").style.display = "";
      if(document.getElementById("allow_agent_to_screen_record_customer_cobrowsing").checked){
        document.getElementById("allow_agent_to_audio_record_customer_cobrowsing_div").style.display = "";
      }else{
        document.getElementById("allow_agent_to_audio_record_customer_cobrowsing_div").style.display = "none";
        document.getElementById("allow_agent_to_audio_record_customer_cobrowsing").checked = false;
      }
      document.getElementById("allow_screen_sharing_cobrowse").checked = false;
      document.getElementById("enable_low_bandwidth_cobrowsing").checked = false;
      document.getElementById("enable_manual_switching").checked = false;
      document.getElementById("enable_manual_switching_div").style.display = "none";
      document.getElementById("low_bandwidth_cobrowsing_threshold_div").style.display = "none";
      document.getElementById("enable_inbound").checked = false;
      inbound_toggles_change_actions(event);
      document.getElementById("lead_generation").checked = false;
      lead_generation_change_actions();
    }else{
      document.getElementById("allow_agent_to_screen_record_customer_cobrowsing_div").style.setProperty("display", "none", "important");
      document.getElementById("allow_agent_to_audio_record_customer_cobrowsing_div").style.display = "none";
      document.getElementById("allow_agent_to_screen_record_customer_cobrowsing").checked = false;
      document.getElementById("allow_agent_to_audio_record_customer_cobrowsing").checked = false;
    }
  }

  var inbound_options_div_id_list = [
        'show_floating_easyassist_button_div',
        'show_easyassist_connect_agent_icon_div',
        'show_only_if_agent_available_div',
        'disable_connect_button_if_agent_unavailable_div',
        'enable_non_working_hours_modal_popup_div',
        'message_on_non_working_hours_div',
        'enable_followup_leads_tab_div',
        'auto_archive_lead_timer_input_section',
        'auto_archive_popup_text_section',
        'choose_product_category_div',
        'allow_language_support_div',
        'connect_message_div',
        'no_agent_connects_toast_div',
        'field_stuck_event_handler_div',
        'allow_popup_on_browser_leave_div',
        'start_time_end_time_div',
        'maximum_active_leads_div',
        'working_days_div',
        'enable_auto_assign_unattended_lead_tr',
        'enable_auto_assign_to_one_agent_tr',
      ]

  function inbound_toggles_change_actions(event){
    if(document.getElementById("enable_inbound").checked){
      if(event){
        document.getElementById("show_floating_easyassist_button").checked = true;
        document.getElementById("show_easyassist_connect_agent_icon").checked = false;

        show_floating_easyassist_button_change_actions();
        show_easyassist_connect_agent_icon_change_actions();
      }
      document.getElementById("allow_agent_to_customer_cobrowsing").checked = false;
      document.getElementById("enable_greeting_bubble_div").classList.remove("easyassist_hidden_div");
      for(var index=0 ; index<inbound_options_div_id_list.length ; index++){
        try{
          document.getElementById(inbound_options_div_id_list[index]).classList.remove("easyassist_hidden_div");
        }catch(err){}
      }
    }else{
      if(event){
        document.getElementById("show_floating_easyassist_button").checked = false;
        document.getElementById("show_easyassist_connect_agent_icon").checked = false;
        document.getElementById("choose_product_category").checked = false;
        document.getElementById("field_stuck_event_handler").checked = false;
        document.getElementById("allow_popup_on_browser_leave").checked = false;
        document.getElementById("enable_followup_leads_tab").checked = false;
        document.getElementById("enable_auto_assign_unattended_lead_tr").checked = false;
        document.getElementById("enable_auto_assign_to_one_agent_tr").checked = false;
        document.getElementById("enable_greeting_bubble").checked = false;
      }
      document.getElementById("enable_greeting_bubble_div").classList.add("easyassist_hidden_div");
      for(var index=0 ; index<inbound_options_div_id_list.length ; index++){
        try{
          document.getElementById(inbound_options_div_id_list[index]).classList.add("easyassist_hidden_div");
        }catch(err){}
      }
    }
    default_calls_for_inbound_changes();
  }
  
  function enable_inbound_change_actions(event){
    if(document.getElementById("enable_inbound").checked){
      if(event){
        document.getElementById("show_floating_easyassist_button").checked = true;
        document.getElementById("show_easyassist_connect_agent_icon").checked = false;

        show_floating_easyassist_button_change_actions();
        show_easyassist_connect_agent_icon_change_actions();
      }
      document.getElementById("allow_agent_to_customer_cobrowsing").checked = false;
      document.getElementById("enable_greeting_bubble_div").classList.remove("easyassist_hidden_div");
      for(var index=0 ; index<inbound_options_div_id_list.length ; index++){
        try{
          document.getElementById(inbound_options_div_id_list[index]).classList.remove("easyassist_hidden_div");
        }catch(err){}
      }
    }else{
      if(event){
        document.getElementById("show_floating_easyassist_button").checked = false;
        document.getElementById("show_easyassist_connect_agent_icon").checked = false;
        document.getElementById("choose_product_category").checked = false;
        document.getElementById("field_stuck_event_handler").checked = false;
        document.getElementById("allow_popup_on_browser_leave").checked = false;
        document.getElementById("enable_followup_leads_tab").checked = false;
        document.getElementById("enable_auto_assign_unattended_lead_tr").checked = false;
        document.getElementById("enable_auto_assign_to_one_agent_tr").checked = false;
        document.getElementById("enable_greeting_bubble").checked = false;
        // show_floating_easyassist_button_change_actions();
        // show_easyassist_connect_agent_icon_change_actions();
        // choose_product_category_change_actions();
        // field_stuck_event_handler_change_actions();
        // allow_popup_on_browser_leave_change_actions();
      }
      document.getElementById("enable_greeting_bubble_div").classList.add("easyassist_hidden_div");
      for(var index=0 ; index<inbound_options_div_id_list.length ; index++){
        try{
          document.getElementById(inbound_options_div_id_list[index]).classList.add("easyassist_hidden_div");
        }catch(err){}
      }
    }  
    default_function_calls();
  }

  function action_for_chat_functionality() {
    let enable_chat_functionality = document.getElementById("enable_chat_functionality");
    if(enable_chat_functionality.checked == false){ 
      document.getElementById("enable_greeting_chat_div").style.display = "none";
      document.getElementById("display_chat_icon").style.display = "none";
      document.getElementById("enable_chat_bubble").checked = false;
      action_for_chat_bubble();
    } else {
      document.getElementById("enable_greeting_chat_div").style.display = "";
    }
  }

  function action_for_chat_bubble() {
    let enable_chat_bubble = document.getElementById("enable_chat_bubble");
    if(enable_chat_bubble.checked == false) {
      document.getElementById("display_chat_icon").style.display = "none";
    } else {
      document.getElementById("display_chat_icon").style.display = "";
    }
  }

  function default_calls_for_inbound_changes(){
    disable_connect_button_if_agent_unavailable_change_actions();
    allow_language_support_change_actions();
    choose_product_category_change_actions();
    change_product_category_list_div_visiblity();
    enable_predefined_remarks_change_actions();
    change_predefined_remarks_list_with_dropdown_div_text
    enable_predefined_remarks_with_buttons_change_actions();
    allow_screen_recording_change_actions();
    enable_masked_field_warning_change_actions();
    enable_agent_connect_message_change_actions();
    show_floating_easyassist_button_change_actions();
    show_easyassist_connect_agent_icon_change_actions();
    field_stuck_event_handler_change_actions();
    allow_support_documents_change_actions();
    show_verification_code_modal_change_actions();
    no_agent_connects_toast_change_actions();
    allow_popup_on_browser_leave_change_actions();
    allow_meeting_end_time_change_actions();
    no_agent_connect_toast_meeting_startup();
    allow_video_calling_cobrowsing_change_actions();
    allow_screen_sharing_cobrowse_change_actions();
    enable_voip_calling_change_actions();
    enable_voip_with_video_calling_change_actions();
    enable_followup_leads_tab_change_actions();
    maximum_active_leads_change_actions();
    auto_assign_unattended_leads_change_actions();
    auto_assign_to_one_agent_change_actions();
    deploy_chatbot_flag_change_actions();
    enable_smart_agent_assignment_change_actions();
    hide_greeting_bubble_div();
  }

  function default_function_calls(){
    disable_connect_button_if_agent_unavailable_change_actions();
    allow_language_support_change_actions();
    choose_product_category_change_actions();
    change_product_category_list_div_visiblity();
    enable_predefined_remarks_change_actions();
    change_predefined_remarks_list_with_dropdown_div_text
    enable_predefined_remarks_with_buttons_change_actions();
    allow_screen_recording_change_actions();
    enable_masked_field_warning_change_actions();
    enable_agent_connect_message_change_actions();
    lead_generation_change_actions();
    show_floating_easyassist_button_change_actions();
    show_easyassist_connect_agent_icon_change_actions();
    field_stuck_event_handler_change_actions();
    allow_support_documents_change_actions();
    show_verification_code_modal_change_actions();
    no_agent_connects_toast_change_actions();
    allow_popup_on_browser_leave_change_actions();
    allow_meeting_end_time_change_actions();
    no_agent_connect_toast_meeting_startup();
    allow_video_calling_cobrowsing_change_actions();
    allow_screen_sharing_cobrowse_change_actions();
    enable_voip_calling_change_actions();
    enable_voip_with_video_calling_change_actions();
    enable_followup_leads_tab_change_actions();
    reverse_cobrowsing_toggles_action();
    maximum_active_leads_change_actions();
    auto_assign_unattended_leads_change_actions();
    auto_assign_to_one_agent_change_actions();
    deploy_chatbot_flag_change_actions();
    enable_smart_agent_assignment_change_actions();
    hide_greeting_bubble_div();
    action_for_chat_functionality();
    action_for_chat_bubble();
  }
  // default_function_calls();

  enable_inbound_change_actions();
  document.getElementById("enable_smart_agent_assignment").addEventListener(
    "click", enable_smart_agent_assignment_change_actions)
  document.getElementById("disable_connect_button_if_agent_unavailable").addEventListener(
    "click", disable_connect_button_if_agent_unavailable_change_actions);
  document.getElementById("allow_language_support").addEventListener(
    "click", allow_language_support_change_actions);
  document.getElementById("choose_product_category").addEventListener(
    "click", choose_product_category_change_actions);
  document.getElementById("choose_product_category").addEventListener(
    "click", change_product_category_list_div_visiblity);
  document.getElementById("enable_tag_based_assignment_for_outbound").addEventListener(
    "click", change_product_category_list_div_visiblity);
  document.getElementById("enable_predefined_remarks").addEventListener(
    "click", enable_predefined_remarks_change_actions);
  document.getElementById("enable_predefined_remarks_with_buttons").addEventListener(
    "click", enable_predefined_remarks_with_buttons_change_actions);
  document.getElementById("allow_screen_recording").addEventListener(
    "click", allow_screen_recording_change_actions);
  document.getElementById("enable_masked_field_warning").addEventListener(
    "click", enable_masked_field_warning_change_actions)
  document.getElementById("enable_agent_connect_message").addEventListener(
    "click", enable_agent_connect_message_change_actions)
  document.getElementById("lead_generation").addEventListener(
    'change', lead_generation_change_actions);
  document.getElementById("show_floating_easyassist_button").addEventListener(
    'change', show_floating_easyassist_button_change_actions);
  document.getElementById("show_easyassist_connect_agent_icon").addEventListener(
    'change', show_easyassist_connect_agent_icon_change_actions)
  document.getElementById("field_stuck_event_handler").addEventListener(
    'change', field_stuck_event_handler_change_actions)
  document.getElementById("allow_support_documents").addEventListener(
    'change', allow_support_documents_change_actions);
  document.getElementById("enable_greeting_bubble").addEventListener(
    'change', hide_greeting_bubble_div);  
  document.getElementById("enable_chat_functionality").addEventListener(
    'change', action_for_chat_functionality);
  document.getElementById("enable_chat_bubble").addEventListener(
    'change', action_for_chat_bubble);
  document.getElementById("show_verification_code_modal").addEventListener(
    'change', show_verification_code_modal_change_actions);
  document.getElementById("no_agent_connects_toast").addEventListener(
    'change', no_agent_connects_toast_change_actions);
  document.getElementById("allow_popup_on_browser_leave").addEventListener(
    'change', allow_popup_on_browser_leave_change_actions);
  document.getElementById("allow_meeting_end_time").addEventListener(
    "click", allow_meeting_end_time_change_actions);
  document.getElementById("no_agent_connects_toast_meeting").addEventListener(
    "click", allow_no_agent_connect_toast_meeting_actions);
  document.getElementById("allow_video_meeting_only").addEventListener(
    "click", allow_only_video_calling_actions);
  document.getElementById("show_cobrowsing_meeting_lobby").addEventListener(
    "click", allow_lobby_page_actions);
  document.getElementById("allow_video_calling_cobrowsing").addEventListener(
    'change', allow_video_calling_cobrowsing_change_actions);
  document.getElementById("allow_screen_sharing_cobrowse").addEventListener(
    'change', allow_screen_sharing_cobrowse_change_actions);
  document.getElementById("enable_voip_calling").addEventListener(
    'change', enable_voip_calling_change_actions);
  document.getElementById("enable_voip_with_video_calling").addEventListener(
    'change', enable_voip_with_video_calling_change_actions);
  document.getElementById("enable_followup_leads_tab").addEventListener(
    'change', enable_followup_leads_tab_change_actions)
  document.getElementById("allow_agent_to_customer_cobrowsing").addEventListener(
    "click", reverse_function_toggles)
  document.getElementById("allow_agent_to_screen_record_customer_cobrowsing").addEventListener(
    "click", reverse_function_toggles)
  document.getElementById("enable_inbound").addEventListener(
    "click", enable_inbound_change_actions)
  document.getElementById("maximum_active_leads").addEventListener(
    "click", maximum_active_leads_change_actions)
  document.getElementById("enable_auto_assign_unattended_lead").addEventListener(
    "click", auto_assign_unattended_leads_change_actions)
  document.getElementById("enable_auto_assign_to_one_agent").addEventListener(
    "click", auto_assign_to_one_agent_change_actions)
  document.getElementById("enable_low_bandwidth_cobrowsing").addEventListener(
    "change", enable_low_bandwidth_cobrowsing_change_actions)
  document.getElementById("deploy_chatbot_flag").addEventListener(
    'change', deploy_chatbot_flag_change_actions);

  function get_tr_tag_from_parent_recursive(element){
    var current_element = element;
    var selected_element = null;

    while(current_element){
      if(current_element.tagName.toLowerCase() == "tr"){
        selected_element = current_element;
      }
      current_element = current_element.parentElement;
    }

    return selected_element;
  }
  document.getElementById("admin-name").addEventListener('keydown', function(e) {
      var target_el = e.target;
      if(target_el.value.length >= 30) {
          if(e.key != 'Backspace' && e.key != 'Delete' && e.key != 'ArrowLeft' && e.key != 'ArrowRight') {
              e.preventDefault();
              document.getElementById("name-error-message").style.display = "inherit";
          }
          else if(e.key == 'Backspace' || e.key == 'Delete'){
            document.getElementById("name-error-message").style.display = "none";
          }
      }
      else{
        document.getElementById("name-error-message").style.display = "none";
      }
  });

  var cobrowse_logo_input_file_global = undefined;
  document.getElementById("cobrowse_logo_input").addEventListener('change', function(event) {
    var file = document.getElementById("cobrowse_logo_input").files[0];
    if(file) {
      cobrowse_logo_input_file_global = ($("#cobrowse_logo_input"))[0].files[0];
      var filename = file.name;
      if (filename.length > 30) {
        filename = get_shorter_file_name(filename, 20);
      }
      $('#cobrowse_logo_upload_modal .file-name-div').html(filename);
      $('#cobrowse_logo_upload_modal .modal-upload-file').show();
      $('#cobrowse_logo_upload_modal .progress').show();

      var progress_div = $('#cobrowse_logo_upload_modal .progress')[0].children[0];
      progress_div.classList.remove('determinate');
      progress_div.classList.add('indeterminate');
      setTimeout(function() {
        progress_div.classList.remove('indeterminate');
        progress_div.classList.add('determinate');
      }, 300);
    } else {
      if(cobrowse_logo_input_file_global == undefined){
        $('#cobrowse_logo_upload_modal .file-name-div').html("No file selected");
        $('#cobrowse_logo_upload_modal .progress').hide();
      }
    }
  });

  function remove_uploaded_file() {
    $('#cobrowse_logo_upload_modal .file-name-div').html("");
    $('#cobrowse_logo_upload_modal .modal-upload-file').hide();
    document.getElementById("cobrowse_logo_input").value = "";
    cobrowse_logo_input_file_global = undefined;
  }

  var connect_with_agent_icon_input_file_global = undefined;
  document.getElementById("connect_with_agent_icon_input").addEventListener('change', function(event) {
    var file = document.getElementById("connect_with_agent_icon_input").files[0];
    if(file) {
      connect_with_agent_icon_input_file_global = ($("#connect_with_agent_icon_input"))[0].files[0];
      var filename = file.name;
      if (filename.length > 30) {
        filename = get_shorter_file_name(filename, 20);
      }
      $('#connect_with_agent_icon_upload_modal .file-name-div').html(filename);
      $('#connect_with_agent_icon_upload_modal .modal-upload-file').show();
      $('#connect_with_agent_icon_upload_modal .progress').show();

      var progress_div = $('#connect_with_agent_icon_upload_modal .progress')[0].children[0];
      progress_div.classList.remove('determinate');
      progress_div.classList.add('indeterminate');
      setTimeout(function() {
        progress_div.classList.remove('indeterminate');
        progress_div.classList.add('determinate');
      }, 300);
    } else {
      if(connect_with_agent_icon_input_file_global == undefined){
        $('#connect_with_agent_icon_upload_modal .file-name-div').html("No file selected");
        $('#connect_with_agent_icon_upload_modal .progress').hide();
      }
    }
  });

  function remove_uploaded_file_connect_icon() {
    $('#connect_with_agent_icon_upload_modal .file-name-div').html("");
    $('#connect_with_agent_icon_upload_modal .modal-upload-file').hide();
    document.getElementById("connect_with_agent_icon_input").value = "";
    connect_with_agent_icon_input_file_global = undefined;
  }


  function show_edit_masking_field_modal(field_id) {
    $("#edit_masking_field_modal_" + field_id).modal("show");
  }

  function show_delete_masking_field_modal(field_id) {
    $("#delete_masking_field_modal_" + field_id).modal("show");
  }

  function show_search_tag_field_modal(field_id) {
    $("#edit_search_tag_field_modal_" + field_id).modal("show");
  }

  function show_delete_search_tag_field_modal(field_id) {
    $("#delete_search_tag_field_field_modal_" + field_id).modal("show");
  }

  function show_edit_auto_fetch_field_modal(field_id) {
    $("#edit_auto_fetch_field_modal_" + field_id).modal("show");
  }

  function show_delete_auto_fetch_field_modal(field_id) {
    $("#delete_auto_fetch_field_field_modal_" + field_id).modal("show");
  }

  $(document).ready(function() {
    var verify_inputs = document.getElementsByClassName('pii-data-otp');
    for(let idx = 0; idx < verify_inputs.length; idx ++) {
        verify_inputs[idx].addEventListener('keyup', function(e) {
            if(e.key == 'Backspace') {
                if(this.previousElementSibling) {
                    this.previousElementSibling.focus();
                }
            } else if(e.key >= '0' && e.key <= '9') {
                keys = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
                if (keys.indexOf(this.value) != -1) {
                    if(this.nextElementSibling) {
                        this.nextElementSibling.focus();
                    }
                }
            }
        });

        verify_inputs[idx].addEventListener('keydown', function(e) {
            if(e.key >= 0 && e.key <= 9) {
                if(this.value.length + 1 > 1) {
                    if(this.nextElementSibling) {
                        this.nextElementSibling.focus();
                    } else {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                }
            } else if(e.key == "ArrowDown" || e.key == "ArrowUp") {
                e.preventDefault();
                e.stopPropagation();
            } else if(e.key == "-" || e.key == "_" || e.key == "+" || e.key == "=" || e.key == "e" || e.key == "E") {
                e.preventDefault();
                e.stopPropagation();
            }
        });

        verify_inputs[idx].addEventListener('paste', function(e) {
            var regex_code = /^[0-9]{6}$/g;
            var clipboard_data = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData;
            var pasted_data = clipboard_data.getData('text');

            if(idx == 0) {
                if(regex_code.test(pasted_data)){
                    for(var index = 0; index < verify_inputs.length; index ++) {
                        verify_inputs[index].value = pasted_data[index];
                        verify_inputs[index].focus();
                    }
                }
            }
            e.preventDefault();
            e.stopPropagation();
        });
    }
    easyassist_font_family_list("{{ access_token_obj.font_family }}");

    $("#floating_button_left_right_position").on("keypress input", function(e) {
      if(e.key == "e") {
        event.preventDefault();
      }
    })
  });

  try{
    document.getElementById("working-day-all").addEventListener("change", function() {
        if(document.getElementById("working-day-all").checked) {
            is_checked = true;
        } else {
            is_checked = false;
        }

        for(idx = 0; idx < 7; idx ++) {
            document.getElementById("working-day-"+idx).checked = is_checked;
        }
    });

    for(var index = 0; index < 7; index ++) {
      document.getElementById("working-day-" + index).addEventListener('change', function() {
        if(this.checked) {
          var all_working_day_selected = true;
          for(var idx = 0; idx < 7; idx ++) {
            if(!document.getElementById("working-day-" + idx).checked) {
              all_working_day_selected = false;
            }
          }
          if(all_working_day_selected) {
            document.getElementById("working-day-all").checked = true;
          } else {
            document.getElementById("working-day-all").checked = false;
          }
        } else {
          document.getElementById("working-day-all").checked = false;
        }  
      });
    }
  }catch(err){}

function handleDragIconMouseOver(type,element){
    element.querySelector("svg").style.display="";
    if(type==="Button" && document.getElementById("enable_predefined_subremarks_with_buttons").checked==true)
    element.querySelector(".add-sub-remark-btn").style.display="";
    if(type==="Dropdown" && document.getElementById("enable_predefined_subremarks").checked==true)
    element.querySelector(".add-sub-remark-btn").style.display="";
}
function handleDragIconMouseOut(type,element){
    if(type==="Button" && document.getElementById("enable_predefined_subremarks_with_buttons").checked==true)
    element.querySelector(".add-sub-remark-btn").style.display="none";
    if(type==="Dropdown" && document.getElementById("enable_predefined_subremarks").checked==true)
    element.querySelector(".add-sub-remark-btn").style.display="none";
}
function change_predefined_remarks_list_with_buttons_div_text(element){
    if(!element.previousElementSibling.checked)
    {
        document.getElementById("map-sub-remarks-text-for-buttons").style.display="inline-block";
        document.getElementById("predefined_remarks_list_with_buttons_div_tooltip").setAttribute("data-original-title",`Please hit "Enter" to add the remark. You can add multiple sub-remarks by clicking on the remarks added.
(Eg: Remarks- Lead Drop, Sub remarks - No Payment, Out of Coverage Area).`)
    } 
    else
    {
        document.getElementById("map-sub-remarks-text-for-buttons").style.display="none";
        document.getElementById("predefined_remarks_list_with_buttons_div_tooltip").setAttribute("data-original-title",`Press enter to save the remark. You can add multiple remarks.`)
    }
    
}

function change_predefined_remarks_list_with_dropdown_div_text(element){
    if(!element.previousElementSibling.checked)
    {
        document.getElementById("map-sub-remarks-text-for-dropdown").style.display="inline-block";
        document.getElementById("predefined_remarks_list_with_dropdown_div_tooltip").setAttribute("data-original-title",`Please hit "Enter" to add the remark. You can add multiple sub-remarks by clicking on the remarks added.
(Eg: Remarks- Lead Drop, Sub remarks - No Payment, Out of Coverage Area).`)
    } 
    else
    {
        document.getElementById("map-sub-remarks-text-for-dropdown").style.display="none";
        document.getElementById("predefined_remarks_list_with_dropdown_div_tooltip").setAttribute("data-original-title",`Press enter to save the remark. You can add multiple remarks.`)
    }
    
}

function hide_greeting_bubble_div(){
    var check_element_1 = document.getElementById('enable_greeting_bubble');
    if(check_element_1.checked == false){
        document.getElementById('greeting-bubble-timer-div').classList.add('easyassist_hidden_div');
        document.getElementById('greeting-bubble-text-div').classList.add('easyassist_hidden_div');
    }else{
        document.getElementById('greeting-bubble-timer-div').classList.remove('easyassist_hidden_div');
        document.getElementById('greeting-bubble-text-div').classList.remove('easyassist_hidden_div');
        if (document.getElementById("show_floating_easyassist_button").checked == false && document.getElementById("show_easyassist_connect_agent_icon").checked == false){
          document.getElementById("show_floating_easyassist_button").checked = true;
          // document.getElementById("floating-button-postion-div").classList.remove("easyassist_hidden_div");

          show_easyassist_connect_agent_icon_change_actions();
        }
    }
}

function handle_mouse_out_drag_icon_subremarks_modal(element){
  element.querySelector(".dragable-item-icon").style.display="none";
}
function handle_mouse_over_drag_icon_subremarks_modal(element){
  element.querySelector(".dragable-item-icon").style.display="block";
}

// individual elements event listeners
if (document.getElementById("auto_assign_unattended_lead_timer_input")) {
  $("#auto_assign_unattended_lead_timer_input").on("keypress", function(event){
      var currentValue = String.fromCharCode(event.which);
      var finalValue = $(this).val() + currentValue;
      if(finalValue > 600){
        event.preventDefault();
        show_easyassist_toast("Auto Assign Timer should not be more than 600 seconds");
        return ;
      }
  });
}

if (document.getElementById("auto-archive-lead-timer-input")) {
  $("#auto-archive-lead-timer-input").on("keypress", function(event){
      var event_value = String.fromCharCode(event.which);
      var entered_value = $(this).val() + event_value;
      if(entered_value > 120){
        event.preventDefault();
        show_easyassist_toast("Auto Archive Timer value should be between 1-120 minutes.");
      } else if (entered_value == 0) {
        event.preventDefault();
        show_easyassist_toast("Auto Archive Timer value should be between 1-120 minutes.");
      }
  });
}

if (document.getElementById("unattended-lead-archive-timer-input")) {
  $("#unattended-lead-archive-timer-input").on("keypress", function(event){
      var event_value = String.fromCharCode(event.which);
      var entered_value = $(this).val() + event_value;
      if(entered_value > 120){
        event.preventDefault();
        show_easyassist_toast("Auto end session timer value should be between 1-120 minutes.");
      } else if (entered_value == 0) {
        event.preventDefault();
        show_easyassist_toast("Auto end session timer value should be between 1-120 minutes.");
      }
  });
}

document.getElementById("chat_icon_input").addEventListener('change', (event) => {
    $("#icon-error-div").css({"display":"none"});
    $("#icon-error-div").text("");
    if (event.target.files.length) {
        var file = document.getElementById("chat_icon_input").files[0];
        var icon_error = document.getElementById("icon-error-div");
    
        if (file == undefined || file == null) {
            icon_error.innerHTML = "Please choose a file.";
            return;
        }

        var cleaned_filename = sanitize_filename(file.name)

        if (check_image_file(cleaned_filename, ["png", "PNG", "svg"], false) == false) {
            icon_error.innerHTML = "Please upload valid image file. Only '.png' or '.svg' files are allowed.";
        }

        if (cleaned_filename.size / 10000 > 30) {
            icon_error.innerHTML = "File size cannot exceed 30 KB";
            return;
        }

        chat_logo_input_file_global = ($("#chat_icon_input"))[0].files[0];
        var filename = cleaned_filename;
        if (filename.length > 30) {
            filename = get_shorter_file_name(filename, 20);
        }
        $("#progress-modal-chat-icon").css({"display":"block"});
        $('#chat_icon_upload_modal .file-name-div').html(filename);
        $('#chat_icon_upload_modal .modal-upload-file').show();
        $('#chat_icon_upload_modal .progress').show();

        var progress_div = $('#chat_icon_upload_modal .progress')[0].children[0];
        progress_div.classList.remove('determinate');
        progress_div.classList.add('indeterminate');
        setTimeout(function () {
            progress_div.classList.remove('indeterminate');
            progress_div.classList.add('determinate');
        }, 300);
    }
});

</script>

{% endblock %}
