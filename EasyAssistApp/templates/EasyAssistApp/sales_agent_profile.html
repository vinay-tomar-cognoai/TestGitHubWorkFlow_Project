{% extends 'EasyAssistApp/console.html' %}
{% block content %}
{% load static %}
<link href="{% static 'EasyAssistApp/css/agent_new.css' %}" rel="stylesheet" type="text/css">
<style type="text/css">
    .circle {
            border-radius: 100% !important;
            overflow: hidden;
            width: 90px;
            height: 90px;
            background: #CBCACA;
          }

          .profile-svg {
            margin: 20px;
          }

          .updated-svg {
            margin: 30px;
          }

          .circle img,
          .preview-circle img {
            max-width: 100%;
            height: auto;
          }

          .profile-pic {
            width: 200px;
            max-height: 90px;
            display: inline-block;
          }


          .p-image {
            width: 24px;
            height: 24px;
            border-radius: 100% !important;
            background: #ffffff;
            position: absolute;
            top: 77px;
            left: 74px;
            text-align: center;
          }

          .upload-button {
            cursor: pointer;
            font-size: 1.2em;
          }


          .profile-upload {
            cursor: pointer;
          }

          .custom-btn {
            width: 155px;
            height: 47px;
            padding: 12px 16px 11px;
            font-size: 14px;
            border-radius: 4px;
            letter-spacing: 0.6px;
          }

          .upload-btn {
            border: none;
            outline: none;
            background: #2F80ED;
            color: #ffffff;
          }

          .remove-btn {
            outline: none;
            border: 1px solid #E53E3E;
            background: #ffffff;
            color: #FF0000;
          }

          .preview-circle {
            border-radius: 100% !important;
            overflow: hidden;
            width: 120px;
            height: 120px;
            background: #CBCACA;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 32px;
          }



          .button-group button:focus {
            outline: none !important;
          }

          #remove-profile-pic-Modal .remove-profile-text {
            font-size: 18px;
            font-weight: 500;
            color: #2D2D2D !important;
            line-height: 140%;
            margin-top: 32px;
            margin-bottom: 10px;
          }

          #rotate-image {
            cursor: pointer;
          }

          .toast-wrapper {
            position: absolute;
            top: 10px;
            left: 40vw;
            z-index: 1000;
          }

          .toast-wrapper p {
            padding: 10px 20px;
          }

          .toast-wrapper .hide {
            display: none;
          }

          @media (max-width:575px) {
            .button-group {
              flex-direction: column;
              gap: 10px;
              width: 100%;
            }

            .edit-btn {
              margin: 0;
            }

            .custom-btn {
              height: 47px;
              padding: 12px 16px 11px;
              font-size: 14px;
              border-radius: 4px;
              width: 100% !important;
            }

            .custom-file-upload-profile {
              width: 100% !important;
            }

            .custom-btn svg {
              margin-right: 10px;
            }
          }

          .result img {
            max-width: 100% !important;
          }

          #file-input {
            background: transparent;
          }

          .custom-file-upload-profile input[type="file"] {
            display: none;
          }

          .custom-file-upload-profile {
            width: 155px;
            height: 47px;
            font-size: 14px;
            border-radius: 4px;
            border: none;
            outline: none;
            background: #2F80ED;
            color: #ffffff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            letter-spacing: 1px;
            font-weight: normal;
          }



          #preview-profile-pic-Modal .cropper-crop-box,
          .cropper-view-box {
            border-radius: 50%;
          }

          #preview-profile-pic-Modal .cropper-view-box {
            box-shadow: 0 0 0 1px #39f;
            outline: 0;
            background: #000;
          }

          .hide {
            display: none;
          }

          @media (max-width:320px) {
            .toast-wrapper {
              left: 15vw;
            }

            .toast-wrapper p {
              font-size: 10px;
              padding: 10px 20px;
            }
          }

          @media (max-width:770px) {
            .toast-wrapper {
              left: 30vw;
            }
          }


          @media (max-width:420px) {
            .toast-wrapper {
              left: 15vw;
            }
          }

          #upload-profile-pic-Modal .sub-heading {
            font-size: 12px;
            letter-spacing: 0.1px;
            font-weight: 400;
            font-size: 16px;
            margin: 32px 0;
          }

          #remove-profile-pic-Modal .sub-heading {
            font-size: 12px;
            letter-spacing: 0.1px;
            font-weight: 400;
            font-size: 16px;
          }

          #upload-profile-pic-Modal .text-danger {
            font-size: 12px;
            letter-spacing: 0.5px;
            font-weight: 400;
            margin: 10px 0;
          }

          #preview-profile-pic-Modal .cancel-btn:hover,
          #remove-profile-pic-Modal .cancel-btn:hover,
          #upload-profile-pic-Modal .cancel-btn:hover {
            transform: none !important;
            box-shadow: none !important;
            transition: none !important;
            background-color: none !important;
          }

          #agent-profile-toast {
            position: absolute;
            top: 10px;
            left: 50vw;
            z-index: 1000;
            visibility: hidden;
            background: #ECFDF5;
            color: #0ce00c;
            border-radius: 8px;
            border: 1px solid #6EE7B7;
            padding: 10px 20px;
            animation-iteration-count: 1;
            transform: translateX(-50%);
          }

          #agent-profile-toast.show {
            visibility: visible;
          }
        </style>

        <style type="text/css" media="screen">
          #product-category-li {
            display: inline-block;
            color: #fff;
            border-radius: 10px;
            padding: 0rem 0.6rem;
            margin-right: 5px;
            margin-top: 5px;
          }

          #predefined-remark-li,
          #support-language-li,
          #predefined-remark-li-with-buttons {
            display: inline-block;
            color: #fff;
            border-radius: 10px;
            padding: 0rem 0.6rem;
            margin-right: 5px;
            margin-top: 5px;
          }

          #product_category_tag_list {
            padding: 4px 8px 4px 15px;
            background: white;
            border-radius: 0.2rem;
            width: 100%;
            border: 1px solid #d1d3e2;
            margin-bottom: 0px;
          }

          .input-group-text {
            width: 143px;
            height: 31px;
          }

          .easyassist-disabled-input:hover {
            cursor: not-allowed;
          }

          #editor-code {
            width: 100%;
            height: 10em;
            overflow: auto;
          }

          #easyassist-language-support-list-div .dropdown {
            width: 100%;
          }

          .bootstrap-select button {
            border-radius: 5px !important;
            border: 0px solid #2755cb !important;
            box-shadow: 0 0 1px #000 inset !important;
            text-align: left;
            font-size: 1rem !important;
            width: 100% !important;
          }

          .bootstrap-select .filter-option {
            white-space: nowrap;
            overflow: hidden;
          }

          .bootstrap-select .dropdown-item {
            color: #6e707e !important;
            font-size: 1rem;
            background-color: transparent;
          }

          .bootstrap-select .dropdown-item:hover {
            background-color: #F8F9F9;
          }

          #pills-home-tab {
            cursor: default;
          }

          input.disabled {
            color: #6E707E !important;
            -webkit-text-fill-color: #6E707E;
            opacity: 1;
          }

          .form-control:disabled,
          .form-control[readonly] {
            color: #6e707e !important;
            -webkit-text-fill-color: #6e707e;
            opacity: 1;
          }

          .change-password-option {
            justify-content: flex-end;
          }

          .change-password-btn {
            border: none !important;
            outline: none !important;
            background: transparent !important;
            padding-right: 0px !important;
            width: 165px !important;
            margin-right: 12px;

            text-align: right !important;
          }
          
          .change-password-color {
            font-weight: 500 !important;
            {% if access_token_obj.get_cobrowsing_console_theme_color != None %}
                color: {{ access_token_obj.get_cobrowsing_console_theme_color.hex }} !important;
            {% else %}
                color: #0254D7 !important;
            {% endif %}
          }
          
          
          #change-password-div {
            /* margin-top: -15px !important; */
            margin-bottom: 15px !important;
          }

          #apply_filter_modal .custom-select-options {
            font-family: "Silka", Sans-Serif;
            background: #FFFFFF;
            border: 1px solid #E6E6E6;
            border-radius: 10px;
            padding: 9px 20px !important;
            font-size: 14px;
            font-weight: 500;
            order: 0 !important;
            box-sizing: border-box !important;
            cursor: pointer;
            color: #2D2D2D;
          }

          #card-block h5 {
            font-size: 18px;
            color: #4D4D4D !important;
            line-height: 140%;

          }

          #card-block dd {
            font-size: 14px !important;
            line-height: 24px;
            color: #7B7A7B !important;
          }
</style>

<!-- Begin Page Content -->
<div class="container-fluid">
    <div>
      
      <div >
        <!-- sprint 5.9 breadcrum navbar -->
        <div class="page-header">
          <div class="row">
            <div class="col-sm-6 d-flex align-items-center">
              <div class="nav nav-pills navbar-right">
                <!-- sprint 5.9 back to previous Icon link -->
                <a class="anchor-reset back-btn" href="/easy-assist/sales-ai/settings/">
                  <span class="mr-3 mb-auto " style="cursor: pointer;">
                    <svg class="back-arrow-svg" width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect width="44" height="44" rx="22" transform="matrix(1 0 0 -1 0 44)" fill="white" />
                      {% if cobrowse_agent.get_access_token_obj.cobrowsing_console_theme_color != None %}
                      <path
                    d="M20.2954 29.7162C20.6888 30.1038 21.322 30.0991 21.7096 29.7057C22.0972 29.3123 22.0925 28.6792 21.6991 28.2915L16.3288 23.0001H29.9999C30.5522 23.0001 30.9999 22.5524 30.9999 22.0001C30.9999 21.4479 30.5522 21.0001 29.9999 21.0001H16.3354L21.6991 15.7153C22.0925 15.3276 22.0972 14.6945 21.7096 14.3011C21.322 13.9077 20.6888 13.903 20.2954 14.2906L13.3712 21.113C12.8743 21.6026 12.8743 22.4042 13.3712 22.8938L20.2954 29.7162Z"
                    fill="{{ access_token_obj.get_cobrowsing_console_theme_color.hex }}" />
                      {% else %}
                      <path
                    d="M20.2954 29.7162C20.6888 30.1038 21.322 30.0991 21.7096 29.7057C22.0972 29.3123 22.0925 28.6792 21.6991 28.2915L16.3288 23.0001H29.9999C30.5522 23.0001 30.9999 22.5524 30.9999 22.0001C30.9999 21.4479 30.5522 21.0001 29.9999 21.0001H16.3354L21.6991 15.7153C22.0925 15.3276 22.0972 14.6945 21.7096 14.3011C21.322 13.9077 20.6888 13.903 20.2954 14.2906L13.3712 21.113C12.8743 21.6026 12.8743 22.4042 13.3712 22.8938L20.2954 29.7162Z"
                    fill="#0254D7" />

                      {% endif %} 
                    
                      
                    </svg>
                  </span>
                </a>
                <!-- sprint 5.9 back to previous individual page wise link -->
                <h5 class="nav_btn mr-2 mt-2"> <a class="anchor-reset"  href="/easy-assist/sales-ai/settings/">Settings</a></h5>

                <div class=" mr-2 pt-2">
                  <svg class="mini-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M10.5858 6.34317L12 4.92896L19.0711 12L12 19.0711L10.5858 17.6569L16.2426 12L10.5858 6.34317Z"
                      fill="#475569" />
                  </svg>
                </div>

                <h5  class="nav_btn active1 mt-2">Profile</h5>
              </div>
            </div>
            <!-- sprint 5.9 reset and save button -->
            <div class="col-sm-6 d-flex justify-content-end">
              <button class="btn btn-width-100 d-none" id="password-change-cancel-btn" onclick="hide_change_password()">Cancel</button>
              <button class="btn btn-width-100" id="save-btn" style="background: #10B981!important;" onclick="save_agent_details(this)" >Save</button>
            </div>
          </div>
        </div>
        <!-- sprint 5.9 breadcrum navbar end -->
        <!-- sprint 5.9 Profile Settings Body Start -->
        <div class="row mt-30" style="flex-direction: column;">
          {% if cobrowse_agent.role == "agent" and access_token_obj.display_agent_profile %}    
          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="card bg-white border rounded" id="main_card">
              <div class="row no-gutters">
                <div class="col-lg-4 col-md-5 pl-20 d-flex align-items-center">
                  <div class="card-block  mt-3 pb-0" id="card_margin">
                    <h5 class="card-title">
                      <dt class="input-title-main">Profile Picture <span style="color: red;"> *</span></dt>
                    </h5>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6 ml-3 py-0">
                  
                  <div class="profile-pic-div" style="margin: 20px 0; margin-right: 10px;">
                    <div class="circle">
                      {% if cobrowse_agent.agent_profile_pic_source == "" or cobrowse_agent.agent_profile_pic_source == "null" %}
                            <svg width="52" height="52" class="profile-svg" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M26 4.33334C20.3233 4.33334 15.7083 8.94834 15.7083 14.625C15.7083 20.1933 20.0633 24.7 25.74 24.895C25.9133 24.8733 26.0867 24.8733 26.2167 24.895C26.26 24.895 26.2817 24.895 26.325 24.895C26.3467 24.895 26.3467 24.895 26.3683 24.895C31.915 24.7 36.27 20.1933 36.2917 14.625C36.2917 8.94834 31.6767 4.33334 26 4.33334Z" fill="white"></path>
                                    <path d="M37.0066 30.6583C30.9616 26.6283 21.1033 26.6283 15.015 30.6583C12.2633 32.5 10.7466 34.9917 10.7466 37.6567C10.7466 40.3217 12.2633 42.7917 14.9933 44.6117C18.0266 46.6483 22.0133 47.6667 26 47.6667C29.9866 47.6667 33.9733 46.6483 37.0066 44.6117C39.7366 42.77 41.2533 40.3 41.2533 37.6133C41.2316 34.9483 39.7366 32.4783 37.0066 30.6583Z" fill="white"></path>
                                </svg>                             
                                <img class="profile-pic" src="">                          
                                {% else %}
                                <img class="profile-pic" src="/{{ cobrowse_agent.agent_profile_pic_source }}">
                           {% endif %}
                        </div>
                        <div class="p-image">
                            <svg class="profile-upload" data-target="#upload-profile-pic-Modal" data-toggle="modal" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7.95763 2.27481C8.35458 2.27481 8.72184 2.48501 8.92289 2.82727L9.32816 3.51717H10.3585C11.2515 3.51717 11.9755 4.24114 11.9755 5.1342V9.86092C11.9755 10.754 11.2515 11.478 10.3585 11.478H3.64154C2.74848 11.478 2.02451 10.754 2.02451 9.86092V5.1342C2.02451 4.24114 2.74848 3.51717 3.64154 3.51717H4.67665L5.1118 2.80851C5.31542 2.47689 5.67664 2.27481 6.06579 2.27481H7.95763ZM7.95763 3.02113H6.06579C5.9546 3.02113 5.85026 3.07062 5.77997 3.15437L5.74779 3.19903L5.20341 4.08559C5.13553 4.19613 5.01513 4.26349 4.88541 4.26349H3.64154C3.16066 4.26349 2.77083 4.65332 2.77083 5.1342V9.86092C2.77083 10.3418 3.16066 10.7316 3.64154 10.7316H10.3585C10.8393 10.7316 11.2292 10.3418 11.2292 9.86092V5.1342C11.2292 4.65332 10.8393 4.26349 10.3585 4.26349H9.11458C8.98226 4.26349 8.85984 4.19342 8.79282 4.07934L8.27939 3.20529C8.21237 3.0912 8.08995 3.02113 7.95763 3.02113ZM7 5.00981C8.23655 5.00981 9.23897 6.01224 9.23897 7.24878C9.23897 8.48533 8.23655 9.48776 7 9.48776C5.76345 9.48776 4.76103 8.48533 4.76103 7.24878C4.76103 6.01224 5.76345 5.00981 7 5.00981ZM7 5.75614C6.17563 5.75614 5.50735 6.42442 5.50735 7.24878C5.50735 8.07315 6.17563 8.74143 7 8.74143C7.82436 8.74143 8.49264 8.07315 8.49264 7.24878C8.49264 6.42442 7.82436 5.75614 7 5.75614Z" fill="#0254D7"></path>
                            </svg>                          
                        </div>
                    </div>
                    
                </div>
                
              </div>
            </div>
          </div>
          {% endif %}
          <div class="row" id="card-block">
            <div class="col-md-12">
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3">
                <div class="card bg-white border rounded" id="main_card">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4 col-md-5 col-sm-6 pl-20 mobile-responsive-heading">
                      <div class="card-block pb-0">
                        <h5 class="card-title mb-0">
                          <dt class="input-title-main">Email <span style="color: red;">*</span></dt>
                        </h5>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 input-div mb  ml-2">
                      <input class="profile_input" type="text" id="agent-email" value="{{ cobrowse_agent.user.email }}" disabled>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3">
                <div class="card bg-white border rounded" id="main_card">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4 col-md-5 col-sm-6 pl-20 mobile-responsive-heading">
                      <div class="card-block  pb-0">
                        <h5 class="card-title mb-0">
                          <dt class="input-title-main">Name <span style="color: red;">*</span></dt>
                        </h5>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 input-div mb ml-2">
                      <input class="profile_input" type="text" id="agent-name" value="{{ cobrowse_agent.user.first_name }}">
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3" id="divid" style="display:none">
                <div class="card bg-white border rounded" id="main_card">
                  <h5 class="card-title ml-4 mt-4">
                    <dt class="input-title-main">Password </dt>
                  </h5>
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4 col-md-5 pl-20 mobile-responsive-heading">
                      <div class="card-block pb-0">
                        <h6 class="card-title mb-0">
                          <dt class="input-title-sub">Old Password</dt>
                        </h6>
                      </div>
                    </div>
                    <div class="col-lg-5 input-div mb  ml-2">
                      <input id="old-password" type="password" placeholder="Old Password">
                    </div>
                  </div>
                  <hr class="my-0">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4  col-md-5 pl-20 mobile-responsive-heading">
                      <div class="card-block  pb-0">
                        <h6 class="card-title mb-0">
                          <dt class="input-title-sub">New Password</dt>
                        </h6>
                      </div>
                    </div>
                      <div class="col-lg-5 input-div ml-2 d-flex align-items-center justify-content-around">
                        <input type="password" name="password" placeholder="New Password" autocomplete="current-password" required=""
                          id="new-password">
                          <div class="ml-2 fa-eye-div">
                            <i class="far fa-eye" id="togglePassword" style="cursor: pointer;"></i>
                          </div>
                      </div>
                      
                  </div>
                  <hr class="my-0">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4 col-md-5 pl-20 mobile-responsive-heading">
                      <div class="card-block pb-0">
                        <h6 class="card-title mb-0">
                          <dt class="input-title-sub">Confirm Password</dt>
                        </h6>
                      </div>
                    </div>
                    <!-- <div class="d-flex align-items-center"> -->
                      <div class="col-lg-5  input-div ml-2 d-flex align-items-center justify-content-around">
                        <input type="password" name="password" placeholder="Confirm Password" autocomplete="current-password" required=""
                          id="confirm-password">
                          <div class="ml-2 fa-eye-div">
                            <i class="far fa-eye" id="togglePassword1" style="cursor: pointer;"></i>
                          </div>
                      </div>
                      
                    <!-- </div> -->
                  </div>
                </div>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3">
                <div class="card bg-white border rounded" id="main_card">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4 col-md-5 col-sm-6 pl-20 mobile-responsive-heading">
                      <div class="card-block pb-0">
                        <h5 class="card-title mb-0 fs-18">
                          <dt class="input-title-main">Mobile No <span style="color: red;">*</span></dt>
                        </h5>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 input-div mb  ml-2 ">
                      <input class="profile_input" type="number" id="agent-mobile-number" value="{{ cobrowse_agent.mobile_number }}" autocomplete="off">
                    </div>
                  </div>
                </div>
              </div>
              {% if cobrowse_agent.role != "admin_ally" %}
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3">
                <div class="card bg-white border rounded" id="main_card">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4  col-md-5 col-sm-6 pl-20 mobile-responsive-heading">
                      <div class="card-block  pb-0">
                        <h5 class="card-title mb-0 fs-18">
                          <dt class="input-title-main">Support Level <span style="color: red;">*</span></dt>
                        </h5>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 input-div mb  ml-2">
                      <input class="profile_input" type="text" id="agent-support-level" value="{{ cobrowse_agent.support_level }}" disabled>
                    </div>
                  </div>
                </div>
              </div>
              {% else %}
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3">
                <div class="card bg-white border rounded" id="main_card">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4  col-md-5 col-sm-6 pl-20 mobile-responsive-heading">
                      <div class="card-block  pb-0">
                        <h5 class="card-title mb-0 fs-18">
                          <dt class="input-title-main">Support Level <span style="color: red;">*</span></dt>
                        </h5>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 input-div mb  ml-2">
                      <input class="profile_input" type="text" id="agent-support-level" value="{{ cobrowse_agent.support_level }}" disabled>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% if cobrowse_agent.get_access_token_obj.choose_product_category or cobrowse_agent.get_access_token_obj.enable_tag_based_assignment_for_outbound %}
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3">
                <div class="card bg-white border rounded" id="main_card">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4 col-md-5 col-sm-6 pl-20 mobile-responsive-heading">
                      <div class="card-block  pb-0">
                        <h5 class="card-title mb-0">
                          <dt class="input-title-main">Product Category <span style="color: red;">*</span></dt>
                        </h5>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 input-div mb ml-2">
                      <input class="profile_input" type="text"  value="{{product_category_string}}" disabled>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% if cobrowse_agent.get_access_token_obj.allow_language_support %}
              <div class="col-lg-12 col-md-12 col-sm-12 mb pt-3">
                <div class="card bg-white border rounded" id="main_card">
                  <div class="d-flex align-items-center responsive-mobile">
                    <div class="col-lg-4 col-md-5 col-sm-6 pl-20 mobile-responsive-heading">
                      <div class="card-block  pb-0">
                        <h5 class="card-title mb-0">
                          <dt class="input-title-main">Language <span style="color: red;">*</span></dt>
                        </h5>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 input-div mb ml-2">
                      <input class="profile_input" type="text" value=" {{supported_language_string}}" disabled>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
                 
              <h6 class="d-flex justify-content-end mt-20 text-primary change-password change-password-color" id="change-password-btn" 
                >
                Change Password?
              </h6>
              
            </div>
          </div>
          <div class="col-md-6">
            <div class="input-group input-group-sm">
            <p style="color:green;" id="save-details-error">
            </p>
            </div>
        </div>
        </div>
        
         <!-- sprint 5.9 Profile Settings Body end -->
      </div>

      </div>
  </div>
<!-- upload profile pic modal -->
<div class="modal fade" id="upload-profile-pic-Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Profile Picture</h5>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col d-flex flex-column justify-content-center align-items-center">
              <div class="profile-pic-div">
                  <div class="preview-circle">
                    {% if cobrowse_agent.agent_profile_pic_source == "" or cobrowse_agent.agent_profile_pic_source == "null" %}
                        <svg width="52" height="52" class="updated-svg" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M26 4.33334C20.3233 4.33334 15.7083 8.94834 15.7083 14.625C15.7083 20.1933 20.0633 24.7 25.74 24.895C25.9133 24.8733 26.0867 24.8733 26.2167 24.895C26.26 24.895 26.2817 24.895 26.325 24.895C26.3467 24.895 26.3467 24.895 26.3683 24.895C31.915 24.7 36.27 20.1933 36.2917 14.625C36.2917 8.94834 31.6767 4.33334 26 4.33334Z" fill="white"/>
                            <path d="M37.0066 30.6583C30.9616 26.6283 21.1033 26.6283 15.015 30.6583C12.2633 32.5 10.7466 34.9917 10.7466 37.6567C10.7466 40.3217 12.2633 42.7917 14.9933 44.6117C18.0266 46.6483 22.0133 47.6667 26 47.6667C29.9866 47.6667 33.9733 46.6483 37.0066 44.6117C39.7366 42.77 41.2533 40.3 41.2533 37.6133C41.2316 34.9483 39.7366 32.4783 37.0066 30.6583Z" fill="white"/>
                        </svg>                             
                        <img class="updated-profile" src="">                                                    
                    {% else %}
                        <img class="updated-profile" src="/{{ cobrowse_agent.agent_profile_pic_source }}">
                    {% endif %}
                    </div>
              </div>
              <div class="d-flex align-items-center sub-heading">
                <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6.00005 7.7C6.31831 7.7 6.62353 7.57357 6.84858 7.34853C7.07362 7.12348 7.20005 6.81826 7.20005 6.5C7.20005 6.18174 7.07362 5.87652 6.84858 5.65147C6.62353 5.42643 6.31831 5.3 6.00005 5.3C5.68179 5.3 5.37656 5.42643 5.15152 5.65147C4.92648 5.87652 4.80005 6.18174 4.80005 6.5C4.80005 6.81826 4.92648 7.12348 5.15152 7.34853C5.37656 7.57357 5.68179 7.7 6.00005 7.7Z" fill="#7B7A7B"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M0.274658 6.5C1.03906 4.0658 3.31306 2.3 5.99986 2.3C8.68666 2.3 10.9607 4.0658 11.7251 6.5C10.9607 8.9342 8.68666 10.7 5.99986 10.7C3.31306 10.7 1.03906 8.9342 0.274658 6.5ZM8.39986 6.5C8.39986 7.13652 8.147 7.74697 7.69691 8.19706C7.24683 8.64714 6.63638 8.9 5.99986 8.9C5.36334 8.9 4.75289 8.64714 4.3028 8.19706C3.85271 7.74697 3.59986 7.13652 3.59986 6.5C3.59986 5.86348 3.85271 5.25303 4.3028 4.80294C4.75289 4.35286 5.36334 4.1 5.99986 4.1C6.63638 4.1 7.24683 4.35286 7.69691 4.80294C8.147 5.25303 8.39986 5.86348 8.39986 6.5Z" fill="#7B7A7B"/>
                </svg>
                <p class="mb-0 ml-2" style="font-size: 12px;">This will be visible to customers</p>
              </div>
              <div class="error-message-div text-danger" style="display: none !important;">
              </div>
              <div class="button-group d-flex" >
                <label class="custom-file-upload-profile mr-3">
                  <input type="file" id="agent-profile-input" />
                  <svg width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 1px;">
                    <path d="M11.9247 0.503052C12.7225 0.503052 13.4607 0.925526 13.8647 1.61342L14.6793 3H16.75C18.5449 3 20 4.45508 20 6.25V15.75C20 17.5449 18.5449 19 16.75 19H3.25C1.45507 19 0 17.5449 0 15.75V6.25C0 4.45508 1.45507 3 3.25 3H5.33042L6.205 1.57571C6.61425 0.909207 7.34026 0.503052 8.12238 0.503052H11.9247ZM11.9247 2.00305H8.12238C7.89892 2.00305 7.6892 2.10252 7.54793 2.27084L7.48325 2.3606L6.38913 4.14245C6.25271 4.36462 6.01071 4.5 5.75 4.5H3.25C2.2835 4.5 1.5 5.28351 1.5 6.25V15.75C1.5 16.7165 2.2835 17.5 3.25 17.5H16.75C17.7165 17.5 18.5 16.7165 18.5 15.75V6.25C18.5 5.28351 17.7165 4.5 16.75 4.5H14.25C13.9841 4.5 13.738 4.35918 13.6033 4.12988L12.5714 2.37318C12.4367 2.14388 12.1906 2.00305 11.9247 2.00305ZM10 6C12.4853 6 14.5 8.01472 14.5 10.5C14.5 12.9853 12.4853 15 10 15C7.51472 15 5.5 12.9853 5.5 10.5C5.5 8.01472 7.51472 6 10 6ZM10 7.5C8.34315 7.5 7 8.84315 7 10.5C7 12.1569 8.34315 13.5 10 13.5C11.6569 13.5 13 12.1569 13 10.5C13 8.84315 11.6569 7.5 10 7.5Z" fill="white"/>
                    </svg>               
                  <span>Upload</span>
                </label>
                <button class="custom-btn remove-btn" id="remove-profile-pic" data-dismiss="modal" data-target="#remove-profile-pic-Modal" data-toggle="modal" style="opacity: 0.25;" disabled>
                  <svg width="18" height="20" style="margin-right: 0 !important;" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11 8L10.7 15M7.3 15L7 8M3 4L3.87554 17.133C3.94558 18.1836 4.81818 19 5.87111 19H12.1289C13.1818 19 14.0544 18.1836 14.1245 17.133L15 4M3 4H6M3 4H1M15 4H17M15 4H12M12 4V3C12 1.89543 11.1046 1 10 1H8C6.89543 1 6 1.89543 6 3V4M12 4H6" stroke="#FF0000" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Remove</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn  cancel-btn" type="button" onclick="reset_file_input_field()">Cancel</button>
          <button class="btn btn-primary" id="save-profile" type="button" onclick="upload_agent_profile_picture()">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- remove profile pic modal -->
  <div class="modal fade" id="remove-profile-pic-Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Remove Profile Picture</h5>
        </div>
        <div class="modal-body" style="padding: 0 !important;">
          <div class="row">
            <div class="col d-flex flex-column justify-content-center align-items-center">
              <div class="profile-pic-div">
                  <div class="preview-circle">
                    <svg width="52" height="52" class="remove-profile-svg" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M26 4.33334C20.3233 4.33334 15.7083 8.94834 15.7083 14.625C15.7083 20.1933 20.0633 24.7 25.74 24.895C25.9133 24.8733 26.0867 24.8733 26.2167 24.895C26.26 24.895 26.2817 24.895 26.325 24.895C26.3467 24.895 26.3467 24.895 26.3683 24.895C31.915 24.7 36.27 20.1933 36.2917 14.625C36.2917 8.94834 31.6767 4.33334 26 4.33334Z" fill="white"/>
                      <path d="M37.0066 30.6583C30.9616 26.6283 21.1033 26.6283 15.015 30.6583C12.2633 32.5 10.7466 34.9917 10.7466 37.6567C10.7466 40.3217 12.2633 42.7917 14.9933 44.6117C18.0266 46.6483 22.0133 47.6667 26 47.6667C29.9866 47.6667 33.9733 46.6483 37.0066 44.6117C39.7366 42.77 41.2533 40.3 41.2533 37.6133C41.2316 34.9483 39.7366 32.4783 37.0066 30.6583Z" fill="white"/>
                      </svg>                             
                    <img class="remove-profile" src="">
                  </div>
              </div>
              <div class="text-center mb-2">
                <p class="remove-profile-text">Remove Profile Picture ?</p>
                <p class="text-secondary sub-heading">This image will be used in your profile.</p>
              </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn  cancel-btn" type="button" data-dismiss="modal">Cancel</button>
          <button class="btn delete-profile-btn" id="remove-profile-btn" type="button" data-dismiss="modal" onclick="delete_agent_profile_picture()">Remove</button>
        </div>
      </div>
    </div>
  </div>
  </div>

  <!-- preview modal -->
  <div class="modal fade" id="preview-profile-pic-Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Profile Picture</h5>
        </div>
        <div class="modal-body" style="padding: 0 !important;">
          <div class="row">
            <div class="col d-flex flex-column justify-content-center align-items-center">
              <div class="profile-pic-div-preview mt-3" style="height: 200px !important;">
                <div class="result"></div>
              </div>
              <div class="my-3" id="rotate-image" style="font-weight: 600; letter-spacing: 0.1px;">
                <svg width="25" class="" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12.5 3C17.4706 3 21.5 7.02944 21.5 12C21.5 15.4359 19.5581 18.4885 16.6267 20.001L18.5 20C19.0523 20 19.5 20.4477 19.5 21C19.5 21.5128 19.114 21.9355 18.6166 21.9933L18.5 22H14.5C13.9872 22 13.5645 21.614 13.5067 21.1166L13.5 21V17C13.5 16.4477 13.9477 16 14.5 16C15.0128 16 15.4355 16.386 15.4933 16.8834L15.5 17L15.5014 18.3267C17.8966 17.1903 19.5 14.753 19.5 12C19.5 8.13401 16.366 5 12.5 5C8.63401 5 5.5 8.13401 5.5 12C5.5 12.5523 5.05228 13 4.5 13C3.94772 13 3.5 12.5523 3.5 12C3.5 7.02944 7.52944 3 12.5 3ZM12.5 9C14.1569 9 15.5 10.3431 15.5 12C15.5 13.6569 14.1569 15 12.5 15C10.8431 15 9.5 13.6569 9.5 12C9.5 10.3431 10.8431 9 12.5 9ZM12.5 11C11.9477 11 11.5 11.4477 11.5 12C11.5 12.5523 11.9477 13 12.5 13C13.0523 13 13.5 12.5523 13.5 12C13.5 11.4477 13.0523 11 12.5 11Z" fill="#7B7A7B"/>
                </svg>
                Rotate                 
              </div>
              <div class="text-danger" id="file-error"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn  cancel-btn" type="button" data-dismiss="modal">Cancel</button>
          <button class="btn btn-primary" id="save-photo" type="button" data-dismiss="modal">Save Photo</button>
        </div>
      </div>
    </div>
  </div>
  </div>

  <!-- toast message for profile upload -->
  <div id="agent-profile-toast"></div>

<script type="text/javascript" src="{% static 'EasyAssistApp/js/cropper.min.js' %}"></script>
<script type="text/javascript" src="{% static 'EasyAssistApp/js/custom2.js' %}"></script>
<link href="{% static 'EasyAssistApp/css/cropper.min.css' %}" rel="stylesheet">

<script>
  window.agent_profile_source = "{{ cobrowse_agent.agent_profile_pic_source }}"
    // hide changes password sprint 5.9
    document.getElementById('change-password-btn').addEventListener('click', function(){
      document.getElementById('divid').style.display = 'block';
      document.querySelector('#change-password-btn').style.visibility = 'hidden';
      document.querySelector('#password-change-cancel-btn').classList.remove('d-none');
    })

    document.querySelector('#password-change-cancel-btn').addEventListener('click', function(){
      document.getElementById('divid').style.display = 'none';
      document.querySelector('#password-change-cancel-btn').classList.add('d-none');
      document.querySelector('#change-password-btn').style.visibility = 'visible';
    })
  </script>
<script type="text/javascript">

function show_easyassist_agent_profile_toast(message,re){
    var x = document.getElementById("agent-profile-toast");
    if(re) {
        x.style.color = "#FF0000";
        x.style.border = "1px solid #E89E9E";
        x.style.background = "#FFF9F9";
    }
    x.innerHTML = message;
    x.className = "show";
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 5000);
}

    
    function hide_change_password() {
        document.getElementById("old-password").value = "";
        document.getElementById("new-password").value = "";
        document.getElementById("confirm-password").value = ""; 
    }
    
    const toggle_new_password = document.querySelector('#togglePassword');
    const new_password = document.querySelector('#new-password');

    toggle_new_password.addEventListener('click', function (e) {
        const type = new_password.getAttribute('type') === 'password' ? 'text' : 'password';
        new_password.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
    });

    const toggle_confirm_password = document.querySelector('#togglePassword1');
    const confirm_password = document.querySelector('#confirm-password');
    toggle_confirm_password.addEventListener('click', function (e) {
        const type = confirm_password.getAttribute('type') === 'password' ? 'text' : 'password';
        confirm_password.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
    });

    $('.selectall').click(function(){
        $(".individual").prop("checked",$(this).prop("checked"));
    })
     
    document.getElementById("agent-name").addEventListener('keydown', function(e) {
        var target_el = e.target;
        if(target_el.value.length >= 30) {
            if(e.key != 'Backspace' && e.key != 'Delete' && e.key != 'ArrowLeft' && e.key != 'ArrowRight') {
                e.preventDefault();
                document.getElementById("name-error-message").style.display = "inherit";
            }
            else if(e.key == 'Backspace' || e.key == 'Delete'){
              document.getElementById("name-error-message").style.display = "none";
            }
        }
        else{
          document.getElementById("name-error-message").style.display = "none";
        }
    });
    
    if(agent_profile_source && document.getElementById("remove-profile-pic")) {
      document.getElementById("remove-profile-pic").disabled = false;
      document.querySelector("#remove-profile-pic").style.opacity = 1;
    }

    function reset_file_input_field() {
        $('#upload-profile-pic-Modal').modal('hide');
        agent_profile_input_file_global = null;
        if(window.profile_picture_source != "" && window.profile_picture_source != undefined) {
            document.getElementsByClassName("updated-profile")[0].src = "/" + window.profile_picture_source;
        }
        hide_agent_profile_errors();
    }

    $(document).ready(function() {
      try {
          document.getElementById("nav-settings-menu").classList.add("active")
      } catch(err) {}
	  });

</script>
{% endblock %}
