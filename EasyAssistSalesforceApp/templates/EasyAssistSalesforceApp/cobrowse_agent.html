{% load static %}
<!DOCTYPE html>
<html style="overflow:hidden;">
<head>

  <title>Agent | Cobrowsing</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <link href="{% static 'EasyAssistSalesforceApp/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">

  <link href="{% static 'EasyAssistSalesforceApp/css/sb-admin-2.min.css' %}" rel="stylesheet">

  <link rel="shortcut icon" type="image/x-icon" href="{% static 'EasyAssistSalesforceApp/img/cobrowseLogoShort.svg' %}">

  <link rel="stylesheet" type="text/css" href="{% static 'EasyAssistSalesforceApp/css/agent.css' %}">

  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />

  <script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/jquery.min.js' %}"></script>

  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

  <script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/bootstrap-multiselect.js' %}"></script>

  <link rel="stylesheet" href="{% static 'EasyAssistSalesforceApp/css/bootstrap-multiselect.css' %}">
  <style>
    svg + label{
      background-color: {{ floating_button_bg_color }} !important;
    }
    .easyassist-custom-dropdown-container li.easyassist-option-selected {
        background: {{ floating_button_bg_color }} !important;
    }

    .modal-footer .btn-primary {
      background: {{ floating_button_bg_color }} !important;
      border-color: {{ floating_button_bg_color }} !important;
    }

    .modal-footer .btn-primary {
      background: {{ floating_button_bg_color }} !important;
      border-color: {{ floating_button_bg_color }} !important;
    }

    .modal-footer .btn-primary:hover {
      background: {{ floating_button_bg_color }} !important;
    }

    .modal-footer .btn-secondary {
      color: {{ floating_button_bg_color }} !important;
    }
  </style>

</head>
<body style="margin: unset;" oncontextmenu="return false">
<input type = "hidden" value = {{agent_name}} id = "agent_name">
{% csrf_token %}
<div class="easyassist-custom-nav-bar_wrapper">
  <div id="mySidenav" class="easyassist-custom-nav-bar">

    <!-- <a href="javascript:void(0)" data-toggle="modal" data-target="#capture_screenshot_confirm_modal">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
        <path
          d="M12.7643 2.29443C13.4956 2.29443 14.1723 2.6817 14.5426 3.31227L15.2893 4.5833H17.1875C18.8328 4.5833 20.1666 5.91713 20.1666 7.56247V16.2708C20.1666 17.9161 18.8328 19.25 17.1875 19.25H4.81248C3.16713 19.25 1.83331 17.9161 1.83331 16.2708V7.56247C1.83331 5.91713 3.16713 4.5833 4.81248 4.5833H6.71953L7.52123 3.2777C7.89638 2.66674 8.56189 2.29443 9.27885 2.29443H12.7643ZM11 7.3333C8.72181 7.3333 6.87498 9.18013 6.87498 11.4583C6.87498 13.7365 8.72181 15.5833 11 15.5833C13.2782 15.5833 15.125 13.7365 15.125 11.4583C15.125 9.18013 13.2782 7.3333 11 7.3333ZM11 8.7083C12.5188 8.7083 13.75 9.9395 13.75 11.4583C13.75 12.9771 12.5188 14.2083 11 14.2083C9.48115 14.2083 8.24998 12.9771 8.24998 11.4583C8.24998 9.9395 9.48115 8.7083 11 8.7083Z"
          fill="#2B2B2B" />
      </svg>
      <label>Capture Client Screenshot</label>
    </a> -->

    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="{{floating_button_bg_color}}" xmlns="http://www.w3.org/2000/svg"
    onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M10.4714 13.138C10.7318 12.8776 10.7318 12.4555 10.4714 12.1952L6.27615 7.99992L10.4714 3.80466C10.7318 3.54431 10.7318 3.1222 10.4714 2.86185C10.2111 2.6015 9.78895 2.6015 9.5286 2.86185L4.86193 7.52851C4.60158 7.78886 4.60158 8.21097 4.86193 8.47132L9.5286 13.138C9.78895 13.3983 10.2111 13.3983 10.4714 13.138Z" fill="{{floating_button_bg_color}}"/>
    </svg>
    <label>Minimise</label>
    </a>

    {% if allow_capture_screenshots_in_cobrowsing %}
    <a href="javascript:void(0)" data-toggle="modal" data-target="#capture_pageshot_confirm_modal" onclick="hide_cobrowsing_modals(this)">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="#000000" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)" >
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M5.49999 3.30005C4.28496 3.30005 3.29999 4.28502 3.29999 5.50005V16.5C3.29999 17.7151 4.28496 18.7 5.49999 18.7H16.5C17.715 18.7 18.7 17.7151 18.7 16.5V5.50005C18.7 4.28502 17.715 3.30005 16.5 3.30005H5.49999ZM7.14999 5.50005C6.23871 5.50005 5.49999 6.23878 5.49999 7.15005V9.35005C5.49999 9.6538 5.74623 9.90005 6.04999 9.90005C6.35374 9.90005 6.59999 9.6538 6.59999 9.35005V7.15005C6.59999 6.84629 6.84623 6.60005 7.14999 6.60005H9.34999C9.65374 6.60005 9.89999 6.3538 9.89999 6.05005C9.89999 5.74629 9.65374 5.50005 9.34999 5.50005H7.14999ZM12.65 5.50005C12.3463 5.50005 12.1 5.74629 12.1 6.05005C12.1 6.3538 12.3463 6.60005 12.65 6.60005H14.85C15.1537 6.60005 15.4 6.84629 15.4 7.15005V9.35005C15.4 9.6538 15.6463 9.90005 15.95 9.90005C16.2537 9.90005 16.5 9.6538 16.5 9.35005V7.15005C16.5 6.23878 15.7612 5.50005 14.85 5.50005H12.65ZM6.59999 12.65C6.59999 12.3463 6.35374 12.1 6.04999 12.1C5.74623 12.1 5.49999 12.3463 5.49999 12.65V14.85C5.49999 15.7613 6.23871 16.5 7.14999 16.5H9.34999C9.65374 16.5 9.89999 16.2538 9.89999 15.95C9.89999 15.6463 9.65374 15.4 9.34999 15.4H7.14999C6.84623 15.4 6.59999 15.1538 6.59999 14.85V12.65ZM16.5 12.65C16.5 12.3463 16.2537 12.1 15.95 12.1C15.6463 12.1 15.4 12.3463 15.4 12.65V14.85C15.4 15.1538 15.1537 15.4 14.85 15.4H12.65C12.3463 15.4 12.1 15.6463 12.1 15.95C12.1 16.2538 12.3463 16.5 12.65 16.5H14.85C15.7612 16.5 16.5 15.7613 16.5 14.85V12.65Z" fill="{{floating_button_bg_color}}" />
      </svg>
      <label>Capture Screenshot</label>
    </a>

    <a href="javascript:void(0)" data-toggle="modal" data-target="#captured_information_modal" onclick="fetch_cobrowsing_meta_information();hide_cobrowsing_modals(this)">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
        <path
          d="M9.62372 3.6659C9.44222 4.10083 9.31086 4.56187 9.2367 5.04183L5.72917 5.04175C4.84321 5.04175 4.125 5.75996 4.125 6.64592V12.8334H8.25C8.59806 12.8334 8.8857 13.0921 8.93122 13.4276L8.9375 13.5209C8.9375 14.66 9.86095 15.5834 11 15.5834C12.1391 15.5834 13.0625 14.66 13.0625 13.5209C13.0625 13.1412 13.3703 12.8334 13.75 12.8334H17.875L17.876 11.245C18.381 10.9817 18.8436 10.6481 19.2507 10.2572L19.25 17.1876C19.25 18.8329 17.9162 20.1667 16.2708 20.1667H5.72917C4.08381 20.1667 2.75 18.8329 2.75 17.1876V6.64592C2.75 5.00056 4.08381 3.66675 5.72917 3.66675L9.62372 3.6659ZM15.125 0.916748C17.9095 0.916748 20.1667 3.17398 20.1667 5.95842C20.1667 8.74285 17.9095 11.0001 15.125 11.0001C12.3405 11.0001 10.0833 8.74285 10.0833 5.95842C10.0833 3.17398 12.3405 0.916748 15.125 0.916748ZM15.3227 3.28962L15.2592 3.34266L15.2062 3.40613C15.098 3.56243 15.098 3.77106 15.2062 3.92737L15.2592 3.99084L16.7677 5.50008H11.9167L11.8343 5.50747C11.6472 5.54142 11.4997 5.68894 11.4658 5.87603L11.4583 5.95842L11.4658 6.04081C11.4997 6.22789 11.6472 6.37541 11.8343 6.40936L11.9167 6.41675H16.7677L15.2592 7.92599L15.2062 7.98946C15.0825 8.1681 15.1002 8.41507 15.2592 8.57417C15.4183 8.73328 15.6653 8.75095 15.8439 8.62721L15.9075 8.57417L18.2371 6.23892L18.2674 6.19533L18.2987 6.13354L18.3181 6.07589L18.3314 6.00085L18.3333 5.95842L18.3308 5.90947L18.3181 5.84095L18.2905 5.76463L18.2519 5.69748L18.2101 5.64571L15.9075 3.34266L15.8439 3.28962C15.6877 3.18135 15.479 3.18135 15.3227 3.28962Z" fill="{{floating_button_bg_color}}" />
      </svg>
      <label>View ScreenShot</label>
    </a>
    {% endif %}

    {% if enable_invite_agent_in_cobrowsing %}
    {% if allow_language_support %}
      <a href="javascript:void(0)" data-toggle="modal" data-target="#askfor_support_modal" onclick="hide_cobrowsing_modals(this)">
        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
        onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
          <path
            d="M11 1.83325C16.0626 1.83325 20.1666 5.93731 20.1666 10.9999C20.1666 16.0625 16.0626 20.1666 11 20.1666C5.93737 20.1666 1.83331 16.0625 1.83331 10.9999C1.83331 5.93731 5.93737 1.83325 11 1.83325ZM11.1146 14.6666C10.7349 14.6666 10.4271 14.9744 10.4271 15.3541C10.4271 15.7338 10.7349 16.0416 11.1146 16.0416C11.4942 16.0416 11.8021 15.7338 11.8021 15.3541C11.8021 14.9744 11.4942 14.6666 11.1146 14.6666ZM11.1146 5.95825C9.57291 5.95825 8.24998 7.28036 8.24998 8.82284C8.24998 9.13927 8.50646 9.39575 8.8229 9.39575C9.09978 9.39575 9.33073 9.19936 9.38417 8.93829L9.39283 8.88141L9.39833 8.73516C9.44816 7.86199 10.2349 7.10409 11.1146 7.10409C12.0242 7.10409 12.8333 7.91231 12.8333 8.82284C12.8338 9.36688 12.6405 9.75784 12.091 10.3791L11.9961 10.4848L11.5253 10.988C10.7776 11.8005 10.4615 12.3613 10.4674 13.1811C10.4696 13.4975 10.728 13.7522 11.0443 13.75C11.3014 13.7481 11.5178 13.5772 11.5886 13.3435L11.6024 13.2885L11.6106 13.2315L11.6132 13.1729L11.6146 13.0988C11.6311 12.7318 11.7952 12.4178 12.2018 11.9499L12.2863 11.8542L12.7515 11.3561C13.6269 10.4129 13.9801 9.79409 13.9791 8.82229C13.9791 7.27922 12.6567 5.95825 11.1146 5.95825Z" fill="{{floating_button_bg_color}}" />
        </svg>
        <label>Invite an Agent</label>
      </a>
    {% else %}
      <a href="javascript:void(0)" data-toggle="modal" data-target="#askfor_support_modal" onclick="get_list_of_support_agents();hide_cobrowsing_modals(this)">
        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
        onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
          <path
            d="M11 1.83325C16.0626 1.83325 20.1666 5.93731 20.1666 10.9999C20.1666 16.0625 16.0626 20.1666 11 20.1666C5.93737 20.1666 1.83331 16.0625 1.83331 10.9999C1.83331 5.93731 5.93737 1.83325 11 1.83325ZM11.1146 14.6666C10.7349 14.6666 10.4271 14.9744 10.4271 15.3541C10.4271 15.7338 10.7349 16.0416 11.1146 16.0416C11.4942 16.0416 11.8021 15.7338 11.8021 15.3541C11.8021 14.9744 11.4942 14.6666 11.1146 14.6666ZM11.1146 5.95825C9.57291 5.95825 8.24998 7.28036 8.24998 8.82284C8.24998 9.13927 8.50646 9.39575 8.8229 9.39575C9.09978 9.39575 9.33073 9.19936 9.38417 8.93829L9.39283 8.88141L9.39833 8.73516C9.44816 7.86199 10.2349 7.10409 11.1146 7.10409C12.0242 7.10409 12.8333 7.91231 12.8333 8.82284C12.8338 9.36688 12.6405 9.75784 12.091 10.3791L11.9961 10.4848L11.5253 10.988C10.7776 11.8005 10.4615 12.3613 10.4674 13.1811C10.4696 13.4975 10.728 13.7522 11.0443 13.75C11.3014 13.7481 11.5178 13.5772 11.5886 13.3435L11.6024 13.2885L11.6106 13.2315L11.6132 13.1729L11.6146 13.0988C11.6311 12.7318 11.7952 12.4178 12.2018 11.9499L12.2863 11.8542L12.7515 11.3561C13.6269 10.4129 13.9801 9.79409 13.9791 8.82229C13.9791 7.27922 12.6567 5.95825 11.1146 5.95825Z" fill="{{floating_button_bg_color}}" />
        </svg>
        <label>Invite an Agent</label>
      </a>
    {% endif %}
    {% endif %}

    <a href="javascript:void(0)" onclick="hide_cobrowsing_modals(this);open_livechat_agent_window()">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
        <path
          d="M11 1.83325C16.0625 1.83325 20.1666 5.93731 20.1666 10.9999C20.1666 16.0625 16.0625 20.1666 11 20.1666C9.49628 20.1666 8.04388 19.8035 6.74278 19.12L2.80991 20.1439C2.39349 20.2525 1.96797 20.0028 1.85951 19.5863C1.82597 19.4576 1.82596 19.3224 1.85948 19.1936L2.8828 15.2626C2.19741 13.9602 1.83331 12.5058 1.83331 10.9999C1.83331 5.93731 5.93737 1.83325 11 1.83325ZM12.1474 11.9166H8.02081L7.92752 11.9228C7.59195 11.9684 7.33331 12.256 7.33331 12.6041C7.33331 12.9521 7.59195 13.2398 7.92752 13.2854L8.02081 13.2916H12.1474L12.2407 13.2854C12.5763 13.2398 12.8349 12.9521 12.8349 12.6041C12.8349 12.256 12.5763 11.9684 12.2407 11.9228L12.1474 11.9166ZM13.9791 8.70825H8.02081L7.92752 8.71453C7.59195 8.76005 7.33331 9.04769 7.33331 9.39575C7.33331 9.74381 7.59195 10.0315 7.92752 10.077L8.02081 10.0833H13.9791L14.0725 10.077C14.408 10.0315 14.6666 9.74381 14.6666 9.39575C14.6666 9.04769 14.408 8.76005 14.0725 8.71453L13.9791 8.70825Z" fill="{{floating_button_bg_color}}" />
      </svg>
      <label>Chat with client</label>
    </a>
    {% if enable_edit_access and is_admin_agent %}
    <a href="javascript:void(0)" id="easyassist-edit-access-icon" data-toggle="modal" data-target="#request_for_edit_access_modal" onclick="hide_cobrowsing_modals(this)">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
        <path
          d="M12.7775 4.58321L17.4168 9.22249L8.30685 18.3324C8.05304 18.5862 7.73739 18.7694 7.39111 18.8638L2.70173 20.1427C2.18852 20.2827 1.7176 19.8117 1.85756 19.2986L3.13649 14.6092C3.23093 14.2629 3.4141 13.9473 3.66791 13.6934L12.7775 4.58321ZM5.98125 10.0832L4.60625 11.4582L2.52084 11.4586C2.14114 11.4586 1.83334 11.1508 1.83334 10.7711C1.83334 10.3914 2.14114 10.0836 2.52084 10.0836L5.98125 10.0832ZM19.1376 2.59012L19.2778 2.72247L19.4102 2.8627C20.5572 4.15082 20.5131 6.12616 19.2778 7.36141L18.3885 8.24989L13.7492 3.61155L14.6388 2.72247C15.8741 1.48722 17.8495 1.4431 19.1376 2.59012ZM9.64795 6.41656L8.27292 7.79156L2.52084 7.79194C2.14114 7.79194 1.83334 7.48414 1.83334 7.10444C1.83334 6.72475 2.14114 6.41694 2.52084 6.41694L9.64795 6.41656ZM13.3146 2.74989L11.9396 4.12488L2.52084 4.12528C2.14114 4.12528 1.83334 3.81748 1.83334 3.43778C1.83334 3.05808 2.14114 2.75028 2.52084 2.75028L13.3146 2.74989Z" fill="{{floating_button_bg_color}}" />
      </svg>
      <label>Request for edit access</label>
    </a>
    {% endif %}
    {% if allow_support_documents %}
    <a href="javascript:void(0)" data-toggle="modal" data-target="#support_material_modal" onclick="hide_cobrowsing_modals(this)">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
        <path
          d="M17.4821 14.5357C19.1094 14.5357 20.4286 15.8548 20.4286 17.4821C20.4286 19.0569 19.1931 20.3431 17.6411 20.4245L17.4848 20.4285L16.6991 20.4322C16.3736 20.4336 16.1086 20.171 16.1071 19.8455C16.1058 19.5472 16.3263 19.2997 16.6138 19.2593L16.6937 19.2536L17.4821 19.25C18.4585 19.25 19.25 18.4584 19.25 17.4821C19.25 16.5464 18.523 15.7806 17.6031 15.7183L17.4821 15.7143H16.6964C16.371 15.7143 16.1071 15.4504 16.1071 15.125C16.1071 14.8266 16.3289 14.5801 16.6164 14.541L16.6964 14.5357H17.4821ZM13.9464 14.5357C14.2719 14.5357 14.5357 14.7995 14.5357 15.125C14.5357 15.4233 14.314 15.6699 14.0264 15.7089L13.9464 15.7143H13.1607C12.1844 15.7143 11.3928 16.5058 11.3928 17.4821C11.3928 18.4178 12.1198 19.1837 13.0397 19.2459L13.1607 19.25H13.9464C14.2719 19.25 14.5357 19.5138 14.5357 19.8393C14.5357 20.1376 14.314 20.3841 14.0264 20.4232L13.9464 20.4285H13.1607C11.5334 20.4285 10.2143 19.1094 10.2143 17.4821C10.2143 15.9073 11.4497 14.6211 13.0042 14.5398L13.1607 14.5357H13.9464ZM18.6607 5.10711C19.5538 5.10711 20.2923 5.76944 20.4117 6.62973L20.4245 6.75393L20.4286 6.87497L20.4292 15.1919C19.7463 14.3144 18.6802 13.75 17.4821 13.75H13.1607C11.0995 13.75 9.42855 15.4209 9.42855 17.4821C9.42855 17.968 9.52143 18.4323 9.69035 18.8581L3.33927 18.8571C2.40359 18.8571 1.63769 18.1302 1.57549 17.2103L1.57141 17.0893V8.24918L8.01969 8.24997L8.17408 8.24321C8.48098 8.21634 8.77563 8.10964 9.02855 7.93387L9.15143 7.84022L12.4308 5.10711H18.6607ZM17.4821 16.8928C17.8076 16.8928 18.0714 17.1567 18.0714 17.4821C18.0714 17.7804 17.8497 18.027 17.5621 18.0661L17.4821 18.0714H13.1607C12.8353 18.0714 12.5714 17.8076 12.5714 17.4821C12.5714 17.1838 12.7931 16.9372 13.0807 16.8982L13.1607 16.8928H17.4821ZM8.01969 3.14282C8.38159 3.14282 8.73343 3.25384 9.02855 3.45895L9.15143 3.55257L10.8036 4.92875L8.39699 6.93481L8.33028 6.98291C8.26067 7.02607 8.1828 7.05426 8.10172 7.06566L8.01969 7.07139L1.57141 7.07061V4.91068C1.57141 3.975 2.29832 3.20911 3.21823 3.1469L3.33927 3.14282H8.01969Z" fill="{{floating_button_bg_color}}" />
      </svg>
      <label>Documents</label>
    </a>
    {% endif %}

    {% if allow_cobrowsing_meeting %}
      <a href="javascript:void(0)" data-toggle="modal" data-target="#request_meeting_modal" onclick="hide_cobrowsing_modals(this)">
        <svg height="22" viewBox="0 -87 432 432" width="22" xmlns="http://www.w3.org/2000/svg" onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)" fill="{{floating_button_bg_color}}"><path d="m278.90625 0h-248.90625c-16.5625.0195312-29.9804688 13.4375-30 30v197.421875c.0195312 16.5625 13.4375 29.980469 30 30h248.90625c16.558594-.019531 29.980469-13.4375 30-30v-197.421875c-.019531-16.5625-13.441406-29.9804688-30-30zm0 0"/><path d="m328.90625 169.800781 103.09375 56.285157v-194.105469l-103.09375 56.285156zm0 0" /></svg>
        <label>Video Call</label>
      </a>
    {% endif %}

    {% if allow_screen_recording %}
      <a href="javascript:void(0)" onclick="start_screen_recording(this)">
        <svg fill="{{floating_button_bg_color}}" height="30" width="28" viewBox="5 5 22 22" onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
            <path d="M22.667 16a6.667 6.667 0 11-13.334 0 6.667 6.667 0 0113.334 0z"></path>
            <path d="M16 24a8 8 0 000-16 8 8 0 000 16zm0 1.333a9.333 9.333 0 110-18.666 9.333 9.333 0 110 18.666z" fill="{{floating_button_bg_color}}"></path>
        </svg>
        <label>Start screen recording</label>
      </a>
    {% endif %}
    <hr style="color: black;width: 30px;">

    <a href="javascript:void(0)" onclick="hide_cobrowsing_modals(this)">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)"
      onclick="open_close_session_modal()">
        <path
          d="M11 1.83325C16.0626 1.83325 20.1666 5.93731 20.1666 10.9999C20.1666 16.0625 16.0626 20.1666 11 20.1666C5.93737 20.1666 1.83331 16.0625 1.83331 10.9999C1.83331 5.93731 5.93737 1.83325 11 1.83325ZM14.2361 7.76378L14.159 7.69722C13.9198 7.51971 13.5914 7.51751 13.35 7.69064L13.2638 7.76378L11 10.0273L8.73612 7.76378L8.65901 7.69722C8.41977 7.51971 8.0914 7.51751 7.84997 7.69064L7.76384 7.76378L7.69728 7.84089C7.51977 8.08013 7.51757 8.40849 7.6907 8.64993L7.76384 8.73605L10.0274 10.9999L7.76384 13.2638L7.69728 13.3409C7.51977 13.5801 7.51757 13.9085 7.6907 14.1499L7.76384 14.2361L7.84095 14.3026C8.08019 14.4801 8.40855 14.4823 8.64999 14.3092L8.73612 14.2361L11 11.9725L13.2638 14.2361L13.341 14.3026C13.5802 14.4801 13.9086 14.4823 14.15 14.3092L14.2361 14.2361L14.3027 14.1589C14.4802 13.9197 14.4824 13.5913 14.3093 13.3499L14.2361 13.2638L11.9726 10.9999L14.2361 8.73605L14.3027 8.65895C14.4802 8.41971 14.4824 8.09134 14.3093 7.8499L14.2361 7.76378L14.159 7.69722L14.2361 7.76378Z" fill="{{floating_button_bg_color}}" />
      </svg>
      <label>End Session</label>
    </a>

  </div>
  <div id="maximise-button" class="inner" style="display:none;">
    <div id="minimize-button" class="easyassist-custom-nav-bar">
      <a href="javascript:void(0)" class="closebtn" onclick="openNav()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"
        onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M5.52859 13.138C5.26824 12.8776 5.26824 12.4555 5.52859 12.1952L9.72385 7.99992L5.52859 3.80466C5.26824 3.54431 5.26824 3.1222 5.52859 2.86185C5.78894 2.6015 6.21105 2.6015 6.4714 2.86185L11.1381 7.52851C11.3984 7.78886 11.3984 8.21097 11.1381 8.47132L6.4714 13.138C6.21105 13.3983 5.78894 13.3983 5.52859 13.138Z" fill="{{floating_button_bg_color}}"/>
        </svg>
        <label>Maximise</label>
      </a>
    </div>
  </div>
</div>


<div class="easyassist-custom-nav-bar_wrapper-closed">
  <div id="mySidenav-session-end" class="easyassist-custom-nav-bar-closed">
    <a href="javascript:void(0)">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
      onmouseover="easyassistChangeTooltipShow(this)" onmouseout="easyassistChangeTooltipHide(this)"
      onclick="open_close_session_modal()">
        <path
          d="M11 1.83325C16.0626 1.83325 20.1666 5.93731 20.1666 10.9999C20.1666 16.0625 16.0626 20.1666 11 20.1666C5.93737 20.1666 1.83331 16.0625 1.83331 10.9999C1.83331 5.93731 5.93737 1.83325 11 1.83325ZM14.2361 7.76378L14.159 7.69722C13.9198 7.51971 13.5914 7.51751 13.35 7.69064L13.2638 7.76378L11 10.0273L8.73612 7.76378L8.65901 7.69722C8.41977 7.51971 8.0914 7.51751 7.84997 7.69064L7.76384 7.76378L7.69728 7.84089C7.51977 8.08013 7.51757 8.40849 7.6907 8.64993L7.76384 8.73605L10.0274 10.9999L7.76384 13.2638L7.69728 13.3409C7.51977 13.5801 7.51757 13.9085 7.6907 14.1499L7.76384 14.2361L7.84095 14.3026C8.08019 14.4801 8.40855 14.4823 8.64999 14.3092L8.73612 14.2361L11 11.9725L13.2638 14.2361L13.341 14.3026C13.5802 14.4801 13.9086 14.4823 14.15 14.3092L14.2361 14.2361L14.3027 14.1589C14.4802 13.9197 14.4824 13.5913 14.3093 13.3499L14.2361 13.2638L11.9726 10.9999L14.2361 8.73605L14.3027 8.65895C14.4802 8.41971 14.4824 8.09134 14.3093 7.8499L14.2361 7.76378L14.159 7.69722L14.2361 7.76378Z" fill="{{floating_button_bg_color}}" />
      </svg>
      <label>End Session</label>
    </a>
   </div>
</div>

<span id="easyassist-snackbar"></span>
<!-- <div id="easyassist-loader"></div> -->
<!--
<div class="loader" id="easyassist-loader">
  <div class="loaderCenter">
    <h3 data-text="Loading...">Loading...</h3>
  </div>
</div>
-->
<div class="gy-loader" id="easyassist-loader">
  <div class="loading-image">
    <img src="{% static 'EasyAssistSalesforceApp/img/loadingImage.svg' %}" alt="Loading Image" width="220px">

  </div>
  <div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
  </div>
  <br>
  <br>

  <div class="loading-message">
    Loading Customer Experiences at Scale.
  </div>
</div>


<div id="transaction-payment-loader" style="display: none;top: 45%;left: 45%;position: fixed;z-index: 2147483647;color: black;"><p>Redirected to Payment Page...</p></div>
<div id="frames-container"></div>

<!-- LiveChat Iframe Starts -->
<iframe id="allincall-chat-box" src="/easy-assist-salesforce/sales-ai/livechat/?session_id={{ session_id }}&salesforce_token={{salesforce_token}}" style="display: none; bottom: 1em; right: 2em; animation-name: bottom-left-right-anime;"></iframe>
<!-- LiveChat Iframe Ends -->
<img src="{% static 'EasyAssistSalesforceApp/img/Client_cursor.svg' %}" style="z-index: 2147483647;top: 0%;right: 0%;position: absolute;width: 80px;" id="client-mouse-pointer">


<div class="modal fade" id="capture_screenshot_confirm_modal" tabindex="-1" role="dialog" aria-labelledby="capture_client_screenshot_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="capture_client_screenshot_modal_label">Ready to capture client screenshot?</h5>
        <span class="modal-text">Select "capture" below to capture a screenshot.</span>
      </div>
      <div class="modal-body mt-4"></div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <a class="btn btn-primary" href="javascript:void(0)" onclick="capture_client_screenshot_confirm()" data-dismiss="modal">Capture</a>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="capture_pageshot_confirm_modal" tabindex="-1" role="dialog" aria-labelledby="capture_client_pageshot_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="capture_client_pageshot_modal_label">Ready to capture screenshot?</h5>
        <span class="modal-text">Select "capture" below to capture a screenshot.</span>
      </div>
      <div class="modal-body mt-4"></div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <a class="btn btn-primary" href="javascript:void(0)" onclick="capture_client_pageshot_confirm()" data-dismiss="modal">Capture</a>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="request_for_edit_access_modal" tabindex="-1" role="dialog" aria-labelledby="request_for_edit_access_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Request for edit access?</h5>
        <span class="modal-text">Are you sure, you want to request client for providing you edit access?</span>
      </div>
      <div class="modal-body mt-4"></div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-primary" onclick="capture_request_edit_access()" data-dismiss="modal">Request</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="captured_information_modal" tabindex="-1" role="dialog" aria-labelledby="captured_information_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="captured_information_modal_label">Captured Screenshots</h5>
      </div>
      <div class="modal-body mt-2">
          <div class="row">
            <div class="col-12">
              <div class="table-responsive">
                <table class="table table-borderless">
                    <thead>
                        <tr>
                          <th>Name</th>
                          <th>Time</th>
                          <th style="text-align: center;">Download</th>
                        </tr>
                    </thead>
                    <tbody id="meta_information_body">
                    </tbody>
                </table>
              </div>
            </div>
          </div>
      </div>
      <div class="modal-footer">
          <button class="btn btn-primary" type="button" data-dismiss="modal">Done</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="close_session_modal" tabindex="-1" role="dialog" aria-labelledby="close_session_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="close_session_modal_label">Ready to end the session?</h5>
      </div>
      <div class="modal-body mt-3">
        <div class="row mb-4">
            <div class="col-12">
                <label for="mask-successfull-cobrowsing-session">{{lead_conversion_checkbox_text}}</label>
                  <input id="mask-successfull-cobrowsing-session" type="checkbox" checked/>
            </div>
            <div class="col-12">
                <label for="close-session-remarks">Comments<sup>*</sup></label>
                <div class="row">
                  {% if enable_predefined_remarks %}
                  <div class="col-12 mt-2">
                    <select id="close-session-remarks" onchange="show_comments_textbox(this)">
                        <option value="None" selected>Select one</option>
                          {% for predefined_remark in predefined_remarks %}
                            <option value="{{ predefined_remark }}">{{ predefined_remark }}</option>
                          {% endfor %}
                          <option value="others">Others</option>
                    </select>
                  </div>
                  <div class="col-12 mt-4">
                    <textarea class="form-control close-session-remarks-text" id="close-session-remarks-text" placeholder="Remarks" disabled></textarea>
                  </div>
                  {% else %}
                  <div class="col-12 mt-2">
                    <textarea class="form-control close-session-remarks-text" id="close-session-remarks-text" placeholder="Remarks"></textarea>
                  </div>
                  {% endif %}
                </div>
            </div>
            <div class="col-12 mt-4">
              <span class="modal-end-session-text">Select end session below if you want to close session.</span>
            </div>
            <div class="col-sm-12 mt-4" style="display: none;">
                <label for="mask-test-cobrowsing-session">Mark as Test Lead.</label>
                <input id="mask-test-cobrowsing-session" type="checkbox"/>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal" id="end_session_cancel_btn"onclick="gain_focus()">Cancel</button>
        <a class="btn btn-primary" href="javascript:void(0)" onclick="close_agent_confirm_session(this)">End Session</a>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="support_material_modal" tabindex="-1" role="dialog" aria-labelledby="support_material_modal_label" aria-hidden="true">Action
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="support_material_modal_label">Support Document</h5>
        <span class="modal-text" id="support_material_modal_info"></span>
      </div>
      <div class="modal-body">
          <div class="row">
            <div class="col-12">
              <div class="table-responsive">
                <table id="support_material_table" class="table table-borderless">
                    <thead>
                      <tr>
                        <th>Document</th>
                        <th>Your Message</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody id="support_material_table_body"></tbody>
                </table>
              </div>
            </div>
          </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" type="button" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


{% if allow_cobrowsing_meeting %}
<div class="modal fade" id="request_meeting_modal" tabindex="-1" role="dialog" aria-labelledby="request_meeting_modal_label" aria-hidden="true">Action
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="support_material_modal_label">Connect with the Customer on Video Call</h5>
        <span class="modal-text">A request will be sent to the customer and you will be connected with him/her on virtual meeting</span>
      </div>
      <div class="modal-body mt-4">
        <div class="small" id="request_meeting_error" style="color:green;"></div>
      </div>
      <div id="request_meeting_button" class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-primary" id="request_button" type="button" onclick="request_for_meeting('{{ session_id }}')">Request</button>
      </div>
    </div>
  </div>
</div>
{% endif %}
<div class="modal fade" id="check_for_internet_modal" tabindex="-1" role="dialog" aria-labelledby="close_session_modal_label" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="close_session_modal_label">Weak connection detected</h5>
                <span class="modal-text"> The quality and user experience of the session may be effected due to low bandwidth.</span>
            </div>
            <div class="modal-body mt-4">
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" type="button" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="askfor_support_modal" tabindex="-1" role="dialog" aria-labelledby="close_session_modal_label" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="close_session_modal_label">Invite an Agent to this session</h5>
      </div>
      <div class="modal-body mt-4">
        <div class="row">
          {% if allow_language_support %}
            <div class="col-12 mb-4" id="all-supported-language-div">
              <label style="margin-left: 1em;">Select language</label>
              <div>
                <select id="easyassist-language-support-selected" onchange="get_list_of_support_agents()">
                    <option value="-1" selected>Select language</option>
                    {% for language in supported_language_objs %}
                        <option value="{{ language.pk }}">{{ language.title }}</option>
                    {% endfor %}
                </select>
              </div>
            </div>
          {% endif %}
          {% if choose_product_category %}
            <div class="col-12 mb-4" id="all-product-category-div">
              <label style="margin-left: 1em;">Select product category</label>
              <div>
                <select id="easyassist-product-category-selected" onchange="get_list_of_support_agents()">
                    <option value="-1" selected>Select product category</option>
                    {% for category in product_category_objs %}
                        <option value="{{ category.pk }}">{{ category.title }}</option>
                    {% endfor %}
                </select>
              </div>
            </div>
          {% endif %}
          <div class="col-12">
            <div class="support-agent-container">
              <div class="input-group support-agent-search-input-group">
                <div class="input-group-prepend">
                  <button class="input-group-text support-agent-search-btn" id="basic-addon2">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M7.19498 13.4365C8.61823 13.4362 10.0005 12.9597 11.1216 12.083L14.6465 15.6077L15.7803 14.474L12.2554 10.9493C13.1326 9.82811 13.6094 8.44563 13.6097 7.0221C13.6097 3.48537 10.7319 0.607727 7.19498 0.607727C3.65807 0.607727 0.780273 3.48537 0.780273 7.0221C0.780273 10.5588 3.65807 13.4365 7.19498 13.4365ZM7.19498 2.21132C9.84827 2.21132 12.006 4.36895 12.006 7.0221C12.006 9.67524 9.84827 11.8329 7.19498 11.8329C4.5417 11.8329 2.38395 9.67524 2.38395 7.0221C2.38395 4.36895 4.5417 2.21132 7.19498 2.21132Z" fill="#757575"/>
                      </svg>
                  </button>
                </div>
                <input type="text" class="form-control" placeholder="Search Agent" aria-label="agent_name" aria-describedby="basic-addon2" id="support-agent-search-input" autocomplete="off">
              </div>
              <div class="support-agent-list-container justify-content-center" id="div-support-agents-container">
                <li class="justify-content-center">
                  <div class="support-agent-custom-text">
                      No agents
                  </div>
                </li>
              </div>
            </div>
            <p style="color:red;" id="share-session-error"></p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
            <button class="btn btn-primary" type="button" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<script src="{% static 'EasyAssistSalesforceApp/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'EasyAssistSalesforceApp/vendor/jquery-easing/jquery.easing.min.js' %}"></script>
<script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/sb-admin-2.min.js' %}"></script>
<script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/crypto-js.min.js' %}"></script>
<script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/encrypt.js' %}"></script>
<script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/lz-string.min.js' %}"></script>
{% if is_socket %}
<script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/agent.socket.js' %}?v=1.0"></script>
{% else %}
<script type="text/javascript" src="{% static 'EasyAssistSalesforceApp/js/agent.js' %}?v=1.0"></script>
{% endif %}
<script type="text/javascript">
  window.COBROWSE_SESSION_ID = "{{session_id}}";
  window.ALLOW_LANGUAGE_SUPPORT = '{{allow_language_support}}';
  window.CHOOSE_PRODUCT_CATEGORY = '{{choose_product_category}}';
  window.ALLOW_SCREENSHARING_COBROWSE = 'false';
  window.AGENT_NAME = "{{agent_name}}";
  window.CLIENT_NAME = "{{client_name}}";
  window.SALESFORCE_TOKEN = "{{salesforce_token}}";
  window.IS_ADMIN_AGENT = "{{is_admin_agent}}";
  window.FLOATING_BUTTON_BG_COLOR = "{{floating_button_bg_color}}";
</script>
<script type="text/javascript">
  function easyassistChangeTooltipShow(el){el.nextElementSibling.style.display = "inline-block"}
  function easyassistChangeTooltipHide(el){el.nextElementSibling.style.display = "none"}
    $(document).ready(function() {
      document.getElementById('mySidenav-session-end').style.display="none";
      $("#multiple-support-agent").multiselect({
        includeSelectAllOption: true,
      });

      if(document.getElementById("easyassist-language-support-selected")) {
        new EasyassistCustomSelect("#easyassist-language-support-selected", null, FLOATING_BUTTON_BG_COLOR);
      }
      if(document.getElementById("easyassist-product-category-selected")) {
        new EasyassistCustomSelect("#easyassist-product-category-selected", null, FLOATING_BUTTON_BG_COLOR);
      }
      if(document.getElementById("close-session-remarks")) {
        new EasyassistCustomSelect("#close-session-remarks", null, FLOATING_BUTTON_BG_COLOR);
      }

      $('#support-agent-search-input').keyup(function(e) {
        var search_text = e.target.value.toLowerCase();

        if(search_text) {
          $('#div-support-agents-container').find('li').each(function(idx, li_element) {
            var agent_name = $(li_element).find('.support-agent-text').text().toLowerCase();
            if(agent_name.indexOf(search_text) > -1) {
              $(li_element).show();
            } else {
              $(li_element).hide();
            }
          });
        } else {
          $('#div-support-agents-container').find('li').each(function(idx, li_element) {
            $(li_element).show();
          });
        }
      });
    });
  
    $('#close_session_modal').on('hidden.bs.modal', function () {
        $('#end_session_cancel_btn').trigger('click');
    })

  function show_easyassist_toast(message){
    var x = document.getElementById("easyassist-snackbar");
    x.innerHTML = message;
    x.className = "show";
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 5000);
  }
  
  function show_comments_textbox(element){
    if(element.value == "others"){
      document.getElementById("close-session-remarks-text").removeAttribute("disabled");
      setTimeout(function () {
        document.getElementById("close-session-remarks-text").focus();
    }, 100);
      
    } else {
      document.getElementById("close-session-remarks-text").setAttribute("disabled", true);
      document.getElementById("close-session-remarks-text").value = '';
    }
  }
  function hide_cobrowsing_modals(element){
    var crr_modal = element.getAttribute("data-target");
    var modals = ["#capture_pageshot_confirm_modal",
                  "#capture_pageshot_confirm_modal",
                  "#request_for_edit_access_modal",
                  "#captured_information_modal",
                  "#support_material_modal",
                  "#request_meeting_modal",
                  "#check_for_internet_modal",
                  "#askfor_support_modal",
                  "#close_session_modal",
                  "#check_for_internet_modal"];
    for(var modal_index = 0; modal_index < modals.length; modal_index++){
      if(modals[modal_index] != crr_modal)
          $(modals[modal_index]).modal("hide");
    }
  }
  setInterval(function() {
    close_session_modal = document.getElementById("close_session_modal");
    if (close_session_modal != null && close_session_modal != undefined) {
      if (close_session_modal.classList.contains("show") == true) {
        $("#capture_screenshot_confirm_modal").modal("hide");
        $("#capture_pageshot_confirm_modal").modal("hide");
        $("#request_for_edit_access_modal").modal("hide");
        $("#captured_information_modal").modal("hide");
        $("#support_material_modal").modal("hide");
        $("#request_meeting_modal").modal("hide");
        $("#check_for_internet_modal").modal("hide");
        $("#askfor_support_modal").modal("hide");
      }
    }
  }, 500);

</script>
</body>
</html>
